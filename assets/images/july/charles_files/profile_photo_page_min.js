function Carousel(element){function setPaneDimensions(){pane_width=element.width(),panes.each(function(){$(this).width(pane_width)}),container.width(pane_width*pane_count)}function setContainerOffset(percent,animate){if(container.removeClass("animate"),animate&&container.addClass("animate"),Modernizr.csstransforms3d)container.css("transform","translate3d("+percent+"%,0,0) scale3d(1,1,1)");else if(Modernizr.csstransforms)container.css("transform","translate("+percent+"%,0)");else{var px=pane_width*pane_count/100*percent;container.css("left",px+"px")}}function handleHammer(ev){switch(ev.gesture.preventDefault(),ev.type){case"dragright":case"dragleft":var pane_offset=-100/pane_count*current_pane,drag_offset=100/pane_width*ev.gesture.deltaX/pane_count;(0==current_pane&&"right"==ev.gesture.direction||current_pane==pane_count-1&&"left"==ev.gesture.direction)&&(drag_offset*=.4),setContainerOffset(drag_offset+pane_offset);break;case"swipeleft":self.next(),storeAction("swipenext"),ev.gesture.stopDetect();break;case"swiperight":self.prev(),storeAction("swiperight"),ev.gesture.stopDetect();break;case"release":Math.abs(ev.gesture.deltaX)>pane_width/2?"right"==ev.gesture.direction?(storeAction("releaseprev"),self.prev()):(storeAction("releasenext"),self.next()):self.showPane(current_pane,!0)}}var self=this;element=$(element);var container=$(">ul",element),panes=$(">ul>li",element),pane_width=0,pane_count=panes.length,current_pane=0;this.init=function(){0!=window.current_slide&&(current_pane=parseInt(window.current_slide)),0==parseInt(current_pane)&&$("#gallery-modal .stage .prev").hide(),current_pane==parseInt(pane_count)-1&&$("#gallery-modal .stage .next").hide(),setPaneDimensions(),$(window).on("load resize orientationchange",function(){setPaneDimensions()}),$(document).on("click","#gallery-modal .stage .next",function(){self.next()}),$(document).on("click","#gallery-modal .stage .prev",function(){self.prev()}),$(window).on("keyup",function(e){var key=e.which|e.keyCode;37===key&&0!=current_pane?(self.prev(),storeAction("arrowprev")):27===key?($("#gallery-modal").fadeOut(200,function(){$(".gallery_container").html("")}),storeAction("esc")):39===key&&(self.next(),storeAction("arrownext"))})},this.showPane=function(index,animate){index=Math.max(0,Math.min(index,pane_count-1)),current_pane=index,setContainerOffset(-100/pane_count*current_pane,animate)},this.next=function(){nextPane=parseInt(current_pane)+1;var photo_id=$('*[data-index-id="'+nextPane+'"]').attr("data-photo-id");return photo_id?(rePaintSlide(photo_id),$(window).width()>=400&&(nextPane==parseInt(pane_count)-1?($("#gallery-modal .stage .next").hide(),$("#gallery-modal .stage .prev").show()):($("#gallery-modal .stage .next").show(),$("#gallery-modal .stage .prev").show()))):$(window).width()>=400&&($("#gallery-modal .stage .next").hide(),$("#gallery-modal .stage .prev").show()),this.showPane(current_pane+1,!0)},this.prev=function(){nextPane=parseInt(current_pane)-1;var photo_id=$('*[data-index-id="'+nextPane+'"]').attr("data-photo-id");return photo_id?(rePaintSlide(photo_id),$(window).width()>=400&&(nextPane<=0?($("#gallery-modal .stage .prev").hide(),$("#gallery-modal .stage .next").show()):($("#gallery-modal .stage .prev").show(),$("#gallery-modal .stage .next").show()))):$(window).width()>=400&&($("#gallery-modal .stage .prev").hide(),$("#gallery-modal .stage .next").show()),this.showPane(current_pane-1,!0)},new Hammer(element[0],{drag_lock_to_axis:!0}).on("release dragleft dragright swipeleft swiperight",handleHammer)}function moveToSlide(index){animate=!1,element=$("#carousel");var container=$(">ul",element),panes=$(">ul>li",element),pane_width=0,pane_count=panes.length;index=Math.max(0,Math.min(index,pane_count-1)),current_pane=index;var percent=-100/pane_count*current_pane;if(container.removeClass("animate"),animate&&container.addClass("animate"),Modernizr.csstransforms3d)container.css("transform","translate3d("+percent+"%,0,0) scale3d(1,1,1)");else if(Modernizr.csstransforms)container.css("transform","translate("+percent+"%,0)");else{var px=pane_width*pane_count/100*percent;container.css("left",px+"px")}}function storeAction(direction){var url=window.location.href,page="";url.indexOf("/user/")>=1?(page="user",data_href=":gallery/"+direction):url.indexOf("/brewery/")>=1?(page="brewery",data_href=":gallery/"+direction):url.indexOf("/beer/")>=1?(page="beer",data_href=":gallery/"+direction):(page="venue",data_href=":gallery/"+direction);var d=page+data_href;_gaq.push(["_trackEvent","Click","Click",d])}function rePaintSlide(photo_id){var jsonString=$("#photoJSON_"+photo_id).html();if(""!=jsonString){jsonObj=JSON.parse(jsonString);var source=$("#top-gallery-modal-template").html(),template=Handlebars.compile(source),sourceFull=$("#bottom-gallery-modal-template").html(),templateFull=Handlebars.compile(sourceFull),topTemplate=template(jsonObj);$("#gallery-modal .top .user").html(topTemplate);var bottomTemplate=templateFull(jsonObj);$("#gallery-modal .bottom").html(bottomTemplate)}}function Swipe(container,options){"use strict";function setup(){slides=element.children,length=slides.length,slides.length<2&&(options.continuous=!1),browser.transitions&&options.continuous&&slides.length<3&&(element.appendChild(slides[0].cloneNode(!0)),element.appendChild(element.children[1].cloneNode(!0)),slides=element.children),slidePos=new Array(slides.length),width=container.getBoundingClientRect().width||container.offsetWidth,element.style.width=slides.length*width+"px";for(var pos=slides.length;pos--;){var slide=slides[pos];slide.style.width=width+"px",slide.setAttribute("data-index",pos),browser.transitions&&(slide.style.left=pos*-width+"px",move(pos,index>pos?-width:index<pos?width:0,0))}options.continuous&&browser.transitions&&(move(circle(index-1),-width,0),move(circle(index+1),width,0)),browser.transitions||(element.style.left=index*-width+"px"),container.style.visibility="visible"}function prev(){options.continuous?slide(index-1):index&&slide(index-1)}function next(){options.continuous?slide(index+1):index<slides.length-1&&slide(index+1)}function circle(index){return(slides.length+index%slides.length)%slides.length}function slide(to,slideSpeed){if(index!=to){if(browser.transitions){var direction=Math.abs(index-to)/(index-to);if(options.continuous){var natural_direction=direction;direction=-slidePos[circle(to)]/width,direction!==natural_direction&&(to=-direction*slides.length+to)}for(var diff=Math.abs(index-to)-1;diff--;)move(circle((to>index?to:index)-diff-1),width*direction,0);to=circle(to),move(index,width*direction,slideSpeed||speed),move(to,0,slideSpeed||speed),options.continuous&&move(circle(to-direction),-width*direction,0)}else to=circle(to),animate(index*-width,to*-width,slideSpeed||speed);index=to,offloadFn(options.callback&&options.callback(index,slides[index]))}}function move(index,dist,speed){translate(index,dist,speed),slidePos[index]=dist}function translate(index,dist,speed){var slide=slides[index],style=slide&&slide.style;style&&(style.webkitTransitionDuration=style.MozTransitionDuration=style.msTransitionDuration=style.OTransitionDuration=style.transitionDuration=speed+"ms",style.webkitTransform="translate("+dist+"px,0)translateZ(0)",style.msTransform=style.MozTransform=style.OTransform="translateX("+dist+"px)")}function animate(from,to,speed){if(!speed)return void(element.style.left=to+"px");var start=+new Date,timer=setInterval(function(){var timeElap=+new Date-start;if(timeElap>speed)return element.style.left=to+"px",delay&&begin(),options.transitionEnd&&options.transitionEnd.call(event,index,slides[index]),void clearInterval(timer);element.style.left=(to-from)*(Math.floor(timeElap/speed*100)/100)+from+"px"},4)}function begin(){interval=setTimeout(next,delay)}function stop(){delay=0,clearTimeout(interval)}var noop=function(){},offloadFn=function(fn){setTimeout(fn||noop,0)},browser={addEventListener:!!window.addEventListener,touch:"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,transitions:function(temp){var props=["transitionProperty","WebkitTransition","MozTransition","OTransition","msTransition"];for(var i in props)if(void 0!==temp.style[props[i]])return!0;return!1}(document.createElement("swipe"))};if(container){var slides,slidePos,width,length,element=container.children[0];options=options||{};var index=parseInt(options.startSlide,10)||0,speed=options.speed||300;options.continuous=void 0===options.continuous||options.continuous;var interval,isScrolling,delay=options.auto||0,start={},delta={},events={handleEvent:function(event){switch(event.type){case"touchstart":this.start(event);break;case"touchmove":this.move(event);break;case"touchend":offloadFn(this.end(event));break;case"webkitTransitionEnd":case"msTransitionEnd":case"oTransitionEnd":case"otransitionend":case"transitionend":offloadFn(this.transitionEnd(event));break;case"resize":offloadFn(setup)}options.stopPropagation&&event.stopPropagation()},start:function(event){var touches=event.touches[0];start={x:touches.pageX,y:touches.pageY,time:+new Date},isScrolling=void 0,delta={},element.addEventListener("touchmove",this,!1),element.addEventListener("touchend",this,!1)},move:function(event){if(!(event.touches.length>1||event.scale&&1!==event.scale)){options.disableScroll&&event.preventDefault();var touches=event.touches[0];delta={x:touches.pageX-start.x,y:touches.pageY-start.y},void 0===isScrolling&&(isScrolling=!!(isScrolling||Math.abs(delta.x)<Math.abs(delta.y))),isScrolling||(event.preventDefault(),stop(),options.continuous?(translate(circle(index-1),delta.x+slidePos[circle(index-1)],0),translate(index,delta.x+slidePos[index],0),translate(circle(index+1),delta.x+slidePos[circle(index+1)],0)):(delta.x=delta.x/(!index&&delta.x>0||index==slides.length-1&&delta.x<0?Math.abs(delta.x)/width+1:1),translate(index-1,delta.x+slidePos[index-1],0),translate(index,delta.x+slidePos[index],0),translate(index+1,delta.x+slidePos[index+1],0)))}},end:function(event){var duration=+new Date-start.time,isValidSlide=Number(duration)<250&&Math.abs(delta.x)>20||Math.abs(delta.x)>width/2,isPastBounds=!index&&delta.x>0||index==slides.length-1&&delta.x<0;options.continuous&&(isPastBounds=!1);var direction=delta.x<0;isScrolling||(isValidSlide&&!isPastBounds?(direction?(options.continuous?(move(circle(index-1),-width,0),move(circle(index+2),width,0)):move(index-1,-width,0),move(index,slidePos[index]-width,speed),move(circle(index+1),slidePos[circle(index+1)]-width,speed),index=circle(index+1)):(options.continuous?(move(circle(index+1),width,0),move(circle(index-2),-width,0)):move(index+1,width,0),move(index,slidePos[index]+width,speed),move(circle(index-1),slidePos[circle(index-1)]+width,speed),index=circle(index-1)),options.callback&&options.callback(index,slides[index])):options.continuous?(move(circle(index-1),-width,speed),move(index,0,speed),move(circle(index+1),width,speed)):(move(index-1,-width,speed),move(index,0,speed),move(index+1,width,speed))),element.removeEventListener("touchmove",events,!1),element.removeEventListener("touchend",events,!1)},transitionEnd:function(event){parseInt(event.target.getAttribute("data-index"),10)==index&&(delay&&begin(),options.transitionEnd&&options.transitionEnd.call(event,index,slides[index]))}};return setup(),delay&&begin(),browser.addEventListener?(browser.touch&&element.addEventListener("touchstart",events,!1),browser.transitions&&(element.addEventListener("webkitTransitionEnd",events,!1),element.addEventListener("msTransitionEnd",events,!1),element.addEventListener("oTransitionEnd",events,!1),element.addEventListener("otransitionend",events,!1),element.addEventListener("transitionend",events,!1)),window.addEventListener("resize",events,!1)):window.onresize=function(){setup()},{setup:function(){setup()},slide:function(to,speed){stop(),slide(to,speed)},prev:function(){stop(),prev()},next:function(){stop(),next()},stop:function(){stop()},getPos:function(){return index},getNumSlides:function(){return length},kill:function(){stop(),element.style.width="",element.style.left="";for(var pos=slides.length;pos--;){var slide=slides[pos];slide.style.width="",slide.style.left="",browser.transitions&&translate(pos,0,0)}browser.addEventListener?(element.removeEventListener("touchstart",events,!1),element.removeEventListener("webkitTransitionEnd",events,!1),element.removeEventListener("msTransitionEnd",events,!1),element.removeEventListener("oTransitionEnd",events,!1),element.removeEventListener("otransitionend",events,!1),element.removeEventListener("transitionend",events,!1),window.removeEventListener("resize",events,!1)):window.onresize=null}}}}function stageHeight(){var bottomHeight=$("#gallery-modal .bottom").outerHeight();$("#gallery-modal .stage").css("bottom",bottomHeight)}window.Modernizr=function(a,b,c){function z(a){j.cssText=a}function B(a,b){return typeof a===b}function C(a,b){return!!~(""+a).indexOf(b)}function D(a,b){for(var d in a){var e=a[d];if(!C(e,"-")&&j[e]!==c)return"pfx"!=b||e}return!1}function E(a,b,d){for(var e in a){var f=b[a[e]];if(f!==c)return!1===d?a[e]:B(f,"function")?f.bind(d||b):f}return!1}function F(a,b,c){var d=a.charAt(0).toUpperCase()+a.slice(1),e=(a+" "+o.join(d+" ")+d).split(" ");return B(b,"string")||B(b,"undefined")?D(e,b):(e=(a+" "+p.join(d+" ")+d).split(" "),E(e,b,c))}var v,y,d="2.7.1",e={},f=!0,g=b.documentElement,h="modernizr",i=b.createElement(h),j=i.style,m=" -webkit- -moz- -o- -ms- ".split(" "),n="Webkit Moz O ms",o=n.split(" "),p=n.toLowerCase().split(" "),q={},t=[],u=t.slice,w=function(a,c,d,e){var f,i,j,k,l=b.createElement("div"),m=b.body,n=m||b.createElement("body");if(parseInt(d,10))for(;d--;)j=b.createElement("div"),j.id=e?e[d]:h+(d+1),l.appendChild(j);return f=["&#173;",'<style id="s',h,'">',a,"</style>"].join(""),l.id=h,(m?l:n).innerHTML+=f,n.appendChild(l),m||(n.style.background="",n.style.overflow="hidden",k=g.style.overflow,g.style.overflow="hidden",g.appendChild(n)),i=c(l,a),m?l.parentNode.removeChild(l):(n.parentNode.removeChild(n),g.style.overflow=k),!!i},x={}.hasOwnProperty;y=B(x,"undefined")||B(x.call,"undefined")?function(a,b){return b in a&&B(a.constructor.prototype[b],"undefined")}:function(a,b){return x.call(a,b)},Function.prototype.bind||(Function.prototype.bind=function(b){var c=this;if("function"!=typeof c)throw new TypeError;var d=u.call(arguments,1),e=function(){if(this instanceof e){var a=function(){};a.prototype=c.prototype;var f=new a,g=c.apply(f,d.concat(u.call(arguments)));return Object(g)===g?g:f}return c.apply(b,d.concat(u.call(arguments)))};return e}),q.cssanimations=function(){return F("animationName")},q.csstransforms=function(){return!!F("transform")},q.csstransforms3d=function(){var a=!!F("perspective");return a&&"webkitPerspective"in g.style&&w("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}",function(b,c){a=9===b.offsetLeft&&3===b.offsetHeight}),a},q.csstransitions=function(){return F("transition")};for(var G in q)y(q,G)&&(v=G.toLowerCase(),e[v]=q[G](),t.push((e[v]?"":"no-")+v));return e.addTest=function(a,b){if("object"==typeof a)for(var d in a)y(a,d)&&e.addTest(d,a[d]);else{if(a=a.toLowerCase(),e[a]!==c)return e;b="function"==typeof b?b():b,void 0!==f&&f&&(g.className+=" "+(b?"":"no-")+a),e[a]=b}return e},z(""),i=null,function(a,b){function l(a,b){var c=a.createElement("p"),d=a.getElementsByTagName("head")[0]||a.documentElement;return c.innerHTML="x<style>"+b+"</style>",d.insertBefore(c.lastChild,d.firstChild)}function m(){var a=s.elements;return"string"==typeof a?a.split(" "):a}function n(a){var b=j[a[h]];return b||(b={},i++,a[h]=i,j[i]=b),b}function o(a,c,d){if(c||(c=b),k)return c.createElement(a);d||(d=n(c));var g;return g=d.cache[a]?d.cache[a].cloneNode():f.test(a)?(d.cache[a]=d.createElem(a)).cloneNode():d.createElem(a),!g.canHaveChildren||e.test(a)||g.tagUrn?g:d.frag.appendChild(g)}function p(a,c){if(a||(a=b),k)return a.createDocumentFragment();c=c||n(a);for(var d=c.frag.cloneNode(),e=0,f=m(),g=f.length;e<g;e++)d.createElement(f[e]);return d}function q(a,b){b.cache||(b.cache={},b.createElem=a.createElement,b.createFrag=a.createDocumentFragment,b.frag=b.createFrag()),a.createElement=function(c){return s.shivMethods?o(c,a,b):b.createElem(c)},a.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+m().join().replace(/[\w\-]+/g,function(a){return b.createElem(a),b.frag.createElement(a),'c("'+a+'")'})+");return n}")(s,b.frag)}function r(a){a||(a=b);var c=n(a);return s.shivCSS&&!g&&!c.hasCSS&&(c.hasCSS=!!l(a,"article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}")),k||q(a,c),a}var g,k,c="3.7.0",d=a.html5||{},e=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,f=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,h="_html5shiv",i=0,j={};!function(){try{var a=b.createElement("a");a.innerHTML="<xyz></xyz>",g="hidden"in a,k=1==a.childNodes.length||function(){b.createElement("a");var a=b.createDocumentFragment();return void 0===a.cloneNode||void 0===a.createDocumentFragment||void 0===a.createElement}()}catch(c){g=!0,k=!0}}();var s={elements:d.elements||"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video",version:c,shivCSS:!1!==d.shivCSS,supportsUnknownElements:k,shivMethods:!1!==d.shivMethods,type:"default",shivDocument:r,createElement:o,createDocumentFragment:p};a.html5=s,r(b)}(this,b),e._version=d,e._prefixes=m,e._domPrefixes=p,e._cssomPrefixes=o,e.testProp=function(a){return D([a])},e.testAllProps=F,e.testStyles=w,g.className=g.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(f?" js "+t.join(" "):""),e}(0,this.document),function(a,b,c){function d(a){return"[object Function]"==o.call(a)}function e(a){return"string"==typeof a}function f(){}function g(a){return!a||"loaded"==a||"complete"==a||"uninitialized"==a}function h(){var a=p.shift();q=1,a?a.t?m(function(){("c"==a.t?B.injectCss:B.injectJs)(a.s,0,a.a,a.x,a.e,1)},0):(a(),h()):q=0}function i(a,c,d,e,f,i,j){function k(b){if(!o&&g(l.readyState)&&(u.r=o=1,!q&&h(),l.onload=l.onreadystatechange=null,b)){"img"!=a&&m(function(){t.removeChild(l)},50);for(var d in y[c])y[c].hasOwnProperty(d)&&y[c][d].onload()}}var j=j||B.errorTimeout,l=b.createElement(a),o=0,r=0,u={t:d,s:c,e:f,a:i,x:j};1===y[c]&&(r=1,y[c]=[]),"object"==a?l.data=c:(l.src=c,l.type=a),l.width=l.height="0",l.onerror=l.onload=l.onreadystatechange=function(){k.call(this,r)},p.splice(e,0,u),"img"!=a&&(r||2===y[c]?(t.insertBefore(l,s?null:n),m(k,j)):y[c].push(l))}function j(a,b,c,d,f){return q=0,b=b||"j",e(a)?i("c"==b?v:u,a,b,this.i++,c,d,f):(p.splice(this.i++,0,a),1==p.length&&h()),this}function k(){var a=B;return a.loader={load:j,i:0},a}var A,B,l=b.documentElement,m=a.setTimeout,n=b.getElementsByTagName("script")[0],o={}.toString,p=[],q=0,r="MozAppearance"in l.style,s=r&&!!b.createRange().compareNode,t=s?l:n.parentNode,l=a.opera&&"[object Opera]"==o.call(a.opera),l=!!b.attachEvent&&!l,u=r?"object":l?"script":"img",v=l?"script":u,w=Array.isArray||function(a){return"[object Array]"==o.call(a)},x=[],y={},z={timeout:function(a,b){return b.length&&(a.timeout=b[0]),a}};B=function(a){function b(a){var e,f,g,a=a.split("!"),b=x.length,c=a.pop(),d=a.length,c={url:c,origUrl:c,prefixes:a};for(f=0;f<d;f++)g=a[f].split("="),(e=z[g.shift()])&&(c=e(c,g));for(f=0;f<b;f++)c=x[f](c);return c}function g(a,e,f,g,h){var i=b(a),j=i.autoCallback;i.url.split(".").pop().split("?").shift(),i.bypass||(e&&(e=d(e)?e:e[a]||e[g]||e[a.split("/").pop().split("?")[0]]),i.instead?i.instead(a,e,f,g,h):(y[i.url]?i.noexec=!0:y[i.url]=1,f.load(i.url,i.forceCSS||!i.forceJS&&"css"==i.url.split(".").pop().split("?").shift()?"c":c,i.noexec,i.attrs,i.timeout),(d(e)||d(j))&&f.load(function(){k(),e&&e(i.origUrl,h,g),j&&j(i.origUrl,h,g),y[i.url]=2})))}function h(a,b){function c(a,c){if(a){if(e(a))c||(j=function(){var a=[].slice.call(arguments);k.apply(this,a),l()}),g(a,j,b,0,h);else if(Object(a)===a)for(n in m=function(){var c,b=0;for(c in a)a.hasOwnProperty(c)&&b++;return b}(),a)a.hasOwnProperty(n)&&(!c&&!--m&&(d(j)?j=function(){var a=[].slice.call(arguments);k.apply(this,a),l()}:j[n]=function(a){return function(){var b=[].slice.call(arguments);a&&a.apply(this,b),l()}}(k[n])),g(a[n],j,b,n,h))}else!c&&l()}var m,n,h=!!a.test,i=a.load||a.both,j=a.callback||f,k=j,l=a.complete||f;c(h?a.yep:a.nope,!!i),i&&c(i)}var i,j,l=this.yepnope.loader;if(e(a))g(a,0,l,0);else if(w(a))for(i=0;i<a.length;i++)j=a[i],e(j)?g(j,0,l,0):w(j)?B(j):Object(j)===j&&h(j,l);else Object(a)===a&&h(a,l)},B.addPrefix=function(a,b){z[a]=b},B.addFilter=function(a){x.push(a)},B.errorTimeout=1e4,null==b.readyState&&b.addEventListener&&(b.readyState="loading",b.addEventListener("DOMContentLoaded",A=function(){b.removeEventListener("DOMContentLoaded",A,0),b.readyState="complete"},0)),a.yepnope=k(),a.yepnope.executeStack=h,a.yepnope.injectJs=function(a,c,d,e,i,j){var l,o,k=b.createElement("script"),e=e||B.errorTimeout;k.src=a;for(o in d)k.setAttribute(o,d[o]);c=j?h:c||f,k.onreadystatechange=k.onload=function(){!l&&g(k.readyState)&&(l=1,c(),k.onload=k.onreadystatechange=null)},m(function(){l||(l=1,c(1))},e),i?k.onload():n.parentNode.insertBefore(k,n)},a.yepnope.injectCss=function(a,c,d,e,g,i){var j,e=b.createElement("link"),c=i?h:c||f;e.href=a,e.rel="stylesheet",e.type="text/css";for(j in d)e.setAttribute(j,d[j]);g||(n.parentNode.insertBefore(e,n),m(c,0))}}(this,document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))},function(window,undefined){"use strict";function setup(){Hammer.READY||(Event.determineEventTypes(),Utils.each(Hammer.gestures,function(gesture){Detection.register(gesture)}),Event.onTouch(Hammer.DOCUMENT,EVENT_MOVE,Detection.detect),Event.onTouch(Hammer.DOCUMENT,EVENT_END,Detection.detect),Hammer.READY=!0)}var Hammer=function(element,options){return new Hammer.Instance(element,options||{})};Hammer.VERSION="1.0.10",Hammer.defaults={stop_browser_behavior:{userSelect:"none",touchAction:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},Hammer.HAS_POINTEREVENTS=window.navigator.pointerEnabled||window.navigator.msPointerEnabled,Hammer.HAS_TOUCHEVENTS="ontouchstart"in window,Hammer.MOBILE_REGEX=/mobile|tablet|ip(ad|hone|od)|android|silk/i,Hammer.NO_MOUSEEVENTS=Hammer.HAS_TOUCHEVENTS&&window.navigator.userAgent.match(Hammer.MOBILE_REGEX),Hammer.EVENT_TYPES={},Hammer.UPDATE_VELOCITY_INTERVAL=16,Hammer.DOCUMENT=window.document;var DIRECTION_DOWN=Hammer.DIRECTION_DOWN="down",DIRECTION_LEFT=Hammer.DIRECTION_LEFT="left",DIRECTION_UP=Hammer.DIRECTION_UP="up",DIRECTION_RIGHT=Hammer.DIRECTION_RIGHT="right",POINTER_MOUSE=Hammer.POINTER_MOUSE="mouse",POINTER_TOUCH=Hammer.POINTER_TOUCH="touch",POINTER_PEN=Hammer.POINTER_PEN="pen",EVENT_START=Hammer.EVENT_START="start",EVENT_MOVE=Hammer.EVENT_MOVE="move",EVENT_END=Hammer.EVENT_END="end";Hammer.plugins=Hammer.plugins||{},Hammer.gestures=Hammer.gestures||{},Hammer.READY=!1;var Utils=Hammer.utils={extend:function(dest,src,merge){for(var key in src)dest[key]!==undefined&&merge||(dest[key]=src[key]);return dest},each:function(obj,iterator,context){var i,o;if("forEach"in obj)obj.forEach(iterator,context);else if(obj.length!==undefined){for(i=-1;o=obj[++i];)if(!1===iterator.call(context,o,i,obj))return}else for(i in obj)if(obj.hasOwnProperty(i)&&!1===iterator.call(context,obj[i],i,obj))return},inStr:function(src,needle){return src.indexOf(needle)>-1},hasParent:function(node,parent){for(;node;){if(node==parent)return!0;node=node.parentNode}return!1},getCenter:function(touches){var pageX=[],pageY=[],clientX=[],clientY=[],min=Math.min,max=Math.max;return 1===touches.length?{pageX:touches[0].pageX,pageY:touches[0].pageY,clientX:touches[0].clientX,clientY:touches[0].clientY}:(Utils.each(touches,function(touch){pageX.push(touch.pageX),pageY.push(touch.pageY),clientX.push(touch.clientX),clientY.push(touch.clientY)}),{pageX:(min.apply(Math,pageX)+max.apply(Math,pageX))/2,pageY:(min.apply(Math,pageY)+max.apply(Math,pageY))/2,clientX:(min.apply(Math,clientX)+max.apply(Math,clientX))/2,clientY:(min.apply(Math,clientY)+max.apply(Math,clientY))/2})},getVelocity:function(delta_time,delta_x,delta_y){return{x:Math.abs(delta_x/delta_time)||0,y:Math.abs(delta_y/delta_time)||0}},getAngle:function(touch1,touch2){var x=touch2.clientX-touch1.clientX,y=touch2.clientY-touch1.clientY;return 180*Math.atan2(y,x)/Math.PI},getDirection:function(touch1,touch2){return Math.abs(touch1.clientX-touch2.clientX)>=Math.abs(touch1.clientY-touch2.clientY)?touch1.clientX-touch2.clientX>0?DIRECTION_LEFT:DIRECTION_RIGHT:touch1.clientY-touch2.clientY>0?DIRECTION_UP:DIRECTION_DOWN},getDistance:function(touch1,touch2){var x=touch2.clientX-touch1.clientX,y=touch2.clientY-touch1.clientY;return Math.sqrt(x*x+y*y)},getScale:function(start,end){return start.length>=2&&end.length>=2?this.getDistance(end[0],end[1])/this.getDistance(start[0],start[1]):1},getRotation:function(start,end){return start.length>=2&&end.length>=2?this.getAngle(end[1],end[0])-this.getAngle(start[1],start[0]):0},isVertical:function(direction){return direction==DIRECTION_UP||direction==DIRECTION_DOWN},toggleDefaultBehavior:function(element,css_props,toggle){if(css_props&&element&&element.style){Utils.each(["webkit","moz","Moz","ms","o",""],function(vendor){Utils.each(css_props,function(value,prop){vendor&&(prop=vendor+prop.substring(0,1).toUpperCase()+prop.substring(1)),prop in element.style&&(element.style[prop]=!toggle&&value)})});var false_fn=function(){return!1};"none"==css_props.userSelect&&(element.onselectstart=!toggle&&false_fn),"none"==css_props.userDrag&&(element.ondragstart=!toggle&&false_fn)}}};Hammer.Instance=function(element,options){var self=this;return setup(),this.element=element,this.enabled=!0,this.options=Utils.extend(Utils.extend({},Hammer.defaults),options||{}),this.options.stop_browser_behavior&&Utils.toggleDefaultBehavior(this.element,this.options.stop_browser_behavior,!1),this.eventStartHandler=Event.onTouch(element,EVENT_START,function(ev){self.enabled&&Detection.startDetect(self,ev)}),this.eventHandlers=[],this},Hammer.Instance.prototype={on:function(gesture,handler){var gestures=gesture.split(" ");return Utils.each(gestures,function(gesture){this.element.addEventListener(gesture,handler,!1),this.eventHandlers.push({gesture:gesture,handler:handler})},this),this},off:function(gesture,handler){var i,eh,gestures=gesture.split(" ");return Utils.each(gestures,function(gesture){for(this.element.removeEventListener(gesture,handler,!1),i=-1;eh=this.eventHandlers[++i];)eh.gesture===gesture&&eh.handler===handler&&this.eventHandlers.splice(i,1)},this),this},trigger:function(gesture,eventData){eventData||(eventData={});var event=Hammer.DOCUMENT.createEvent("Event");event.initEvent(gesture,!0,!0),event.gesture=eventData;var element=this.element;return Utils.hasParent(eventData.target,element)&&(element=eventData.target),element.dispatchEvent(event),this},enable:function(state){return this.enabled=state,this},dispose:function(){var i,eh;for(this.options.stop_browser_behavior&&Utils.toggleDefaultBehavior(this.element,this.options.stop_browser_behavior,!0),i=-1;eh=this.eventHandlers[++i];)this.element.removeEventListener(eh.gesture,eh.handler,!1);return this.eventHandlers=[],Event.unbindDom(this.element,Hammer.EVENT_TYPES[EVENT_START],this.eventStartHandler),null}};var last_move_event=null,should_detect=!1,touch_triggered=!1,Event=Hammer.event={bindDom:function(element,type,handler){var types=type.split(" ");Utils.each(types,function(type){element.addEventListener(type,handler,!1)})},unbindDom:function(element,type,handler){var types=type.split(" ");Utils.each(types,function(type){element.removeEventListener(type,handler,!1)})},onTouch:function(element,eventType,handler){var self=this,bindDomOnTouch=function(ev){var srcEventType=ev.type.toLowerCase();if(!Utils.inStr(srcEventType,"mouse")||!touch_triggered){Utils.inStr(srcEventType,"touch")||Utils.inStr(srcEventType,"pointerdown")||Utils.inStr(srcEventType,"mouse")&&1===ev.which?should_detect=!0:Utils.inStr(srcEventType,"mouse")&&!ev.which&&(should_detect=!1),(Utils.inStr(srcEventType,"touch")||Utils.inStr(srcEventType,"pointer"))&&(touch_triggered=!0);var count_touches=0;should_detect&&(Hammer.HAS_POINTEREVENTS&&eventType!=EVENT_END?count_touches=PointerEvent.updatePointer(eventType,ev):Utils.inStr(srcEventType,"touch")?count_touches=ev.touches.length:touch_triggered||(count_touches=Utils.inStr(srcEventType,"up")?0:1),count_touches>0&&eventType==EVENT_END?eventType=EVENT_MOVE:count_touches||(eventType=EVENT_END),(count_touches||null===last_move_event)&&(last_move_event=ev),handler.call(Detection,self.collectEventData(element,eventType,self.getTouchList(last_move_event,eventType),ev)),Hammer.HAS_POINTEREVENTS&&eventType==EVENT_END&&(count_touches=PointerEvent.updatePointer(eventType,ev))),count_touches||(last_move_event=null,should_detect=!1,touch_triggered=!1,PointerEvent.reset())}};return this.bindDom(element,Hammer.EVENT_TYPES[eventType],bindDomOnTouch),bindDomOnTouch},determineEventTypes:function(){var types;types=Hammer.HAS_POINTEREVENTS?PointerEvent.getEvents():Hammer.NO_MOUSEEVENTS?["touchstart","touchmove","touchend touchcancel"]:["touchstart mousedown","touchmove mousemove","touchend touchcancel mouseup"],Hammer.EVENT_TYPES[EVENT_START]=types[0],Hammer.EVENT_TYPES[EVENT_MOVE]=types[1],Hammer.EVENT_TYPES[EVENT_END]=types[2]},getTouchList:function(ev){return Hammer.HAS_POINTEREVENTS?PointerEvent.getTouchList():ev.touches?ev.touches:(ev.identifier=1,[ev])},collectEventData:function(element,eventType,touches,ev){var pointerType=POINTER_TOUCH;return(Utils.inStr(ev.type,"mouse")||PointerEvent.matchType(POINTER_MOUSE,ev))&&(pointerType=POINTER_MOUSE),{center:Utils.getCenter(touches),timeStamp:Date.now(),target:ev.target,touches:touches,eventType:eventType,pointerType:pointerType,srcEvent:ev,preventDefault:function(){var srcEvent=this.srcEvent;srcEvent.preventManipulation&&srcEvent.preventManipulation(),srcEvent.preventDefault&&srcEvent.preventDefault()},stopPropagation:function(){this.srcEvent.stopPropagation()},stopDetect:function(){return Detection.stopDetect()}}}},PointerEvent=Hammer.PointerEvent={pointers:{},getTouchList:function(){var touchlist=[];return Utils.each(this.pointers,function(pointer){touchlist.push(pointer)}),touchlist},updatePointer:function(type,pointerEvent){return type==EVENT_END?delete this.pointers[pointerEvent.pointerId]:(pointerEvent.identifier=pointerEvent.pointerId,this.pointers[pointerEvent.pointerId]=pointerEvent),Object.keys(this.pointers).length},matchType:function(pointerType,ev){if(!ev.pointerType)return!1;var pt=ev.pointerType,types={};return types[POINTER_MOUSE]=pt===POINTER_MOUSE,types[POINTER_TOUCH]=pt===POINTER_TOUCH,types[POINTER_PEN]=pt===POINTER_PEN,types[pointerType]},getEvents:function(){return["pointerdown MSPointerDown","pointermove MSPointerMove","pointerup pointercancel MSPointerUp MSPointerCancel"]},reset:function(){this.pointers={}}},Detection=Hammer.detection={gestures:[],current:null,previous:null,stopped:!1,startDetect:function(inst,eventData){this.current||(this.stopped=!1,this.current={inst:inst,startEvent:Utils.extend({},eventData),lastEvent:!1,lastVelocityEvent:!1,velocity:!1,name:""},this.detect(eventData))},detect:function(eventData){if(this.current&&!this.stopped){eventData=this.extendEventData(eventData);var inst=this.current.inst,inst_options=inst.options;return Utils.each(this.gestures,function(gesture){if(!this.stopped&&!1!==inst_options[gesture.name]&&!1!==inst.enabled&&!1===gesture.handler.call(gesture,eventData,inst))return this.stopDetect(),!1},this),this.current&&(this.current.lastEvent=eventData),eventData.eventType==EVENT_END&&!eventData.touches.length-1&&this.stopDetect(),
eventData}},stopDetect:function(){this.previous=Utils.extend({},this.current),this.current=null,this.stopped=!0},getVelocityData:function(ev,delta_time,delta_x,delta_y){var cur=this.current,velocityEv=cur.lastVelocityEvent,velocity=cur.velocity;velocityEv&&ev.timeStamp-velocityEv.timeStamp>Hammer.UPDATE_VELOCITY_INTERVAL?(velocity=Utils.getVelocity(ev.timeStamp-velocityEv.timeStamp,ev.center.clientX-velocityEv.center.clientX,ev.center.clientY-velocityEv.center.clientY),cur.lastVelocityEvent=ev):cur.velocity||(velocity=Utils.getVelocity(delta_time,delta_x,delta_y),cur.lastVelocityEvent=ev),cur.velocity=velocity,ev.velocityX=velocity.x,ev.velocityY=velocity.y},getInterimData:function(ev){var angle,direction,lastEvent=this.current.lastEvent;ev.eventType==EVENT_END?(angle=lastEvent&&lastEvent.interimAngle,direction=lastEvent&&lastEvent.interimDirection):(angle=lastEvent&&Utils.getAngle(lastEvent.center,ev.center),direction=lastEvent&&Utils.getDirection(lastEvent.center,ev.center)),ev.interimAngle=angle,ev.interimDirection=direction},extendEventData:function(ev){var cur=this.current,startEv=cur.startEvent;ev.touches.length==startEv.touches.length&&ev.touches!==startEv.touches||(startEv.touches=[],Utils.each(ev.touches,function(touch){startEv.touches.push(Utils.extend({},touch))}));var delta_time=ev.timeStamp-startEv.timeStamp,delta_x=ev.center.clientX-startEv.center.clientX,delta_y=ev.center.clientY-startEv.center.clientY;return this.getVelocityData(ev,delta_time,delta_x,delta_y),this.getInterimData(ev),Utils.extend(ev,{startEvent:startEv,deltaTime:delta_time,deltaX:delta_x,deltaY:delta_y,distance:Utils.getDistance(startEv.center,ev.center),angle:Utils.getAngle(startEv.center,ev.center),direction:Utils.getDirection(startEv.center,ev.center),scale:Utils.getScale(startEv.touches,ev.touches),rotation:Utils.getRotation(startEv.touches,ev.touches)}),ev},register:function(gesture){var options=gesture.defaults||{};return options[gesture.name]===undefined&&(options[gesture.name]=!0),Utils.extend(Hammer.defaults,options,!0),gesture.index=gesture.index||1e3,this.gestures.push(gesture),this.gestures.sort(function(a,b){return a.index<b.index?-1:a.index>b.index?1:0}),this.gestures}};Hammer.gestures.Drag={name:"drag",index:50,defaults:{drag_min_distance:10,correct_for_drag_min_distance:!0,drag_max_touches:1,drag_block_horizontal:!1,drag_block_vertical:!1,drag_lock_to_axis:!1,drag_lock_min_distance:25},triggered:!1,handler:function(ev,inst){var cur=Detection.current;if(cur.name!=this.name&&this.triggered)return inst.trigger(this.name+"end",ev),void(this.triggered=!1);if(!(inst.options.drag_max_touches>0&&ev.touches.length>inst.options.drag_max_touches))switch(ev.eventType){case EVENT_START:this.triggered=!1;break;case EVENT_MOVE:if(ev.distance<inst.options.drag_min_distance&&cur.name!=this.name)return;var startCenter=cur.startEvent.center;if(cur.name!=this.name&&(cur.name=this.name,inst.options.correct_for_drag_min_distance&&ev.distance>0)){var factor=Math.abs(inst.options.drag_min_distance/ev.distance);startCenter.pageX+=ev.deltaX*factor,startCenter.pageY+=ev.deltaY*factor,startCenter.clientX+=ev.deltaX*factor,startCenter.clientY+=ev.deltaY*factor,ev=Detection.extendEventData(ev)}(cur.lastEvent.drag_locked_to_axis||inst.options.drag_lock_to_axis&&inst.options.drag_lock_min_distance<=ev.distance)&&(ev.drag_locked_to_axis=!0);var last_direction=cur.lastEvent.direction;ev.drag_locked_to_axis&&last_direction!==ev.direction&&(Utils.isVertical(last_direction)?ev.direction=ev.deltaY<0?DIRECTION_UP:DIRECTION_DOWN:ev.direction=ev.deltaX<0?DIRECTION_LEFT:DIRECTION_RIGHT),this.triggered||(inst.trigger(this.name+"start",ev),this.triggered=!0),inst.trigger(this.name,ev),inst.trigger(this.name+ev.direction,ev);var is_vertical=Utils.isVertical(ev.direction);(inst.options.drag_block_vertical&&is_vertical||inst.options.drag_block_horizontal&&!is_vertical)&&ev.preventDefault();break;case EVENT_END:this.triggered&&inst.trigger(this.name+"end",ev),this.triggered=!1}}},Hammer.gestures.Hold={name:"hold",index:10,defaults:{hold_timeout:500,hold_threshold:2},timer:null,handler:function(ev,inst){switch(ev.eventType){case EVENT_START:clearTimeout(this.timer),Detection.current.name=this.name,this.timer=setTimeout(function(){"hold"==Detection.current.name&&inst.trigger("hold",ev)},inst.options.hold_timeout);break;case EVENT_MOVE:ev.distance>inst.options.hold_threshold&&clearTimeout(this.timer);break;case EVENT_END:clearTimeout(this.timer)}}},Hammer.gestures.Release={name:"release",index:1/0,handler:function(ev,inst){ev.eventType==EVENT_END&&inst.trigger(this.name,ev)}},Hammer.gestures.Swipe={name:"swipe",index:40,defaults:{swipe_min_touches:1,swipe_max_touches:1,swipe_velocity:.7},handler:function(ev,inst){if(ev.eventType==EVENT_END){if(ev.touches.length<inst.options.swipe_min_touches||ev.touches.length>inst.options.swipe_max_touches)return;(ev.velocityX>inst.options.swipe_velocity||ev.velocityY>inst.options.swipe_velocity)&&(inst.trigger(this.name,ev),inst.trigger(this.name+ev.direction,ev))}}},Hammer.gestures.Tap={name:"tap",index:100,defaults:{tap_max_touchtime:250,tap_max_distance:10,tap_always:!0,doubletap_distance:20,doubletap_interval:300},has_moved:!1,handler:function(ev,inst){var prev,since_prev,did_doubletap;ev.eventType==EVENT_START?this.has_moved=!1:ev.eventType!=EVENT_MOVE||this.moved?ev.eventType==EVENT_END&&"touchcancel"!=ev.srcEvent.type&&ev.deltaTime<inst.options.tap_max_touchtime&&!this.has_moved&&(prev=Detection.previous,since_prev=prev&&prev.lastEvent&&ev.timeStamp-prev.lastEvent.timeStamp,did_doubletap=!1,prev&&"tap"==prev.name&&since_prev&&since_prev<inst.options.doubletap_interval&&ev.distance<inst.options.doubletap_distance&&(inst.trigger("doubletap",ev),did_doubletap=!0),did_doubletap&&!inst.options.tap_always||(Detection.current.name="tap",inst.trigger(Detection.current.name,ev))):this.has_moved=ev.distance>inst.options.tap_max_distance}},Hammer.gestures.Touch={name:"touch",index:-1/0,defaults:{prevent_default:!1,prevent_mouseevents:!1},handler:function(ev,inst){if(inst.options.prevent_mouseevents&&ev.pointerType==POINTER_MOUSE)return void ev.stopDetect();inst.options.prevent_default&&ev.preventDefault(),ev.eventType==EVENT_START&&inst.trigger(this.name,ev)}},Hammer.gestures.Transform={name:"transform",index:45,defaults:{transform_min_scale:.01,transform_min_rotation:1,transform_always_block:!1,transform_within_instance:!1},triggered:!1,handler:function(ev,inst){if(Detection.current.name!=this.name&&this.triggered)return inst.trigger(this.name+"end",ev),void(this.triggered=!1);if(!(ev.touches.length<2)){if(inst.options.transform_always_block&&ev.preventDefault(),inst.options.transform_within_instance)for(var i=-1;ev.touches[++i];)if(!Utils.hasParent(ev.touches[i].target,inst.element))return;switch(ev.eventType){case EVENT_START:this.triggered=!1;break;case EVENT_MOVE:var scale_threshold=Math.abs(1-ev.scale),rotation_threshold=Math.abs(ev.rotation);if(scale_threshold<inst.options.transform_min_scale&&rotation_threshold<inst.options.transform_min_rotation)return;Detection.current.name=this.name,this.triggered||(inst.trigger(this.name+"start",ev),this.triggered=!0),inst.trigger(this.name,ev),rotation_threshold>inst.options.transform_min_rotation&&inst.trigger("rotate",ev),scale_threshold>inst.options.transform_min_scale&&(inst.trigger("pinch",ev),inst.trigger("pinch"+(ev.scale<1?"in":"out"),ev));break;case EVENT_END:this.triggered&&inst.trigger(this.name+"end",ev),this.triggered=!1}}}},"function"==typeof define&&define.amd?define(function(){return Hammer}):"object"==typeof module&&module.exports?module.exports=Hammer:window.Hammer=Hammer}(window),window.current_slide=0,(window.jQuery||window.Zepto)&&function($){$.fn.Swipe=function(params){return this.each(function(){$(this).data("Swipe",new Swipe($(this)[0],params))})}}(window.jQuery||window.Zepto),$(document).ready(function(){if($(".sidebar").is(":visible")){var hC=$(".sidebar").height();$(".main").css("min-height",hC)}$(".read-less").on("click",function(){return $(".beer-descrption-read-less").hide(),$(".beer-descrption-read-more").show(),!1}),$(".read-more").on("click",function(){return $(".beer-descrption-read-more").hide(),$(".beer-descrption-read-less").show(),!1}),$(document).on("click","#gallery-modal .top .close",function(){$("#gallery-modal").fadeOut(200,function(){$(".gallery_container").html("")})}),$(window).resize(function(){$("#gallery-modal").is(":visible")&&stageHeight()});var masterJSONArray=[];masterJSONArray.items=[],$(document).on("click",".photo-item",function(){var id=$(this).attr("data-photo-id"),jsonString=$("#photoJSON_"+id).html();if(0!=masterJSONArray.items.length?$(".photo-item").length!=masterJSONArray.items.length&&(masterJSONArray.items=[]):masterJSONArray.items=[],0==masterJSONArray.items.length&&$(".photo-item").each(function(){var id=$(this).attr("data-photo-id"),masterJSONString=$("#photoJSON_"+id).html();if(""!=masterJSONString){masterJSONObj=JSON.parse(masterJSONString);var newArray={beer:{bid:masterJSONObj.beer.bid,beer_name:masterJSONObj.beer.beer_name,beer_label:masterJSONObj.beer.beer_label},brewery:{brewery_id:masterJSONObj.brewery.brewery_id,brewery_name:masterJSONObj.brewery.brewery_name},photo:{photo_id:masterJSONObj.photo_id,photo_img_lg:masterJSONObj.photo.photo_img_lg},user:{first_name:masterJSONObj.user.first_name,last_name:masterJSONObj.user.last_name,user_name:masterJSONObj.user.user_name,user_avatar:masterJSONObj.user.user_avatar},created_at:masterJSONObj.created_at,checkin_id:masterJSONObj.checkin_id};masterJSONObj.venue.venue_id&&(newArray.venue={venue_id:masterJSONObj.venue.venue_id}),masterJSONArray.items.push(newArray)}}),""!=jsonString){jsonObj=JSON.parse(jsonString);var source=$("#gallery-modal-template").html(),template=Handlebars.compile(source),sourceFull=$("#gallery-photo-items-template").html(),templateFull=Handlebars.compile(sourceFull),galleryTemplate=template(jsonObj);$(".gallery_container").html(galleryTemplate);var photoItems=templateFull(masterJSONArray);$(".photo-container-wrap").html(photoItems);var curIndex=$(this).attr("data-index-id");window.current_slide=curIndex;new Carousel("#carousel").init(),moveToSlide(curIndex)}})}),Handlebars.registerHelper("renderDate",function(date){return moment(date).format("MMMM Do, YYYY")}),function(a,b,c,d){var e=a(b);a.fn.lazyload=function(f){function g(){var b=0;i.each(function(){var c=a(this);if(!j.skip_invisible||c.is(":visible"))if(a.abovethetop(this,j)||a.leftofbegin(this,j));else if(a.belowthefold(this,j)||a.rightoffold(this,j)){if(++b>j.failure_limit)return!1}else c.trigger("appear"),b=0})}var h,i=this,j={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:b,data_attribute:"original",skip_invisible:!0,appear:null,load:null,placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC"};return f&&(d!==f.failurelimit&&(f.failure_limit=f.failurelimit,delete f.failurelimit),d!==f.effectspeed&&(f.effect_speed=f.effectspeed,delete f.effectspeed),a.extend(j,f)),h=j.container===d||j.container===b?e:a(j.container),0===j.event.indexOf("scroll")&&h.bind(j.event,function(){return g()}),this.each(function(){var b=this,c=a(b);b.loaded=!1,(c.attr("src")===d||!1===c.attr("src"))&&c.is("img")&&c.attr("src",j.placeholder),c.one("appear",function(){if(!this.loaded){if(j.appear){var d=i.length;j.appear.call(b,d,j)}a("<img />").bind("load",function(){var d=c.attr("data-"+j.data_attribute);c.hide(),c.is("img")?c.attr("src",d):c.css("background-image","url('"+d+"')"),c[j.effect](j.effect_speed),b.loaded=!0;var e=a.grep(i,function(a){return!a.loaded});if(i=a(e),j.load){var f=i.length;j.load.call(b,f,j)}}).attr("src",c.attr("data-"+j.data_attribute))}}),0!==j.event.indexOf("scroll")&&c.bind(j.event,function(){b.loaded||c.trigger("appear")})}),e.bind("resize",function(){g()}),/(?:iphone|ipod|ipad).*os 5/gi.test(navigator.appVersion)&&e.bind("pageshow",function(b){b.originalEvent&&b.originalEvent.persisted&&i.each(function(){a(this).trigger("appear")})}),a(c).ready(function(){g()}),this},a.belowthefold=function(c,f){return(f.container===d||f.container===b?(b.innerHeight?b.innerHeight:e.height())+e.scrollTop():a(f.container).offset().top+a(f.container).height())<=a(c).offset().top-f.threshold},a.rightoffold=function(c,f){return(f.container===d||f.container===b?e.width()+e.scrollLeft():a(f.container).offset().left+a(f.container).width())<=a(c).offset().left-f.threshold},a.abovethetop=function(c,f){return(f.container===d||f.container===b?e.scrollTop():a(f.container).offset().top)>=a(c).offset().top+f.threshold+a(c).height()},a.leftofbegin=function(c,f){return(f.container===d||f.container===b?e.scrollLeft():a(f.container).offset().left)>=a(c).offset().left+f.threshold+a(c).width()},a.inviewport=function(b,c){return!(a.rightoffold(b,c)||a.leftofbegin(b,c)||a.belowthefold(b,c)||a.abovethetop(b,c))},a.extend(a.expr[":"],{"below-the-fold":function(b){return a.belowthefold(b,{threshold:0})},"above-the-top":function(b){return!a.belowthefold(b,{threshold:0})},"right-of-screen":function(b){return a.rightoffold(b,{threshold:0})},"left-of-screen":function(b){return!a.rightoffold(b,{threshold:0})},"in-viewport":function(b){return a.inviewport(b,{threshold:0})},"above-the-fold":function(b){return!a.belowthefold(b,{threshold:0})},"right-of-fold":function(b){return a.rightoffold(b,{threshold:0})},"left-of-fold":function(b){return!a.rightoffold(b,{threshold:0})}})}(jQuery,window,document);