!function(){function t(t,e){var i;t||(t={});for(i in e)t[i]=e[i];return t}function e(){var t,e=arguments.length,i={},n=function(t,e){var i,s;for(s in e)e.hasOwnProperty(s)&&(i=e[s],"object"!=typeof t&&(t={}),t[s]=i&&"object"==typeof i&&"[object Array]"!==Object.prototype.toString.call(i)&&"number"!=typeof i.nodeType?n(t[s]||{},i):e[s]);return t};for(t=0;e>t;t++)i=n(i,arguments[t]);return i}function i(){for(var t=0,e=arguments,i=e.length,n={};i>t;t++)n[e[t++]]=e[t];return n}function n(t,e){return parseInt(t,e||10)}function s(t){return"string"==typeof t}function o(t){return"object"==typeof t}function r(t){return"[object Array]"===Object.prototype.toString.call(t)}function a(t){return"number"==typeof t}function l(t){return ge.log(t)/ge.LN10}function c(t){return ge.pow(10,t)}function h(t,e){for(var i=t.length;i--;)if(t[i]===e){t.splice(i,1);break}}function d(t){return t!==V&&null!==t}function u(t,e,i){var n,r,a="setAttribute";if(s(e))d(i)?t[a](e,i):t&&t.getAttribute&&(r=t.getAttribute(e));else if(d(e)&&o(e))for(n in e)t[a](n,e[n]);return r}function p(t){return r(t)?t:[t]}function f(){var t,e,i=arguments,n=i.length;for(t=0;n>t;t++)if(e=i[t],"undefined"!=typeof e&&null!==e)return e}function g(e,i){Pe&&i&&i.opacity!==V&&(i.filter="alpha(opacity="+100*i.opacity+")"),t(e.style,i)}function m(e,i,n,s,o){var r=pe.createElement(e);return i&&t(r,i),o&&g(r,{padding:0,border:Ke,margin:0}),n&&g(r,n),s&&s.appendChild(r),r}function v(e,i){var n=function(){};return n.prototype=new e,t(n.prototype,i),n}function _(t,e,i,s){var o=$.lang,r=t,a=-1===e?((r||0).toString().split(".")[1]||"").length:isNaN(e=be(e))?2:e,l=void 0===i?o.decimalPoint:i,c=void 0===s?o.thousandsSep:s,h=0>r?"-":"",d=String(n(r=be(+r||0).toFixed(a))),u=d.length>3?d.length%3:0;return h+(u?d.substr(0,u)+c:"")+d.substr(u).replace(/(\d{3})(?=\d)/g,"$1"+c)+(a?l+be(r-d).toFixed(a).slice(2):"")}function y(t,e){return new Array((e||2)+1-String(t).length).join(0)+t}function x(t,e,i){var n=t[e];t[e]=function(){var t=Array.prototype.slice.call(arguments);return t.unshift(n),i.apply(this,t)}}function b(t,e){var i,n=/f$/,s=/\.([0-9])/,o=$.lang;return n.test(t)?(i=t.match(s),i=i?i[1]:-1,e=_(e,i,o.decimalPoint,t.indexOf(",")>-1?o.thousandsSep:"")):e=K(t,e),e}function w(t,e){for(var i,n,s,o,r,a,l,c="{",h=!1,d=[];-1!==(l=t.indexOf(c));){if(i=t.slice(0,l),h){for(n=i.split(":"),s=n.shift().split("."),r=s.length,a=e,o=0;r>o;o++)a=a[s[o]];n.length&&(a=b(n.join(":"),a)),d.push(a)}else d.push(i);t=t.slice(l+1),h=!h,c=h?"}":"{"}return d.push(t),d.join("")}function k(t,e,i,n){var s,o;for(i=f(i,1),s=t/i,e||(e=[1,2,2.5,5,10],n&&n.allowDecimals===!1&&(1===i?e=[1,2,5,10]:.1>=i&&(e=[1/i]))),o=0;o<e.length&&(t=e[o],!(s<=(e[o]+(e[o+1]||e[o]))/2));o++);return t*=i}function M(t,e){var i,n,s=e||[[si,[1,2,5,10,20,25,50,100,200,500]],[oi,[1,2,5,10,15,30]],[ri,[1,2,5,10,15,30]],[ai,[1,2,3,4,6,8,12]],[li,[1,2]],[ci,[1,2]],[hi,[1,2,3,4,6]],[di,null]],o=s[s.length-1],r=te[o[0]],a=o[1];for(n=0;n<s.length;n++)if(o=s[n],r=te[o[0]],a=o[1],s[n+1]){var l=(r*a[a.length-1]+te[s[n+1][0]])/2;if(l>=t)break}return r===te[di]&&5*r>t&&(a=[1,2,5]),r===te[di]&&5*r>t&&(a=[1,2,5]),i=k(t/r,a),{unitRange:r,count:i,unitName:o[0]}}function T(e,i,n,s){var o,r,a=[],l={},c=$.global.useUTC,h=new Date(i),u=e.unitRange,p=e.count;if(d(i)){u>=te[oi]&&(h.setMilliseconds(0),h.setSeconds(u>=te[ri]?0:p*ve(h.getSeconds()/p))),u>=te[ri]&&h[le](u>=te[ai]?0:p*ve(h[ie]()/p)),u>=te[ai]&&h[ce](u>=te[li]?0:p*ve(h[ne]()/p)),u>=te[li]&&h[he](u>=te[hi]?1:p*ve(h[oe]()/p)),u>=te[hi]&&(h[de](u>=te[di]?0:p*ve(h[re]()/p)),r=h[ae]()),u>=te[di]&&(r-=r%p,h[ue](r)),u===te[ci]&&h[he](h[oe]()-h[se]()+f(s,1)),o=1,r=h[ae]();for(var g=h.getTime(),m=h[re](),v=h[oe](),_=c?0:(864e5+60*h.getTimezoneOffset()*1e3)%864e5;n>g;)a.push(g),u===te[di]?g=ee(r+o*p,0):u===te[hi]?g=ee(r,m+o*p):c||u!==te[li]&&u!==te[ci]?g+=u*p:g=ee(r,m,v+o*p*(u===te[li]?1:7)),o++;a.push(g),yi(xi(a,function(t){return u<=te[ai]&&t%te[li]===_}),function(t){l[t]=li})}return a.info=t(e,{higherRanks:l,totalRange:u*p}),a}function C(){this.color=0,this.symbol=0}function S(t,e){var i,n,s=t.length;for(n=0;s>n;n++)t[n].ss_i=n;for(t.sort(function(t,n){return i=e(t,n),0===i?t.ss_i-n.ss_i:i}),n=0;s>n;n++)delete t[n].ss_i}function P(t){for(var e=t.length,i=t[0];e--;)t[e]<i&&(i=t[e]);return i}function D(t){for(var e=t.length,i=t[0];e--;)t[e]>i&&(i=t[e]);return i}function A(t,e){var i;for(i in t)t[i]&&t[i]!==e&&t[i].destroy&&t[i].destroy(),delete t[i]}function L(t){Z||(Z=m(Xe)),t&&Z.appendChild(t),Z.innerHTML=""}function I(t,e){var i="Highcharts error #"+t+": www.highcharts.com/errors/"+t;if(e)throw i;fe.console&&console.log(i)}function O(t){return parseFloat(t.toPrecision(14))}function z(t,e){J=f(t,e.animation)}function Y(){var t=$.global.useUTC,e=t?"getUTC":"get",i=t?"setUTC":"set";ee=t?Date.UTC:function(t,e,i,n,s,o){return new Date(t,e,f(i,1),f(n,0),f(s,0),f(o,0)).getTime()},ie=e+"Minutes",ne=e+"Hours",se=e+"Day",oe=e+"Date",re=e+"Month",ae=e+"FullYear",le=i+"Minutes",ce=i+"Hours",he=i+"Date",de=i+"Month",ue=i+"FullYear"}function R(t){return $=e($,t),Y(),$}function H(){return $}function E(){}function B(t,e,i,n){this.axis=t,this.pos=e,this.type=i||"",this.isNew=!0,i||n||this.addLabel()}function F(t,e){this.axis=t,e&&(this.options=e,this.id=e.id)}function N(t,e,i,n,s,o){var r=t.chart.inverted;this.axis=t,this.isNegative=i,this.options=e,this.x=n,this.stack=s,this.percent="percent"===o,this.alignOptions={align:e.align||(r?i?"left":"right":"center"),verticalAlign:e.verticalAlign||(r?"middle":i?"bottom":"top"),y:f(e.y,r?4:i?14:-6),x:f(e.x,r?i?-6:6:0)},this.textAlign=e.textAlign||(r?i?"right":"left":"center")}function W(){this.init.apply(this,arguments)}function G(){this.init.apply(this,arguments)}function X(t,e){this.init(t,e)}function j(t,e){this.init(t,e)}function U(){this.init.apply(this,arguments)}var V,q,Z,$,K,J,Q,te,ee,ie,ne,se,oe,re,ae,le,ce,he,de,ue,pe=document,fe=window,ge=Math,me=ge.round,ve=ge.floor,_e=ge.ceil,ye=ge.max,xe=ge.min,be=ge.abs,we=ge.cos,ke=ge.sin,Me=ge.PI,Te=2*Me/360,Ce=navigator.userAgent,Se=fe.opera,Pe=/msie/i.test(Ce)&&!Se,De=8===pe.documentMode,Ae=/AppleWebKit/.test(Ce),Le=/Firefox/.test(Ce),Ie=/(Mobile|Android|Windows Phone)/.test(Ce),Oe="http://www.w3.org/2000/svg",ze=!!pe.createElementNS&&!!pe.createElementNS(Oe,"svg").createSVGRect,Ye=Le&&parseInt(Ce.split("Firefox/")[1],10)<4,Re=!ze&&!Pe&&!!pe.createElement("canvas").getContext,He=pe.documentElement.ontouchstart!==V,Ee={},Be=0,Fe=function(){},Ne=[],We="Highcharts",Ge="3.0.2",Xe="div",je="absolute",Ue="relative",Ve="hidden",qe="highcharts-",Ze="visible",$e="px",Ke="none",Je="M",Qe="L",ti="rgba(192,192,192,"+(ze?1e-4:.002)+")",ei="",ii="hover",ni="select",si="millisecond",oi="second",ri="minute",ai="hour",li="day",ci="week",hi="month",di="year",ui="stroke-width",pi={};fe.Highcharts=fe.Highcharts?I(16,!0):{},K=function(e,i,n){if(!d(i)||isNaN(i))return"Invalid date";e=f(e,"%Y-%m-%d %H:%M:%S");var s,o=new Date(i),r=o[ne](),a=o[se](),l=o[oe](),c=o[re](),h=o[ae](),u=$.lang,p=u.weekdays,g=t({a:p[a].substr(0,3),A:p[a],d:y(l),e:l,b:u.shortMonths[c],B:u.months[c],m:y(c+1),y:h.toString().substr(2,2),Y:h,H:y(r),I:y(r%12||12),l:r%12||12,M:y(o[ie]()),p:12>r?"AM":"PM",P:12>r?"am":"pm",S:y(o.getSeconds()),L:y(me(i%1e3),3)},Highcharts.dateFormats);for(s in g)for(;-1!==e.indexOf("%"+s);)e=e.replace("%"+s,"function"==typeof g[s]?g[s](i):g[s]);return n?e.substr(0,1).toUpperCase()+e.substr(1):e},C.prototype={wrapColor:function(t){this.color>=t&&(this.color=0)},wrapSymbol:function(t){this.symbol>=t&&(this.symbol=0)}},te=i(si,1,oi,1e3,ri,6e4,ai,36e5,li,864e5,ci,6048e5,hi,26784e5,di,31556952e3),Q={init:function(t,e,i){e=e||"";var n,s,o,r,a,l=t.shift,c=e.indexOf("C")>-1,h=c?7:3,d=e.split(" "),u=[].concat(i),p=function(t){for(o=t.length;o--;)t[o]===Je&&t.splice(o+1,0,t[o+1],t[o+2],t[o+1],t[o+2])};if(c&&(p(d),p(u)),t.isArea&&(r=d.splice(d.length-6,6),a=u.splice(u.length-6,6)),l<=u.length/h)for(;l--;)u=[].concat(u).splice(0,h).concat(u);if(t.shift=0,d.length)for(n=u.length;d.length<n;)s=[].concat(d).splice(d.length-h,h),c&&(s[h-6]=s[h-2],s[h-5]=s[h-1]),d=d.concat(s);return r&&(d=d.concat(r),u=u.concat(a)),[d,u]},step:function(t,e,i,n){var s,o=[],r=t.length;if(1===i)o=n;else if(r===e.length&&1>i)for(;r--;)s=parseFloat(t[r]),o[r]=isNaN(s)?t[r]:i*parseFloat(e[r]-s)+s;else o=e;return o}},function(e){fe.HighchartsAdapter=fe.HighchartsAdapter||e&&{init:function(t){var i,n=e.fx,o=n.step,r=e.Tween,a=r&&r.propHooks,l=e.cssHooks.opacity;e.extend(e.easing,{easeOutQuad:function(t,e,i,n,s){return-n*(e/=s)*(e-2)+i}}),e.each(["cur","_default","width","height","opacity"],function(t,e){var i,s,l=o;"cur"===e?l=n.prototype:"_default"===e&&r&&(l=a[e],e="set"),i=l[e],i&&(l[e]=function(n){return n=t?n:this,s=n.elem,s.attr?s.attr(n.prop,"cur"===e?V:n.now):i.apply(this,arguments)})}),x(l,"get",function(t,e,i){return e.attr?e.opacity||0:t.call(this,e,i)}),i=function(e){var i,n=e.elem;e.started||(i=t.init(n,n.d,n.toD),e.start=i[0],e.end=i[1],e.started=!0),n.attr("d",t.step(e.start,e.end,e.pos,n.toD))},r?a.d={set:i}:o.d=i,this.each=Array.prototype.forEach?function(t,e){return Array.prototype.forEach.call(t,e)}:function(t,e){for(var i=0,n=t.length;n>i;i++)if(e.call(t[i],t[i],i,t)===!1)return i},e.fn.highcharts=function(){var t,e,i,n="Chart",o=arguments;return s(o[0])&&(n=o[0],o=Array.prototype.slice.call(o,1)),t=o[0],t!==V&&(t.chart=t.chart||{},t.chart.renderTo=this[0],i=new Highcharts[n](t,o[1]),e=this),t===V&&(e=Ne[u(this[0],"data-highcharts-chart")]),e}},getScript:e.getScript,inArray:e.inArray,adapterRun:function(t,i){return e(t)[i]()},grep:e.grep,map:function(t,e){for(var i=[],n=0,s=t.length;s>n;n++)i[n]=e.call(t[n],t[n],n,t);return i},offset:function(t){return e(t).offset()},addEvent:function(t,i,n){e(t).bind(i,n)},removeEvent:function(t,i,n){var s=pe.removeEventListener?"removeEventListener":"detachEvent";pe[s]&&t&&!t[s]&&(t[s]=function(){}),e(t).unbind(i,n)},fireEvent:function(i,n,s,o){var r,a=e.Event(n),l="detached"+n;!Pe&&s&&(delete s.layerX,delete s.layerY),t(a,s),i[n]&&(i[l]=i[n],i[n]=null),e.each(["preventDefault","stopPropagation"],function(t,e){var i=a[e];a[e]=function(){try{i.call(a)}catch(t){"preventDefault"===e&&(r=!0)}}}),e(i).trigger(a),i[l]&&(i[n]=i[l],i[l]=null),!o||a.isDefaultPrevented()||r||o(a)},washMouseEvent:function(t){var e=t.originalEvent||t;return e.pageX===V&&(e.pageX=t.pageX,e.pageY=t.pageY),e},animate:function(t,i,n){var s=e(t);t.style||(t.style={}),i.d&&(t.toD=i.d,i.d=1),s.stop(),s.animate(i,n)},stop:function(t){e(t).stop()}}}(fe.jQuery);var fi=fe.HighchartsAdapter,gi=fi||{};fi&&fi.init.call(fi,Q);var mi=gi.adapterRun,vi=gi.getScript,_i=gi.inArray,yi=gi.each,xi=gi.grep,bi=gi.offset,wi=gi.map,ki=gi.addEvent,Mi=gi.removeEvent,Ti=gi.fireEvent,Ci=gi.washMouseEvent,Si=gi.animate,Pi=gi.stop,Di={enabled:!0,align:"center",x:0,y:15,style:{color:"#666",cursor:"default",fontSize:"11px",lineHeight:"14px"}};$={colors:["#2f7ed8","#0d233a","#8bbc21","#910000","#1aadce","#492970","#f28f43","#77a1e5","#c42525","#a6c96a"],symbols:["circle","diamond","square","triangle","triangle-down"],lang:{loading:"Loading...",months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],decimalPoint:".",numericSymbols:["k","M","G","T","P","E"],resetZoom:"Reset zoom",resetZoomTitle:"Reset zoom level 1:1",thousandsSep:","},global:{useUTC:!0,canvasToolsURL:"http://code.highcharts.com/3.0.2/modules/canvas-tools.js",VMLRadialGradientURL:"http://code.highcharts.com/3.0.2/gfx/vml-radial-gradient.png"},chart:{borderColor:"#4572A7",borderRadius:5,defaultSeriesType:"line",ignoreHiddenSeries:!0,spacingTop:10,spacingRight:10,spacingBottom:15,spacingLeft:10,style:{fontFamily:'"Lucida Grande", "Lucida Sans Unicode", Verdana, Arial, Helvetica, sans-serif',fontSize:"12px"},backgroundColor:"#FFFFFF",plotBorderColor:"#C0C0C0",resetZoomButton:{theme:{zIndex:20},position:{align:"right",x:-10,y:10}}},title:{text:"Chart title",align:"center",y:15,style:{color:"#274b6d",fontSize:"16px"}},subtitle:{text:"",align:"center",y:30,style:{color:"#4d759e"}},plotOptions:{line:{allowPointSelect:!1,showCheckbox:!1,animation:{duration:1e3},events:{},lineWidth:2,marker:{enabled:!0,lineWidth:0,radius:4,lineColor:"#FFFFFF",states:{hover:{enabled:!0},select:{fillColor:"#FFFFFF",lineColor:"#000000",lineWidth:2}}},point:{events:{}},dataLabels:e(Di,{enabled:!1,formatter:function(){return _(this.y,-1)},verticalAlign:"bottom",y:0}),cropThreshold:300,pointRange:0,showInLegend:!0,states:{hover:{marker:{}},select:{marker:{}}},stickyTracking:!0}},labels:{style:{position:je,color:"#3E576F"}},legend:{enabled:!0,align:"center",layout:"horizontal",labelFormatter:function(){return this.name},borderWidth:1,borderColor:"#909090",borderRadius:5,navigation:{activeColor:"#274b6d",inactiveColor:"#CCC"},shadow:!1,itemStyle:{cursor:"pointer",color:"#274b6d",fontSize:"12px"},itemHoverStyle:{color:"#000"},itemHiddenStyle:{color:"#CCC"},itemCheckboxStyle:{position:je,width:"13px",height:"13px"},symbolWidth:16,symbolPadding:5,verticalAlign:"bottom",x:0,y:0,title:{style:{fontWeight:"bold"}}},loading:{labelStyle:{fontWeight:"bold",position:Ue,top:"1em"},style:{position:je,backgroundColor:"white",opacity:.5,textAlign:"center"}},tooltip:{enabled:!0,animation:ze,backgroundColor:"rgba(255, 255, 255, .85)",borderWidth:1,borderRadius:3,dateTimeLabelFormats:{millisecond:"%A, %b %e, %H:%M:%S.%L",second:"%A, %b %e, %H:%M:%S",minute:"%A, %b %e, %H:%M",hour:"%A, %b %e, %H:%M",day:"%A, %b %e, %Y",week:"Week from %A, %b %e, %Y",month:"%B %Y",year:"%Y"},headerFormat:'<span style="font-size: 10px">{point.key}</span><br/>',pointFormat:'<span style="color:{series.color}">{series.name}</span>: <b>{point.y}</b><br/>',shadow:!0,snap:Ie?25:10,style:{color:"#333333",cursor:"default",fontSize:"12px",padding:"8px",whiteSpace:"nowrap"}},credits:{enabled:!0,text:"Highcharts.com",href:"http://www.highcharts.com",position:{align:"right",x:-10,verticalAlign:"bottom",y:-5},style:{cursor:"pointer",color:"#909090",fontSize:"9px"}}};var Ai=$.plotOptions,Li=Ai.line;Y();var Ii=function(t){function i(t){t&&t.stops?c=wi(t.stops,function(t){return Ii(t[1])}):(l=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]?(?:\.[0-9]+)?)\s*\)/.exec(t),l?h=[n(l[1]),n(l[2]),n(l[3]),parseFloat(l[4],10)]:(l=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(t),l?h=[n(l[1],16),n(l[2],16),n(l[3],16),1]:(l=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(t),l&&(h=[n(l[1]),n(l[2]),n(l[3]),1]))))}function s(i){var n;return c?(n=e(t),n.stops=[].concat(n.stops),yi(c,function(t,e){n.stops[e]=[n.stops[e][0],t.get(i)]})):n=h&&!isNaN(h[0])?"rgb"===i?"rgb("+h[0]+","+h[1]+","+h[2]+")":"a"===i?h[3]:"rgba("+h.join(",")+")":t,n}function o(t){if(c)yi(c,function(e){e.brighten(t)});else if(a(t)&&0!==t){var e;for(e=0;3>e;e++)h[e]+=n(255*t),h[e]<0&&(h[e]=0),h[e]>255&&(h[e]=255)}return this}function r(t){return h[3]=t,this}var l,c,h=[];return i(t),{get:s,brighten:o,rgba:h,setOpacity:r}};E.prototype={init:function(t,e){var i=this;i.element="span"===e?m(e):pe.createElementNS(Oe,e),i.renderer=t,i.attrSetters={}},opacity:1,animate:function(t,i,n){var s=f(i,J,!0);Pi(this),s?(s=e(s),n&&(s.complete=n),Si(this,t,s)):(this.attr(t),n&&n())},attr:function(t,e){var i,o,r,a,l,c,h,p,f,g=this,m=g.element,v=m.nodeName.toLowerCase(),_=g.renderer,y=g.attrSetters,x=g.shadows,b=g;if(s(t)&&d(e)&&(i=t,t={},t[i]=e),s(t))i=t,"circle"===v?i={x:"cx",y:"cy"}[i]||i:"strokeWidth"===i&&(i="stroke-width"),b=u(m,i)||g[i]||0,"d"!==i&&"visibility"!==i&&(b=parseFloat(b));else{for(i in t)if(c=!1,o=t[i],r=y[i]&&y[i].call(g,o,i),r!==!1){if(r!==V&&(o=r),"d"===i)o&&o.join&&(o=o.join(" ")),/(NaN| {2}|^$)/.test(o)&&(o="M 0 0");else if("x"===i&&"text"===v)for(a=0;a<m.childNodes.length;a++)l=m.childNodes[a],u(l,"x")===u(m,"x")&&u(l,"x",o);else if(!g.rotation||"x"!==i&&"y"!==i)if("fill"===i)o=_.color(o,m,i);else if("circle"!==v||"x"!==i&&"y"!==i)if("rect"===v&&"r"===i)u(m,{rx:o,ry:o}),c=!0;else if("translateX"===i||"translateY"===i||"rotation"===i||"verticalAlign"===i||"scaleX"===i||"scaleY"===i)f=!0,c=!0;else if("stroke"===i)o=_.color(o,m,i);else if("dashstyle"===i){if(i="stroke-dasharray",o=o&&o.toLowerCase(),"solid"===o)o=Ke;else if(o){for(o=o.replace("shortdashdotdot","3,1,1,1,1,1,").replace("shortdashdot","3,1,1,1").replace("shortdot","1,1,").replace("shortdash","3,1,").replace("longdash","8,3,").replace(/dot/g,"1,3,").replace("dash","4,3,").replace(/,$/,"").split(","),a=o.length;a--;)o[a]=n(o[a])*t["stroke-width"];o=o.join(",")}}else"width"===i?o=n(o):"align"===i?(i="text-anchor",o={left:"start",center:"middle",right:"end"}[o]):"title"===i&&(h=m.getElementsByTagName("title")[0],h||(h=pe.createElementNS(Oe,"title"),m.appendChild(h)),h.textContent=o);else i={x:"cx",y:"cy"}[i]||i;else f=!0;if("strokeWidth"===i&&(i="stroke-width"),("stroke-width"===i||"stroke"===i)&&(g[i]=o,g.stroke&&g["stroke-width"]?(u(m,"stroke",g.stroke),u(m,"stroke-width",g["stroke-width"]),g.hasStroke=!0):"stroke-width"===i&&0===o&&g.hasStroke&&(m.removeAttribute("stroke"),g.hasStroke=!1),c=!0),g.symbolName&&/^(x|y|width|height|r|start|end|innerR|anchorX|anchorY)/.test(i)&&(p||(g.symbolAttr(t),p=!0),c=!0),x&&/^(width|height|visibility|x|y|d|transform)$/.test(i))for(a=x.length;a--;)u(x[a],i,"height"===i?ye(o-(x[a].cutHeight||0),0):o);("width"===i||"height"===i)&&"rect"===v&&0>o&&(o=0),g[i]=o,"text"===i?(o!==g.textStr&&delete g.bBox,g.textStr=o,g.added&&_.buildText(g)):c||u(m,i,o)}f&&g.updateTransform()}return b},addClass:function(t){return u(this.element,"class",u(this.element,"class")+" "+t),this},symbolAttr:function(t){var e=this;yi(["x","y","r","start","end","width","height","innerR","anchorX","anchorY"],function(i){e[i]=f(t[i],e[i])}),e.attr({d:e.renderer.symbols[e.symbolName](e.x,e.y,e.width,e.height,e)})},clip:function(t){return this.attr("clip-path",t?"url("+this.renderer.url+"#"+t.id+")":Ke)},crisp:function(t,e,i,n,s){var o,r,a=this,l={},c={};t=t||a.strokeWidth||a.attr&&a.attr("stroke-width")||0,r=me(t)%2/2,c.x=ve(e||a.x||0)+r,c.y=ve(i||a.y||0)+r,c.width=ve((n||a.width||0)-2*r),c.height=ve((s||a.height||0)-2*r),c.strokeWidth=t;for(o in c)a[o]!==c[o]&&(a[o]=l[o]=c[o]);return l},css:function(e){var i,n=this,s=n.element,o=e&&e.width&&"text"===s.nodeName.toLowerCase(),r="",a=function(t,e){return"-"+e.toLowerCase()};if(e&&e.color&&(e.fill=e.color),e=t(n.styles,e),n.styles=e,Re&&o&&delete e.width,Pe&&!ze)o&&delete e.width,g(n.element,e);else{for(i in e)r+=i.replace(/([A-Z])/g,a)+":"+e[i]+";";u(s,"style",r)}return o&&n.added&&n.renderer.buildText(n),n},on:function(t,e){return He&&"click"===t&&(this.element.ontouchstart=function(t){t.preventDefault(),e()}),this.element["on"+t]=e,this},setRadialReference:function(t){return this.element.radialReference=t,this},translate:function(t,e){return this.attr({translateX:t,translateY:e})},invert:function(){var t=this;return t.inverted=!0,t.updateTransform(),t},htmlCss:function(e){var i=this,n=i.element,s=e&&"SPAN"===n.tagName&&e.width;return s&&(delete e.width,i.textWidth=s,i.updateTransform()),i.styles=t(i.styles,e),g(i.element,e),i},htmlGetBBox:function(){var t=this,e=t.element,i=t.bBox;return i||("text"===e.nodeName&&(e.style.position=je),i=t.bBox={x:e.offsetLeft,y:e.offsetTop,width:e.offsetWidth,height:e.offsetHeight}),i},htmlUpdateTransform:function(){if(!this.added)return void(this.alignOnAdd=!0);var t=this,e=t.renderer,i=t.element,s=t.translateX||0,o=t.translateY||0,r=t.x||0,a=t.y||0,l=t.textAlign||"left",c={left:0,center:.5,right:1}[l],h=l&&"left"!==l,u=t.shadows;if(g(i,{marginLeft:s,marginTop:o}),u&&yi(u,function(t){g(t,{marginLeft:s+1,marginTop:o+1})}),t.inverted&&yi(i.childNodes,function(t){e.invertChild(t,i)}),"SPAN"===i.tagName){var p,m,v,_,y,x=t.rotation,b=0,w=1,k=0,M=n(t.textWidth),T=t.xCorr||0,C=t.yCorr||0,S=[x,l,i.innerHTML,t.textWidth].join(","),P={};S!==t.cTT&&(d(x)&&(e.isSVG?(y=Pe?"-ms-transform":Ae?"-webkit-transform":Le?"MozTransform":Se?"-o-transform":"",P[y]=P.transform="rotate("+x+"deg)"):(b=x*Te,w=we(b),k=ke(b),P.filter=x?["progid:DXImageTransform.Microsoft.Matrix(M11=",w,", M12=",-k,", M21=",k,", M22=",w,", sizingMethod='auto expand')"].join(""):Ke),g(i,P)),p=f(t.elemWidth,i.offsetWidth),m=f(t.elemHeight,i.offsetHeight),p>M&&/[ \-]/.test(i.textContent||i.innerText)&&(g(i,{width:M+$e,display:"block",whiteSpace:"normal"}),p=M),v=e.fontMetrics(i.style.fontSize).b,T=0>w&&-p,C=0>k&&-m,_=0>w*k,T+=k*v*(_?1-c:c),C-=w*v*(x?_?c:1-c:1),h&&(T-=p*c*(0>w?-1:1),x&&(C-=m*c*(0>k?-1:1)),g(i,{textAlign:l})),t.xCorr=T,t.yCorr=C),g(i,{left:r+T+$e,top:a+C+$e}),Ae&&(m=i.offsetHeight),t.cTT=S}},updateTransform:function(){var t,e=this,i=e.translateX||0,n=e.translateY||0,s=e.scaleX,o=e.scaleY,r=e.inverted,a=e.rotation;r&&(i+=e.attr("width"),n+=e.attr("height")),t=["translate("+i+","+n+")"],r?t.push("rotate(90) scale(-1,1)"):a&&t.push("rotate("+a+" "+(e.x||0)+" "+(e.y||0)+")"),(d(s)||d(o))&&t.push("scale("+f(s,1)+" "+f(o,1)+")"),t.length&&u(e.element,"transform",t.join(" "))},toFront:function(){var t=this.element;return t.parentNode.appendChild(t),this},align:function(t,e,i){var n,o,r,a,l,c={},d=this.renderer,u=d.alignedObjects;return t?(this.alignOptions=t,this.alignByTranslate=e,(!i||s(i))&&(this.alignTo=l=i||"renderer",h(u,this),u.push(this),i=null)):(t=this.alignOptions,e=this.alignByTranslate,l=this.alignTo),i=f(i,d[l],d),n=t.align,o=t.verticalAlign,r=(i.x||0)+(t.x||0),a=(i.y||0)+(t.y||0),("right"===n||"center"===n)&&(r+=(i.width-(t.width||0))/{right:1,center:2}[n]),c[e?"translateX":"x"]=me(r),("bottom"===o||"middle"===o)&&(a+=(i.height-(t.height||0))/({bottom:1,middle:2}[o]||1)),c[e?"translateY":"y"]=me(a),this[this.placed?"animate":"attr"](c),this.placed=!0,this.alignAttr=c,this},getBBox:function(){var e,i,n=this,s=n.bBox,o=n.renderer,r=n.rotation,a=n.element,l=n.styles,c=r*Te;if(!s){if(a.namespaceURI===Oe||o.forExport){try{s=a.getBBox?t({},a.getBBox()):{width:a.offsetWidth,height:a.offsetHeight}}catch(h){}(!s||s.width<0)&&(s={width:0,height:0})}else s=n.htmlGetBBox();o.isSVG&&(e=s.width,i=s.height,Pe&&l&&"11px"===l.fontSize&&"22.7"===i.toPrecision(3)&&(s.height=i=14),r&&(s.width=be(i*ke(c))+be(e*we(c)),s.height=be(i*we(c))+be(e*ke(c)))),n.bBox=s}return s},show:function(){return this.attr({visibility:Ze})},hide:function(){return this.attr({visibility:Ve})},fadeOut:function(t){var e=this;e.animate({opacity:0},{duration:t||150,complete:function(){e.hide()}})},add:function(t){var e,i,s,o,r=this.renderer,a=t||r,l=a.element||r.box,c=l.childNodes,h=this.element,p=u(h,"zIndex");if(t&&(this.parentGroup=t),this.parentInverted=t&&t.inverted,void 0!==this.textStr&&r.buildText(this),p&&(a.handleZ=!0,p=n(p)),a.handleZ)for(s=0;s<c.length;s++)if(e=c[s],i=u(e,"zIndex"),e!==h&&(n(i)>p||!d(p)&&d(i))){l.insertBefore(h,e),o=!0;break}return o||l.appendChild(h),this.added=!0,Ti(this,"add"),this},safeRemoveChild:function(t){var e=t.parentNode;e&&e.removeChild(t)},destroy:function(){var t,e,i=this,n=i.element||{},s=i.shadows;if(n.onclick=n.onmouseout=n.onmouseover=n.onmousemove=n.point=null,Pi(i),i.clipPath&&(i.clipPath=i.clipPath.destroy()),i.stops){for(e=0;e<i.stops.length;e++)i.stops[e]=i.stops[e].destroy();i.stops=null}i.safeRemoveChild(n),s&&yi(s,function(t){i.safeRemoveChild(t)}),i.alignTo&&h(i.renderer.alignedObjects,i);for(t in i)delete i[t];return null},shadow:function(t,e,i){var n,s,o,r,a,l,c=[],h=this.element;if(t){for(r=f(t.width,3),a=(t.opacity||.15)/r,l=this.parentInverted?"(-1,-1)":"("+f(t.offsetX,1)+", "+f(t.offsetY,1)+")",n=1;r>=n;n++)s=h.cloneNode(0),o=2*r+1-2*n,u(s,{isShadow:"true",stroke:t.color||"black","stroke-opacity":a*n,"stroke-width":o,transform:"translate"+l,fill:Ke}),i&&(u(s,"height",ye(u(s,"height")-o,0)),s.cutHeight=o),e?e.element.appendChild(s):h.parentNode.insertBefore(s,h),c.push(s);this.shadows=c}return this}};var Oi=function(){this.init.apply(this,arguments)};Oi.prototype={Element:E,init:function(t,e,i,n){var s,o,r=this,a=location;s=r.createElement("svg").attr({xmlns:Oe,version:"1.1"}),t.appendChild(s.element),r.isSVG=!0,r.box=s.element,r.boxWrapper=s,r.alignedObjects=[],r.url=(Le||Ae)&&pe.getElementsByTagName("base").length?a.href.replace(/#.*?$/,"").replace(/([\('\)])/g,"\\$1").replace(/ /g,"%20"):"",o=this.createElement("desc").add(),o.element.appendChild(pe.createTextNode("Created with "+We+" "+Ge)),r.defs=this.createElement("defs").add(),r.forExport=n,r.gradients={},r.setSize(e,i,!1);var l,c;Le&&t.getBoundingClientRect&&(r.subPixelFix=l=function(){g(t,{left:0,top:0}),c=t.getBoundingClientRect(),g(t,{left:_e(c.left)-c.left+$e,top:_e(c.top)-c.top+$e})},l(),ki(fe,"resize",l))},isHidden:function(){return!this.boxWrapper.getBBox().width},destroy:function(){var t=this,e=t.defs;return t.box=null,t.boxWrapper=t.boxWrapper.destroy(),A(t.gradients||{}),t.gradients=null,e&&(t.defs=e.destroy()),t.subPixelFix&&Mi(fe,"resize",t.subPixelFix),t.alignedObjects=null,null},createElement:function(t){var e=new this.Element;return e.init(this,t),e},draw:function(){},buildText:function(t){for(var e=t.element,i=this,s=i.forExport,o=f(t.textStr,"").toString().replace(/<(b|strong)>/g,'<span style="font-weight:bold">').replace(/<(i|em)>/g,'<span style="font-style:italic">').replace(/<a/g,"<span").replace(/<\/(b|strong|i|em|a)>/g,"</span>").split(/<br.*?>/g),r=e.childNodes,a=/style="([^"]+)"/,l=/href="([^"]+)"/,c=u(e,"x"),h=t.styles,d=h&&h.width&&n(h.width),p=h&&h.lineHeight,m=r.length;m--;)e.removeChild(r[m]);d&&!t.added&&this.box.appendChild(e),""===o[o.length-1]&&o.pop(),yi(o,function(n,o){var r,f=0;n=n.replace(/<span/g,"|||<span").replace(/<\/span>/g,"</span>|||"),r=n.split("|||"),yi(r,function(n){if(""!==n||1===r.length){var m,v={},_=pe.createElementNS(Oe,"tspan");if(a.test(n)&&(m=n.match(a)[1].replace(/(;| |^)color([ :])/,"$1fill$2"),u(_,"style",m)),l.test(n)&&!s&&(u(_,"onclick",'location.href="'+n.match(l)[1]+'"'),g(_,{cursor:"pointer"})),n=(n.replace(/<(.|\n)*?>/g,"")||" ").replace(/&lt;/g,"<").replace(/&gt;/g,">"),_.appendChild(pe.createTextNode(n)),f?v.dx=0:v.x=c,u(_,v),!f&&o&&(!ze&&s&&g(_,{display:"block"}),u(_,"dy",p||i.fontMetrics(/px$/.test(_.style.fontSize)?_.style.fontSize:h.fontSize).h,Ae&&_.offsetHeight)),e.appendChild(_),f++,d)for(var y,x,b=n.replace(/([^\^])-/g,"$1- ").split(" "),w=[];b.length||w.length;)delete t.bBox,x=t.getBBox().width,y=x>d,y&&1!==b.length?(_.removeChild(_.firstChild),w.unshift(b.pop())):(b=w,w=[],b.length&&(_=pe.createElementNS(Oe,"tspan"),u(_,{dy:p||16,x:c}),m&&u(_,"style",m),e.appendChild(_),x>d&&(d=x))),b.length&&_.appendChild(pe.createTextNode(b.join(" ").replace(/- /g,"-")))}})})},button:function(i,n,s,o,r,a,l){var c,h,d,u,p,f=this.label(i,n,s,null,null,null,null,null,"button"),g=0,m="style",v={x1:0,y1:0,x2:0,y2:1};return r=e({"stroke-width":1,stroke:"#CCCCCC",fill:{linearGradient:v,stops:[[0,"#FEFEFE"],[1,"#F6F6F6"]]},r:2,padding:5,style:{color:"black"}},r),d=r[m],delete r[m],a=e(r,{stroke:"#68A",fill:{linearGradient:v,stops:[[0,"#FFF"],[1,"#ACF"]]}},a),u=a[m],delete a[m],l=e(r,{stroke:"#68A",fill:{linearGradient:v,stops:[[0,"#9BD"],[1,"#CDF"]]}},l),p=l[m],delete l[m],ki(f.element,"mouseenter",function(){f.attr(a).css(u)}),ki(f.element,"mouseleave",function(){c=[r,a,l][g],h=[d,u,p][g],f.attr(c).css(h)}),f.setState=function(t){g=t,t?2===t&&f.attr(l).css(p):f.attr(r).css(d)},f.on("click",function(){o.call(f)}).attr(r).css(t({cursor:"default"},d))},crispLine:function(t,e){return t[1]===t[4]&&(t[1]=t[4]=me(t[1])-e%2/2),t[2]===t[5]&&(t[2]=t[5]=me(t[2])+e%2/2),t},path:function(e){var i={fill:Ke};return r(e)?i.d=e:o(e)&&t(i,e),this.createElement("path").attr(i)},circle:function(t,e,i){var n=o(t)?t:{x:t,y:e,r:i};return this.createElement("circle").attr(n)},arc:function(t,e,i,n,s,r){return o(t)&&(e=t.y,i=t.r,n=t.innerR,s=t.start,r=t.end,t=t.x),this.symbol("arc",t||0,e||0,i||0,i||0,{innerR:n||0,start:s||0,end:r||0})},rect:function(t,e,i,n,s,r){s=o(t)?t.r:s;var a=this.createElement("rect").attr({rx:s,ry:s,fill:Ke});return a.attr(o(t)?t:a.crisp(r,t,e,ye(i,0),ye(n,0)))},setSize:function(t,e,i){var n=this,s=n.alignedObjects,o=s.length;for(n.width=t,n.height=e,n.boxWrapper[f(i,!0)?"animate":"attr"]({width:t,height:e});o--;)s[o].align()},g:function(t){var e=this.createElement("g");return d(t)?e.attr({"class":qe+t}):e},image:function(e,i,n,s,o){var r,a={preserveAspectRatio:Ke};return arguments.length>1&&t(a,{x:i,y:n,width:s,height:o}),r=this.createElement("image").attr(a),r.element.setAttributeNS?r.element.setAttributeNS("http://www.w3.org/1999/xlink","href",e):r.element.setAttribute("hc-svg-href",e),r},symbol:function(e,i,n,s,o,r){var a,l,c,h,d,u=this.symbols[e],p=u&&u(me(i),me(n),s,o,r),f=/^url\((.*?)\)$/;return p?(a=this.path(p),t(a,{symbolName:e,x:i,y:n,width:s,height:o}),r&&t(a,r)):f.test(e)&&(d=function(t,e){t.element&&(t.attr({width:e[0],height:e[1]}),t.alignByTranslate||t.translate(me((s-e[0])/2),me((o-e[1])/2)))},c=e.match(f)[1],h=Ee[c],a=this.image(c).attr({x:i,y:n}),a.isImg=!0,h?d(a,h):(a.attr({width:0,height:0}),l=m("img",{onload:function(){d(a,Ee[c]=[this.width,this.height])},src:c}))),a},symbols:{circle:function(t,e,i,n){var s=.166*i;return[Je,t+i/2,e,"C",t+i+s,e,t+i+s,e+n,t+i/2,e+n,"C",t-s,e+n,t-s,e,t+i/2,e,"Z"]},square:function(t,e,i,n){return[Je,t,e,Qe,t+i,e,t+i,e+n,t,e+n,"Z"]},triangle:function(t,e,i,n){return[Je,t+i/2,e,Qe,t+i,e+n,t,e+n,"Z"]},"triangle-down":function(t,e,i,n){return[Je,t,e,Qe,t+i,e,t+i/2,e+n,"Z"]},diamond:function(t,e,i,n){return[Je,t+i/2,e,Qe,t+i,e+n/2,t+i/2,e+n,t,e+n/2,"Z"]},arc:function(t,e,i,n,s){var o=s.start,r=s.r||i||n,a=s.end-.001,l=s.innerR,c=s.open,h=we(o),d=ke(o),u=we(a),p=ke(a),f=s.end-o<Me?0:1;return[Je,t+r*h,e+r*d,"A",r,r,0,f,1,t+r*u,e+r*p,c?Je:Qe,t+l*u,e+l*p,"A",l,l,0,f,0,t+l*h,e+l*d,c?"":"Z"]}},clipRect:function(t,e,i,n){var s,o=qe+Be++,r=this.createElement("clipPath").attr({id:o}).add(this.defs);return s=this.rect(t,e,i,n,0).add(r),s.id=o,s.clipPath=r,s},color:function(t,i,n){var s,o,a,l,c,h,p,f,g,m,v,_=this,y=/^rgba/,x=[];if(t&&t.linearGradient?o="linearGradient":t&&t.radialGradient&&(o="radialGradient"),o){a=t[o],l=_.gradients,h=t.stops,g=i.radialReference,r(a)&&(t[o]=a={x1:a[0],y1:a[1],x2:a[2],y2:a[3],gradientUnits:"userSpaceOnUse"}),"radialGradient"===o&&g&&!d(a.gradientUnits)&&(a=e(a,{cx:g[0]-g[2]/2+a.cx*g[2],cy:g[1]-g[2]/2+a.cy*g[2],r:a.r*g[2],gradientUnits:"userSpaceOnUse"}));for(m in a)"id"!==m&&x.push(m,a[m]);for(m in h)x.push(h[m]);return x=x.join(","),l[x]?v=l[x].id:(a.id=v=qe+Be++,l[x]=c=_.createElement(o).attr(a).add(_.defs),c.stops=[],yi(h,function(t){var e;y.test(t[1])?(s=Ii(t[1]),p=s.get("rgb"),f=s.get("a")):(p=t[1],f=1),e=_.createElement("stop").attr({offset:t[0],"stop-color":p,"stop-opacity":f}).add(c),c.stops.push(e)})),"url("+_.url+"#"+v+")"}return y.test(t)?(s=Ii(t),u(i,n+"-opacity",s.get("a")),s.get("rgb")):(i.removeAttribute(n+"-opacity"),t)},text:function(t,e,i,n){var s,o=this,r=$.chart.style,a=Re||!ze&&o.forExport;return n&&!o.forExport?o.html(t,e,i):(e=me(f(e,0)),i=me(f(i,0)),s=o.createElement("text").attr({x:e,y:i,text:t}).css({fontFamily:r.fontFamily,fontSize:r.fontSize}),a&&s.css({position:je}),s.x=e,s.y=i,s)},html:function(e,i,n){var s=$.chart.style,o=this.createElement("span"),r=o.attrSetters,a=o.element,l=o.renderer;return r.text=function(t){return t!==a.innerHTML&&delete this.bBox,a.innerHTML=t,!1},r.x=r.y=r.align=function(t,e){return"align"===e&&(e="textAlign"),o[e]=t,o.htmlUpdateTransform(),!1},o.attr({text:e,x:me(i),y:me(n)}).css({position:je,whiteSpace:"nowrap",fontFamily:s.fontFamily,fontSize:s.fontSize}),o.css=o.htmlCss,l.isSVG&&(o.add=function(e){var i,n,s=l.box.parentNode,r=[];if(e){if(i=e.div,!i){for(n=e;n;)r.push(n),n=n.parentGroup;yi(r.reverse(),function(e){var n;i=e.div=e.div||m(Xe,{className:u(e.element,"class")},{position:je,left:(e.translateX||0)+$e,top:(e.translateY||0)+$e},i||s),n=i.style,t(e.attrSetters,{translateX:function(t){n.left=t+$e},translateY:function(t){n.top=t+$e},visibility:function(t,e){n[e]=t}})})}}else i=s;return i.appendChild(a),o.added=!0,o.alignOnAdd&&o.htmlUpdateTransform(),o
}),o},fontMetrics:function(t){t=n(t||11);var e=24>t?t+4:me(1.2*t),i=me(.8*e);return{h:e,b:i}},label:function(i,n,s,o,r,a,l,c,h){function u(){var t,i,n=C.element.style;v=(void 0===_||void 0===y||T.styles.textAlign)&&C.getBBox(),T.width=(_||v.width||0)+2*P+D,T.height=(y||v.height||0)+2*P,w=P+M.fontMetrics(n&&n.fontSize).b,k&&(m||(t=me(-S*P),i=c?-w:0,T.box=m=o?M.symbol(o,t,i,T.width,T.height):M.rect(t,i,T.width,T.height,0,L[ui]),m.add(T)),m.isImg||m.attr(e({width:T.width,height:T.height},L)),L=null)}function p(){var t,e=T.styles,i=e&&e.textAlign,n=D+P*(1-S);t=c?0:w,!d(_)||"center"!==i&&"right"!==i||(n+={center:.5,right:1}[i]*(_-v.width)),(n!==C.x||t!==C.y)&&C.attr({x:n,y:t}),C.x=n,C.y=t}function f(t,e){m?m.attr(t,e):L[t]=e}function g(){C.add(T),T.attr({text:i,x:n,y:s}),m&&d(r)&&T.attr({anchorX:r,anchorY:a})}var m,v,_,y,x,b,w,k,M=this,T=M.g(h),C=M.text("",0,0,l).attr({zIndex:1}),S=0,P=3,D=0,A=0,L={},I=T.attrSetters;ki(T,"add",g),I.width=function(t){return _=t,!1},I.height=function(t){return y=t,!1},I.padding=function(t){return d(t)&&t!==P&&(P=t,p()),!1},I.paddingLeft=function(t){return d(t)&&t!==D&&(D=t,p()),!1},I.align=function(t){return S={left:0,center:.5,right:1}[t],!1},I.text=function(t,e){return C.attr(e,t),u(),p(),!1},I[ui]=function(t,e){return k=!0,A=t%2/2,f(e,t),!1},I.stroke=I.fill=I.r=function(t,e){return"fill"===e&&(k=!0),f(e,t),!1},I.anchorX=function(t,e){return r=t,f(e,t+A-x),!1},I.anchorY=function(t,e){return a=t,f(e,t-b),!1},I.x=function(t){return T.x=t,t-=S*((_||v.width)+P),x=me(t),T.attr("translateX",x),!1},I.y=function(t){return b=T.y=me(t),T.attr("translateY",b),!1};var O=T.css;return t(T,{css:function(t){if(t){var i={};t=e(t),yi(["fontSize","fontWeight","fontFamily","color","lineHeight","width","textDecoration"],function(e){t[e]!==V&&(i[e]=t[e],delete t[e])}),C.css(i)}return O.call(T,t)},getBBox:function(){return{width:v.width+2*P,height:v.height+2*P,x:v.x-P,y:v.y-P}},shadow:function(t){return m&&m.shadow(t),T},destroy:function(){Mi(T,"add",g),Mi(T.element,"mouseenter"),Mi(T.element,"mouseleave"),C&&(C=C.destroy()),m&&(m=m.destroy()),E.prototype.destroy.call(T),T=M=u=p=f=g=null}})}},q=Oi;var zi,Yi;if(!ze&&!Re){Highcharts.VMLElement=Yi={init:function(t,e){var i=this,n=["<",e,' filled="f" stroked="f"'],s=["position: ",je,";"],o=e===Xe;("shape"===e||o)&&s.push("left:0;top:0;width:1px;height:1px;"),s.push("visibility: ",o?Ve:Ze),n.push(' style="',s.join(""),'"/>'),e&&(n=o||"span"===e||"img"===e?n.join(""):t.prepVML(n),i.element=m(n)),i.renderer=t,i.attrSetters={}},add:function(t){var e=this,i=e.renderer,n=e.element,s=i.box,o=t&&t.inverted,r=t?t.element||t:s;return o&&i.invertChild(n,r),r.appendChild(n),e.added=!0,e.alignOnAdd&&!e.deferUpdateTransform&&e.updateTransform(),Ti(e,"add"),e},updateTransform:E.prototype.htmlUpdateTransform,attr:function(t,e){var i,n,o,r,l,c,h=this,p=h.element||{},f=p.style,g=p.nodeName,v=h.renderer,_=h.symbolName,y=h.shadows,x=h.attrSetters,b=h;if(s(t)&&d(e)&&(i=t,t={},t[i]=e),s(t))i=t,b="strokeWidth"===i||"stroke-width"===i?h.strokeweight:h[i];else for(i in t)if(n=t[i],c=!1,r=x[i]&&x[i].call(h,n,i),r!==!1&&null!==n){if(r!==V&&(n=r),_&&/^(x|y|r|start|end|width|height|innerR|anchorX|anchorY)/.test(i))l||(h.symbolAttr(t),l=!0),c=!0;else if("d"===i){n=n||[],h.d=n.join(" "),o=n.length;for(var w,k=[];o--;)a(n[o])?k[o]=me(10*n[o])-5:"Z"===n[o]?k[o]="x":(k[o]=n[o],!n.isArc||"wa"!==n[o]&&"at"!==n[o]||(w="wa"===n[o]?1:-1,k[o+5]===k[o+7]&&(k[o+7]-=w),k[o+6]===k[o+8]&&(k[o+8]-=w)));if(n=k.join(" ")||"x",p.path=n,y)for(o=y.length;o--;)y[o].path=y[o].cutOff?this.cutOffPath(n,y[o].cutOff):n;c=!0}else if("visibility"===i){if(y)for(o=y.length;o--;)y[o].style[i]=n;"DIV"===g&&(n=n===Ve?"-999em":0,De||(f[i]=n?Ze:Ve),i="top"),f[i]=n,c=!0}else if("zIndex"===i)n&&(f[i]=n),c=!0;else if(-1!==_i(i,["x","y","width","height"]))h[i]=n,"x"===i||"y"===i?i={x:"left",y:"top"}[i]:n=ye(0,n),h.updateClipping?(h[i]=n,h.updateClipping()):f[i]=n,c=!0;else if("class"===i&&"DIV"===g)p.className=n;else if("stroke"===i)n=v.color(n,p,i),i="strokecolor";else if("stroke-width"===i||"strokeWidth"===i)p.stroked=n?!0:!1,i="strokeweight",h[i]=n,a(n)&&(n+=$e);else if("dashstyle"===i){var M=p.getElementsByTagName("stroke")[0]||m(v.prepVML(["<stroke/>"]),null,null,p);M[i]=n||"solid",h.dashstyle=n,c=!0}else"fill"===i?"SPAN"===g?f.color=n:"IMG"!==g&&(p.filled=n!==Ke?!0:!1,n=v.color(n,p,i,h),i="fillcolor"):"opacity"===i?c=!0:"shape"===g&&"rotation"===i?(h[i]=n,p.style.left=-me(ke(n*Te)+1)+$e,p.style.top=me(we(n*Te))+$e):"translateX"===i||"translateY"===i||"rotation"===i?(h[i]=n,h.updateTransform(),c=!0):"text"===i&&(this.bBox=null,p.innerHTML=n,c=!0);c||(De?p[i]=n:u(p,i,n))}return b},clip:function(t){var e,i,n=this;return t?(e=t.members,h(e,n),e.push(n),n.destroyClip=function(){h(e,n)},i=t.getCSS(n)):(n.destroyClip&&n.destroyClip(),i={clip:De?"inherit":"rect(auto)"}),n.css(i)},css:E.prototype.htmlCss,safeRemoveChild:function(t){t.parentNode&&L(t)},destroy:function(){return this.destroyClip&&this.destroyClip(),E.prototype.destroy.apply(this)},on:function(t,e){return this.element["on"+t]=function(){var t=fe.event;t.target=t.srcElement,e(t)},this},cutOffPath:function(t,e){var i;return t=t.split(/[ ,]/),i=t.length,(9===i||11===i)&&(t[i-4]=t[i-2]=n(t[i-2])-10*e),t.join(" ")},shadow:function(t,e,i){var s,o,r,a,l,c,h,d=[],u=this.element,p=this.renderer,g=u.style,v=u.path;if(v&&"string"!=typeof v.value&&(v="x"),l=v,t){for(c=f(t.width,3),h=(t.opacity||.15)/c,s=1;3>=s;s++)a=2*c+1-2*s,i&&(l=this.cutOffPath(v.value,a+.5)),r=['<shape isShadow="true" strokeweight="',a,'" filled="false" path="',l,'" coordsize="10 10" style="',u.style.cssText,'" />'],o=m(p.prepVML(r),null,{left:n(g.left)+f(t.offsetX,1),top:n(g.top)+f(t.offsetY,1)}),i&&(o.cutOff=a+1),r=['<stroke color="',t.color||"black",'" opacity="',h*s,'"/>'],m(p.prepVML(r),null,null,o),e?e.element.appendChild(o):u.parentNode.insertBefore(o,u),d.push(o);this.shadows=d}return this}},Yi=v(E,Yi);var Ri={Element:Yi,isIE8:Ce.indexOf("MSIE 8.0")>-1,init:function(t,e,i){var n,s,o=this;o.alignedObjects=[],n=o.createElement(Xe),s=n.element,s.style.position=Ue,t.appendChild(n.element),o.isVML=!0,o.box=s,o.boxWrapper=n,o.setSize(e,i,!1),pe.namespaces.hcv||(pe.namespaces.add("hcv","urn:schemas-microsoft-com:vml"),pe.createStyleSheet().cssText="hcv\\:fill, hcv\\:path, hcv\\:shape, hcv\\:stroke{ behavior:url(#default#VML); display: inline-block; } ")},isHidden:function(){return!this.box.offsetWidth},clipRect:function(e,i,n,s){var r=this.createElement(),a=o(e);return t(r,{members:[],left:a?e.x:e,top:a?e.y:i,width:a?e.width:n,height:a?e.height:s,getCSS:function(e){var i=e.element,n=i.nodeName,s="shape"===n,o=e.inverted,r=this,a=r.top-(s?i.offsetTop:0),l=r.left,c=l+r.width,h=a+r.height,d={clip:"rect("+me(o?l:a)+"px,"+me(o?h:c)+"px,"+me(o?c:h)+"px,"+me(o?a:l)+"px)"};return!o&&De&&"DIV"===n&&t(d,{width:c+$e,height:h+$e}),d},updateClipping:function(){yi(r.members,function(t){t.css(r.getCSS(t))})}})},color:function(t,e,i,n){var s,o,r,a=this,l=/^rgba/,c=Ke;if(t&&t.linearGradient?r="gradient":t&&t.radialGradient&&(r="pattern"),r){var h,d,u,p,f,g,v,_,y,x,b,w,k=t.linearGradient||t.radialGradient,M="",T=t.stops,C=[],S=function(){o=['<fill colors="'+C.join(",")+'" opacity="',_,'" o:opacity2="',v,'" type="',r,'" ',M,'focus="100%" method="any" />'],m(a.prepVML(o),null,null,e)};if(b=T[0],w=T[T.length-1],b[0]>0&&T.unshift([0,b[1]]),w[0]<1&&T.push([1,w[1]]),yi(T,function(t,e){l.test(t[1])?(s=Ii(t[1]),h=s.get("rgb"),d=s.get("a")):(h=t[1],d=1),C.push(100*t[0]+"% "+h),e?(_=d,y=h):(v=d,x=h)}),"fill"===i)if("gradient"===r)u=k.x1||k[0]||0,p=k.y1||k[1]||0,f=k.x2||k[2]||0,g=k.y2||k[3]||0,M='angle="'+(90-180*ge.atan((g-p)/(f-u))/Me)+'"',S();else{var P,D=k.r,A=2*D,L=2*D,I=k.cx,O=k.cy,z=e.radialReference,Y=function(){z&&(P=n.getBBox(),I+=(z[0]-P.x)/P.width-.5,O+=(z[1]-P.y)/P.height-.5,A*=z[2]/P.width,L*=z[2]/P.height),M='src="'+$.global.VMLRadialGradientURL+'" size="'+A+","+L+'" origin="0.5,0.5" position="'+I+","+O+'" color2="'+x+'" ',S()};n.added?Y():ki(n,"add",Y),c=y}else c=h}else if(l.test(t)&&"IMG"!==e.tagName)s=Ii(t),o=["<",i,' opacity="',s.get("a"),'"/>'],m(this.prepVML(o),null,null,e),c=s.get("rgb");else{var R=e.getElementsByTagName(i);R.length&&(R[0].opacity=1,R[0].type="solid"),c=t}return c},prepVML:function(t){var e="display:inline-block;behavior:url(#default#VML);",i=this.isIE8;return t=t.join(""),i?(t=t.replace("/>",' xmlns="urn:schemas-microsoft-com:vml" />'),t=-1===t.indexOf('style="')?t.replace("/>",' style="'+e+'" />'):t.replace('style="','style="'+e)):t=t.replace("<","<hcv:"),t},text:Oi.prototype.html,path:function(e){var i={coordsize:"10 10"};return r(e)?i.d=e:o(e)&&t(i,e),this.createElement("shape").attr(i)},circle:function(t,e,i){var n=this.symbol("circle");return o(t)&&(i=t.r,e=t.y,t=t.x),n.isCircle=!0,n.attr({x:t,y:e,width:2*i,height:2*i})},g:function(t){var e,i;return t&&(i={className:qe+t,"class":qe+t}),e=this.createElement(Xe).attr(i)},image:function(t,e,i,n,s){var o=this.createElement("img").attr({src:t});return arguments.length>1&&o.attr({x:e,y:i,width:n,height:s}),o},rect:function(t,e,i,n,s,r){o(t)&&(e=t.y,i=t.width,n=t.height,r=t.strokeWidth,t=t.x);var a=this.symbol("rect");return a.r=s,a.attr(a.crisp(r,t,e,ye(i,0),ye(n,0)))},invertChild:function(t,e){var i=e.style;g(t,{flip:"x",left:n(i.width)-1,top:n(i.height)-1,rotation:-90})},symbols:{arc:function(t,e,i,n,s){var o,r=s.start,a=s.end,l=s.r||i||n,c=s.innerR,h=we(r),d=ke(r),u=we(a),p=ke(a);return a-r===0?["x"]:(o=["wa",t-l,e-l,t+l,e+l,t+l*h,e+l*d,t+l*u,e+l*p],s.open&&!c&&o.push("e",Je,t,e),o.push("at",t-c,e-c,t+c,e+c,t+c*u,e+c*p,t+c*h,e+c*d,"x","e"),o.isArc=!0,o)},circle:function(t,e,i,n,s){return s&&s.isCircle&&(t-=i/2,e-=n/2),["wa",t,e,t+i,e+n,t+i,e+n/2,t+i,e+n/2,"e"]},rect:function(t,e,i,n,s){var o,r,a=t+i,l=e+n;return d(s)&&s.r?(r=xe(s.r,i,n),o=[Je,t+r,e,Qe,a-r,e,"wa",a-2*r,e,a,e+2*r,a-r,e,a,e+r,Qe,a,l-r,"wa",a-2*r,l-2*r,a,l,a,l-r,a-r,l,Qe,t+r,l,"wa",t,l-2*r,t+2*r,l,t+r,l,t,l-r,Qe,t,e+r,"wa",t,e,t+2*r,e+2*r,t,e+r,t+r,e,"x","e"]):o=Oi.prototype.symbols.square.apply(0,arguments),o}}};Highcharts.VMLRenderer=zi=function(){this.init.apply(this,arguments)},zi.prototype=e(Oi.prototype,Ri),q=zi}var Hi,Ei;Re&&(Highcharts.CanVGRenderer=Hi=function(){Oe="http://www.w3.org/1999/xhtml"},Hi.prototype.symbols={},Ei=function(){function t(){var t,i=e.length;for(t=0;i>t;t++)e[t]();e=[]}var e=[];return{push:function(i,n){0===e.length&&vi(n,t),e.push(i)}}}(),q=Hi),B.prototype={addLabel:function(){var e,i,n,s,o=this,r=o.axis,l=r.options,h=r.chart,u=r.horiz,p=r.categories,g=r.series[0]&&r.series[0].names,m=o.pos,v=l.labels,_=r.tickPositions,y=u&&p&&!v.step&&!v.staggerLines&&!v.rotation&&h.plotWidth/_.length||!u&&(h.optionsMarginLeft||h.plotWidth/2),x=m===_[0],b=m===_[_.length-1],w=p?f(p[m],g&&g[m],m):m,k=o.label,M=_.info;r.isDatetimeAxis&&M&&(s=l.dateTimeLabelFormats[M.higherRanks[m]||M.unitName]),o.isFirst=x,o.isLast=b,e=r.labelFormatter.call({axis:r,chart:h,isFirst:x,isLast:b,dateTimeLabelFormat:s,value:r.isLog?O(c(w)):w}),i=y&&{width:ye(1,me(y-2*(v.padding||10)))+$e},i=t(i,v.style),d(k)?k&&k.attr({text:e}).css(i):(n={align:v.align},a(v.rotation)&&(n.rotation=v.rotation),o.label=d(e)&&v.enabled?h.renderer.text(e,0,0,v.useHTML).attr(n).css(i).add(r.labelGroup):null)},getLabelSize:function(){var t=this.label,e=this.axis;return t?(this.labelBBox=t.getBBox())[e.horiz?"height":"width"]:0},getLabelSides:function(){var t=this.labelBBox,e=this.axis,i=e.options,n=i.labels,s=t.width,o=s*{left:0,center:.5,right:1}[n.align]-n.x;return[-o,s-o]},handleOverflow:function(t,e){var i=!0,n=this.axis,s=n.chart,o=this.isFirst,r=this.isLast,a=e.x,l=n.reversed,c=n.tickPositions;if(o||r){var h=this.getLabelSides(),d=h[0],u=h[1],p=s.plotLeft,f=p+n.len,g=n.ticks[c[t+(o?1:-1)]],m=g&&g.label.xy&&g.label.xy.x+g.getLabelSides()[o?0:1];o&&!l||r&&l?p>a+d&&(a=p-d,g&&a+u>m&&(i=!1)):a+u>f&&(a=f-u,g&&m>a+d&&(i=!1)),e.x=a}return i},getPosition:function(t,e,i,n){var s=this.axis,o=s.chart,r=n&&o.oldChartHeight||o.chartHeight;return{x:t?s.translate(e+i,null,null,n)+s.transB:s.left+s.offset+(s.opposite?(n&&o.oldChartWidth||o.chartWidth)-s.right-s.left:0),y:t?r-s.bottom+s.offset-(s.opposite?s.height:0):r-s.translate(e+i,null,null,n)-s.transB}},getLabelPosition:function(t,e,i,s,o,r,a,l){var c=this.axis,h=c.transA,u=c.reversed,p=c.staggerLines;return t=t+o.x-(r&&s?r*h*(u?-1:1):0),e=e+o.y-(r&&!s?r*h*(u?1:-1):0),d(o.y)||(e+=.9*n(i.styles.lineHeight)-i.getBBox().height/2),p&&(e+=a/(l||1)%p*16),{x:t,y:e}},getMarkPath:function(t,e,i,n,s,o){return o.crispLine([Je,t,e,Qe,t+(s?0:-i),e+(s?i:0)],n)},render:function(t,e,i){var n,s,o,r=this,a=r.axis,l=a.options,c=a.chart,h=c.renderer,d=a.horiz,u=r.type,p=r.label,g=r.pos,m=l.labels,v=r.gridLine,_=u?u+"Grid":"grid",y=u?u+"Tick":"tick",x=l[_+"LineWidth"],b=l[_+"LineColor"],w=l[_+"LineDashStyle"],k=l[y+"Length"],M=l[y+"Width"]||0,T=l[y+"Color"],C=l[y+"Position"],S=r.mark,P=m.step,D=!0,A=a.tickmarkOffset,L=r.getPosition(d,g,A,e),I=L.x,O=L.y,z=d&&I===a.pos||!d&&O===a.pos+a.len?-1:1,Y=a.staggerLines;this.isActive=!0,x&&(n=a.getPlotLinePath(g+A,x*z,e,!0),v===V&&(o={stroke:b,"stroke-width":x},w&&(o.dashstyle=w),u||(o.zIndex=1),e&&(o.opacity=0),r.gridLine=v=x?h.path(n).attr(o).add(a.gridGroup):null),!e&&v&&n&&v[r.isNew?"attr":"animate"]({d:n,opacity:i})),M&&k&&("inside"===C&&(k=-k),a.opposite&&(k=-k),s=r.getMarkPath(I,O,k,M*z,d,h),S?S.animate({d:s,opacity:i}):r.mark=h.path(s).attr({stroke:T,"stroke-width":M,opacity:i}).add(a.axisGroup)),p&&!isNaN(I)&&(p.xy=L=r.getLabelPosition(I,O,p,d,m,A,t,P),r.isFirst&&!f(l.showFirstLabel,1)||r.isLast&&!f(l.showLastLabel,1)?D=!1:Y||!d||"justify"!==m.overflow||r.handleOverflow(t,L)||(D=!1),P&&t%P&&(D=!1),D&&!isNaN(L.y)?(L.opacity=i,p[r.isNew?"attr":"animate"](L),r.isNew=!1):p.attr("y",-9999))},destroy:function(){A(this,this.axis)}},F.prototype={render:function(){var t,i,n,s,o,r,a,c=this,h=c.axis,u=h.horiz,p=(h.pointRange||0)/2,g=c.options,m=g.label,v=c.label,_=g.width,y=g.to,x=g.from,b=d(x)&&d(y),w=g.value,k=g.dashStyle,M=c.svgElem,T=[],C=g.color,S=g.zIndex,A=g.events,L=h.chart.renderer;if(h.isLog&&(x=l(x),y=l(y),w=l(w)),_)T=h.getPlotLinePath(w,_),a={stroke:C,"stroke-width":_},k&&(a.dashstyle=k);else{if(!b)return;x=ye(x,h.min-p),y=xe(y,h.max+p),T=h.getPlotBandPath(x,y,g),a={fill:C},g.borderWidth&&(a.stroke=g.borderColor,a["stroke-width"]=g.borderWidth)}if(d(S)&&(a.zIndex=S),M)T?M.animate({d:T},null,M.onGetPath):(M.hide(),M.onGetPath=function(){M.show()});else if(T&&T.length&&(c.svgElem=M=L.path(T).attr(a).add(),A)){t=function(t){M.on(t,function(e){A[t].apply(c,[e])})};for(i in A)t(i)}return m&&d(m.text)&&T&&T.length&&h.width>0&&h.height>0?(m=e({align:u&&b&&"center",x:u?!b&&4:10,verticalAlign:!u&&b&&"middle",y:u?b?16:10:b?6:-4,rotation:u&&!b&&90},m),v||(c.label=v=L.text(m.text,0,0).attr({align:m.textAlign||m.align,rotation:m.rotation,zIndex:S}).css(m.style).add()),n=[T[1],T[4],f(T[6],T[1])],s=[T[2],T[5],f(T[7],T[2])],o=P(n),r=P(s),v.align(m,!1,{x:o,y:r,width:D(n)-o,height:D(s)-r}),v.show()):v&&v.hide(),c},destroy:function(){var t=this,e=t.axis;h(e.plotLinesAndBands,t),A(t,this.axis)}},N.prototype={destroy:function(){A(this,this.axis)},setTotal:function(t){this.total=t,this.cum=t},render:function(t){var e=this.options,i=e.format,n=i?w(i,this):e.formatter.call(this);this.label?this.label.attr({text:n,visibility:Ve}):this.label=this.axis.chart.renderer.text(n,0,0,e.useHTML).css(e.style).attr({align:this.textAlign,rotation:e.rotation,visibility:Ve}).add(t)},setOffset:function(t,e){var i,n=this,s=n.axis,o=s.chart,r=o.inverted,a=this.isNegative,l=s.translate(this.percent?100:this.total,0,0,0,1),c=s.translate(0),h=be(l-c),d=o.xAxis[0].translate(this.x)+t,u=o.plotHeight,p={x:r?a?l:l-h:d,y:r?u-d-e:a?u-l-h:u-l,width:r?h:e,height:r?e:h},f=this.label;f&&(f.align(this.alignOptions,null,p),i=f.alignAttr,f.attr({visibility:this.options.crop===!1||o.isInsidePlot(i.x,i.y)?ze?"inherit":Ze:Ve}))}},W.prototype={defaultOptions:{dateTimeLabelFormats:{millisecond:"%H:%M:%S.%L",second:"%H:%M:%S",minute:"%H:%M",hour:"%H:%M",day:"%e. %b",week:"%e. %b",month:"%b '%y",year:"%Y"},endOnTick:!1,gridLineColor:"#C0C0C0",labels:Di,lineColor:"#C0D0E0",lineWidth:1,minPadding:.01,maxPadding:.01,minorGridLineColor:"#E0E0E0",minorGridLineWidth:1,minorTickColor:"#A0A0A0",minorTickLength:2,minorTickPosition:"outside",startOfWeek:1,startOnTick:!1,tickColor:"#C0D0E0",tickLength:5,tickmarkPlacement:"between",tickPixelInterval:100,tickPosition:"outside",tickWidth:1,title:{align:"middle",style:{color:"#4d759e",fontWeight:"bold"}},type:"linear"},defaultYAxisOptions:{endOnTick:!0,gridLineWidth:1,tickPixelInterval:72,showLastLabel:!0,labels:{align:"right",x:-8,y:3},lineWidth:0,maxPadding:.05,minPadding:.05,startOnTick:!0,tickWidth:0,title:{rotation:270,text:"Values"},stackLabels:{enabled:!1,formatter:function(){return _(this.total,-1)},style:Di.style}},defaultLeftAxisOptions:{labels:{align:"right",x:-8,y:null},title:{rotation:270}},defaultRightAxisOptions:{labels:{align:"left",x:8,y:null},title:{rotation:90}},defaultBottomAxisOptions:{labels:{align:"center",x:0,y:14},title:{rotation:0}},defaultTopAxisOptions:{labels:{align:"center",x:0,y:-5},title:{rotation:0}},init:function(t,e){var i=e.isX,n=this;n.horiz=t.inverted?!i:i,n.isXAxis=i,n.xOrY=i?"x":"y",n.opposite=e.opposite,n.side=n.horiz?n.opposite?0:2:n.opposite?1:3,n.setOptions(e);var s=this.options,o=s.type,r="datetime"===o;n.labelFormatter=s.labels.formatter||n.defaultLabelFormatter,n.staggerLines=n.horiz&&s.labels.staggerLines,n.userOptions=e,n.minPixelPadding=0,n.chart=t,n.reversed=s.reversed,n.zoomEnabled=s.zoomEnabled!==!1,n.categories=s.categories||"category"===o,n.isLog="logarithmic"===o,n.isDatetimeAxis=r,n.isLinked=d(s.linkedTo),n.tickmarkOffset=n.categories&&"between"===s.tickmarkPlacement?.5:0,n.ticks={},n.minorTicks={},n.plotLinesAndBands=[],n.alternateBands={},n.len=0,n.minRange=n.userMinRange=s.minRange||s.maxZoom,n.range=s.range,n.offset=s.offset||0,n.stacks={},n._stacksTouched=0,n.max=null,n.min=null;var a,h=n.options.events;-1===_i(n,t.axes)&&(t.axes.push(n),t[i?"xAxis":"yAxis"].push(n)),n.series=n.series||[],t.inverted&&i&&n.reversed===V&&(n.reversed=!0),n.removePlotBand=n.removePlotBandOrLine,n.removePlotLine=n.removePlotBandOrLine;for(a in h)ki(n,a,h[a]);n.isLog&&(n.val2lin=l,n.lin2val=c)},setOptions:function(t){this.options=e(this.defaultOptions,this.isXAxis?{}:this.defaultYAxisOptions,[this.defaultTopAxisOptions,this.defaultRightAxisOptions,this.defaultBottomAxisOptions,this.defaultLeftAxisOptions][this.side],e($[this.isXAxis?"xAxis":"yAxis"],t))},update:function(t,i){var n=this.chart;t=n.options[this.xOrY+"Axis"][this.options.index]=e(this.userOptions,t),this.destroy(),this._addedPlotLB=!1,this.init(n,t),n.isDirtyBox=!0,f(i,!0)&&n.redraw()},remove:function(t){var e=this.chart,i=this.xOrY+"Axis";yi(this.series,function(t){t.remove(!1)}),h(e.axes,this),h(e[i],this),e.options[i].splice(this.options.index,1),yi(e[i],function(t,e){t.options.index=e}),this.destroy(),e.isDirtyBox=!0,f(t,!0)&&e.redraw()},defaultLabelFormatter:function(){var t,e,i=this.axis,n=this.value,s=i.categories,o=this.dateTimeLabelFormat,r=$.lang.numericSymbols,a=r&&r.length,l=i.options.labels.format,c=i.isLog?n:i.tickInterval;if(l)e=w(l,this);else if(s)e=n;else if(o)e=K(o,n);else if(a&&c>=1e3)for(;a--&&e===V;)t=Math.pow(1e3,a+1),c>=t&&null!==r[a]&&(e=_(n/t,-1)+r[a]);return e===V&&(e=n>=1e3?_(n,0):_(n,-1)),e},getSeriesExtremes:function(){var t,e,i=this,n=i.chart,s=i.stacks,o=[],r=[],a=i._stacksTouched=i._stacksTouched+1;i.hasVisibleSeries=!1,i.dataMin=i.dataMax=null,yi(i.series,function(t){if(t.visible||!n.options.chart.ignoreHiddenSeries){var l,c,h,u,p,g,m,v,_,y,x,b,w,k=t.options,M=k.threshold,T=[],C=0;if(i.hasVisibleSeries=!0,i.isLog&&0>=M&&(M=k.threshold=null),i.isXAxis)m=t.xData,m.length&&(i.dataMin=xe(f(i.dataMin,m[0]),P(m)),i.dataMax=ye(f(i.dataMax,m[0]),D(m)));else{var S,A,L,I,z=t.cropped,Y=t.xAxis.getExtremes(),R=!!t.modifyValue;for(l=k.stacking,i.usePercentage="percent"===l,l&&(p=k.stack,u=t.type+f(p,""),g="-"+u,t.stackKey=u,c=o[u]||[],o[u]=c,h=r[g]||[],r[g]=h),i.usePercentage&&(i.dataMin=0,i.dataMax=99),m=t.processedXData,v=t.processedYData,x=v.length,e=0;x>e;e++)if(_=m[e],y=v[e],l&&(S=M>y,A=S?h:c,L=S?g:u,d(A[_])?(A[_]=O(A[_]+y),y=[y,A[_]]):A[_]=y,s[L]||(s[L]={}),s[L][_]||(s[L][_]=new N(i,i.options.stackLabels,S,_,p,l)),s[L][_].setTotal(A[_]),s[L][_].touched=a),null!==y&&y!==V&&(!i.isLog||y.length||y>0)&&(R&&(y=t.modifyValue(y)),t.getExtremesFromAll||z||(m[e+1]||_)>=Y.min&&(m[e-1]||_)<=Y.max))if(I=y.length)for(;I--;)null!==y[I]&&(T[C++]=y[I]);else T[C++]=y;!i.usePercentage&&T.length&&(t.dataMin=b=P(T),t.dataMax=w=D(T),i.dataMin=xe(f(i.dataMin,b),b),i.dataMax=ye(f(i.dataMax,w),w)),d(M)&&(i.dataMin>=M?(i.dataMin=M,i.ignoreMinPadding=!0):i.dataMax<M&&(i.dataMax=M,i.ignoreMaxPadding=!0))}}});for(t in s)for(e in s[t])s[t][e].touched<a&&(s[t][e].destroy(),delete s[t][e])},translate:function(t,e,i,n,s,o){var r,a=this,l=a.len,c=1,h=0,d=n?a.oldTransA:a.transA,u=n?a.oldMin:a.min,p=a.minPixelPadding,f=(a.options.ordinal||a.isLog&&s)&&a.lin2val;return d||(d=a.transA),i&&(c*=-1,h=l),a.reversed&&(c*=-1,h-=c*l),e?(t=t*c+h,t-=p,r=t/d+u,f&&(r=a.lin2val(r))):(f&&(t=a.val2lin(t)),r=c*(t-u)*d+h+c*p+(o?d*a.pointRange/2:0)),r},toPixels:function(t,e){return this.translate(t,!1,!this.horiz,null,!0)+(e?0:this.pos)},toValue:function(t,e){return this.translate(t-(e?0:this.pos),!0,!this.horiz,null,!0)},getPlotLinePath:function(t,e,i,n){var s,o,r,a,l,c=this,h=c.chart,d=c.left,u=c.top,p=c.translate(t,null,null,i),f=i&&h.oldChartHeight||h.chartHeight,g=i&&h.oldChartWidth||h.chartWidth,m=c.transB;return s=r=me(p+m),o=a=me(f-p-m),isNaN(p)?l=!0:c.horiz?(o=u,a=f-c.bottom,(d>s||s>d+c.width)&&(l=!0)):(s=d,r=g-c.right,(u>o||o>u+c.height)&&(l=!0)),l&&!n?null:h.renderer.crispLine([Je,s,o,Qe,r,a],e||0)},getPlotBandPath:function(t,e){var i=this.getPlotLinePath(e),n=this.getPlotLinePath(t);return n&&i?n.push(i[4],i[5],i[1],i[2]):n=null,n},getLinearTickPositions:function(t,e,i){var n,s,o=O(ve(e/t)*t),r=O(_e(i/t)*t),a=[];for(n=o;r>=n&&(a.push(n),n=O(n+t),n!==s);)s=n;return a},getLogTickPositions:function(t,e,i,n){var s=this,o=s.options,r=s.len,a=[];if(n||(s._minorAutoInterval=null),t>=.5)t=me(t),a=s.getLinearTickPositions(t,e,i);else if(t>=.08){var h,d,u,p,g,m,v,_=ve(e);for(h=t>.3?[1,2,4]:t>.15?[1,2,4,6,8]:[1,2,3,4,5,6,7,8,9],d=_;i+1>d&&!v;d++)for(p=h.length,u=0;p>u&&!v;u++)g=l(c(d)*h[u]),g>e&&(!n||i>=m)&&a.push(m),m>i&&(v=!0),m=g}else{var y=c(e),x=c(i),b=o[n?"minorTickInterval":"tickInterval"],w="auto"===b?null:b,M=o.tickPixelInterval/(n?5:1),T=n?r/s.tickPositions.length:r;t=f(w,s._minorAutoInterval,(x-y)*M/(T||1)),t=k(t,null,ge.pow(10,ve(ge.log(t)/ge.LN10))),a=wi(s.getLinearTickPositions(t,y,x),l),n||(s._minorAutoInterval=t/5)}return n||(s.tickInterval=t),a},getMinorTickPositions:function(){var t,e,i,n=this,s=n.options,o=n.tickPositions,r=n.minorTickInterval,a=[];if(n.isLog)for(i=o.length,e=1;i>e;e++)a=a.concat(n.getLogTickPositions(r,o[e-1],o[e],!0));else if(n.isDatetimeAxis&&"auto"===s.minorTickInterval)a=a.concat(T(M(r),n.min,n.max,s.startOfWeek)),a[0]<n.min&&a.shift();else for(t=n.min+(o[0]-n.min)%r;t<=n.max;t+=r)a.push(t);return a},adjustForMinRange:function(){var t,e,i,n,s,o,r,a,l=this,c=l.options,h=l.min,u=l.max,p=l.dataMax-l.dataMin>=l.minRange;if(l.isXAxis&&l.minRange===V&&!l.isLog&&(d(c.min)||d(c.max)?l.minRange=null:(yi(l.series,function(t){for(s=t.xData,o=t.xIncrement?1:s.length-1,i=o;i>0;i--)n=s[i]-s[i-1],(e===V||e>n)&&(e=n)}),l.minRange=xe(5*e,l.dataMax-l.dataMin))),u-h<l.minRange){var g=l.minRange;t=(g-u+h)/2,r=[h-t,f(c.min,h-t)],p&&(r[2]=l.dataMin),h=D(r),a=[h+g,f(c.max,h+g)],p&&(a[2]=l.dataMax),u=P(a),g>u-h&&(r[0]=u-g,r[1]=f(c.min,u-g),h=D(r))}l.min=h,l.max=u},setAxisTranslation:function(t){var e,i,n=this,s=n.max-n.min,o=0,r=0,a=0,l=n.linkedParent,c=n.transA;n.isXAxis&&(l?(r=l.minPointOffset,a=l.pointRangePadding):yi(n.series,function(t){var i=t.pointRange,n=t.options.pointPlacement,l=t.closestPointRange;i>s&&(i=0),o=ye(o,i),r=ye(r,n?0:i/2),a=ye(a,"on"===n?0:i),!t.noSharedTooltip&&d(l)&&(e=d(e)?xe(e,l):l)}),i=n.ordinalSlope&&e?n.ordinalSlope/e:1,n.minPointOffset=r*=i,n.pointRangePadding=a*=i,n.pointRange=xe(o,s),n.closestPointRange=e),t&&(n.oldTransA=c),n.translationSlope=n.transA=c=n.len/(s+a||1),n.transB=n.horiz?n.left:n.bottom,n.minPixelPadding=c*r},setTickPositions:function(t){var e,i,n,s,o=this,r=o.chart,a=o.options,c=o.isLog,h=o.isDatetimeAxis,u=o.isXAxis,p=o.isLinked,g=o.options.tickPositioner,m=a.maxPadding,v=a.minPadding,_=a.tickInterval,y=a.minTickInterval,x=a.tickPixelInterval,b=o.categories;if(p?(o.linkedParent=r[u?"xAxis":"yAxis"][a.linkedTo],n=o.linkedParent.getExtremes(),o.min=f(n.min,n.dataMin),o.max=f(n.max,n.dataMax),a.type!==o.linkedParent.options.type&&I(11,1)):(o.min=f(o.userMin,a.min,o.dataMin),o.max=f(o.userMax,a.max,o.dataMax)),c&&(!t&&xe(o.min,f(o.dataMin,o.min))<=0&&I(10,1),o.min=O(l(o.min)),o.max=O(l(o.max))),o.range&&(o.userMin=o.min=ye(o.min,o.max-o.range),o.userMax=o.max,t&&(o.range=null)),o.beforePadding&&o.beforePadding(),o.adjustForMinRange(),b||o.usePercentage||p||!d(o.min)||!d(o.max)||(i=o.max-o.min,i&&(d(a.min)||d(o.userMin)||!v||!(o.dataMin<0)&&o.ignoreMinPadding||(o.min-=i*v),d(a.max)||d(o.userMax)||!m||!(o.dataMax>0)&&o.ignoreMaxPadding||(o.max+=i*m))),o.tickInterval=o.min===o.max||void 0===o.min||void 0===o.max?1:p&&!_&&x===o.linkedParent.options.tickPixelInterval?o.linkedParent.tickInterval:f(_,b?1:(o.max-o.min)*x/(o.len||1)),u&&!t&&yi(o.series,function(t){t.processData(o.min!==o.oldMin||o.max!==o.oldMax)}),o.setAxisTranslation(!0),o.beforeSetTickPositions&&o.beforeSetTickPositions(),o.postProcessTickInterval&&(o.tickInterval=o.postProcessTickInterval(o.tickInterval)),!_&&o.tickInterval<y&&(o.tickInterval=y),h||c||(e=ge.pow(10,ve(ge.log(o.tickInterval)/ge.LN10)),_||(o.tickInterval=k(o.tickInterval,null,e,a))),o.minorTickInterval="auto"===a.minorTickInterval&&o.tickInterval?o.tickInterval/5:a.minorTickInterval,o.tickPositions=s=a.tickPositions?[].concat(a.tickPositions):g&&g.apply(o,[o.min,o.max]),s||(s=h?(o.getNonLinearTimeTicks||T)(M(o.tickInterval,a.units),o.min,o.max,a.startOfWeek,o.ordinalPositions,o.closestPointRange,!0):c?o.getLogTickPositions(o.tickInterval,o.min,o.max):o.getLinearTickPositions(o.tickInterval,o.min,o.max),o.tickPositions=s),!p){var w,C=s[0],S=s[s.length-1],P=o.minPointOffset||0;a.startOnTick?o.min=C:o.min-P>C&&s.shift(),a.endOnTick?o.max=S:o.max+P<S&&s.pop(),1===s.length&&(w=.001,o.min-=w,o.max+=w)}},setMaxTicks:function(){var t=this.chart,e=t.maxTicks||{},i=this.tickPositions,n=this._maxTicksKey=[this.xOrY,this.pos,this.len].join("-");!this.isLinked&&!this.isDatetimeAxis&&i&&i.length>(e[n]||0)&&this.options.alignTicks!==!1&&(e[n]=i.length),t.maxTicks=e},adjustTickAmount:function(){var t=this,e=t.chart,i=t._maxTicksKey,n=t.tickPositions,s=e.maxTicks;if(s&&s[i]&&!t.isDatetimeAxis&&!t.categories&&!t.isLinked&&t.options.alignTicks!==!1){var o,r=t.tickAmount,a=n.length;if(t.tickAmount=o=s[i],o>a){for(;n.length<o;)n.push(O(n[n.length-1]+t.tickInterval));t.transA*=(a-1)/(o-1),t.max=n[n.length-1]}d(r)&&o!==r&&(t.isDirty=!0)}},setScale:function(){var t,e,i,n,s=this,o=s.stacks;if(s.oldMin=s.min,s.oldMax=s.max,s.oldAxisLength=s.len,s.setAxisSize(),n=s.len!==s.oldAxisLength,yi(s.series,function(t){(t.isDirtyData||t.isDirty||t.xAxis.isDirty)&&(i=!0)}),(n||i||s.isLinked||s.forceRedraw||s.userMin!==s.oldUserMin||s.userMax!==s.oldUserMax)&&(s.forceRedraw=!1,s.getSeriesExtremes(),s.setTickPositions(),s.oldUserMin=s.userMin,s.oldUserMax=s.userMax,s.isDirty||(s.isDirty=n||s.min!==s.oldMin||s.max!==s.oldMax)),!s.isXAxis)for(t in o)for(e in o[t])o[t][e].cum=o[t][e].total;s.setMaxTicks()},setExtremes:function(e,i,n,s,o){var r=this,a=r.chart;n=f(n,!0),o=t(o,{min:e,max:i}),Ti(r,"setExtremes",o,function(){r.userMin=e,r.userMax=i,r.isDirtyExtremes=!0,n&&a.redraw(s)})},zoom:function(t,e){return this.allowZoomOutside||(t<=this.dataMin&&(t=V),e>=this.dataMax&&(e=V)),this.displayBtn=t!==V||e!==V,this.setExtremes(t,e,!1,V,{trigger:"zoom"}),!0},setAxisSize:function(){var t,e,i,n,s=this.chart,o=this.options,r=o.offsetLeft||0,a=o.offsetRight||0,l=this.horiz;this.left=n=f(o.left,s.plotLeft+r),this.top=i=f(o.top,s.plotTop),this.width=t=f(o.width,s.plotWidth-r+a),this.height=e=f(o.height,s.plotHeight),this.bottom=s.chartHeight-e-i,this.right=s.chartWidth-t-n,this.len=ye(l?t:e,0),this.pos=l?n:i},getExtremes:function(){var t=this,e=t.isLog;return{min:e?O(c(t.min)):t.min,max:e?O(c(t.max)):t.max,dataMin:t.dataMin,dataMax:t.dataMax,userMin:t.userMin,userMax:t.userMax}},getThreshold:function(t){var e=this,i=e.isLog,n=i?c(e.min):e.min,s=i?c(e.max):e.max;return n>t||null===t?t=n:t>s&&(t=s),e.translate(t,0,1,0,1)},addPlotBand:function(t){this.addPlotBandOrLine(t,"plotBands")},addPlotLine:function(t){this.addPlotBandOrLine(t,"plotLines")},addPlotBandOrLine:function(t,e){var i=new F(this,t).render(),n=this.userOptions;return e&&(n[e]=n[e]||[],n[e].push(t)),this.plotLinesAndBands.push(i),i},getOffset:function(){var t,e,i,n,s=this,o=s.chart,r=o.renderer,a=s.options,l=s.tickPositions,c=s.ticks,h=s.horiz,u=s.side,p=o.inverted?[1,0,3,2][u]:u,g=0,m=0,v=a.title,_=a.labels,y=0,x=o.axisOffset,b=o.clipOffset,w=[-1,1,1,-1][u];if(s.hasData=t=s.hasVisibleSeries||d(s.min)&&d(s.max)&&!!l,s.showAxis=e=t||f(a.showEmpty,!0),s.axisGroup||(s.gridGroup=r.g("grid").attr({zIndex:a.gridZIndex||1}).add(),s.axisGroup=r.g("axis").attr({zIndex:a.zIndex||2}).add(),s.labelGroup=r.g("axis-labels").attr({zIndex:_.zIndex||7}).add()),t||s.isLinked)yi(l,function(t){c[t]?c[t].addLabel():c[t]=new B(s,t)}),yi(l,function(t){(0===u||2===u||{1:"left",3:"right"}[u]===_.align)&&(y=ye(c[t].getLabelSize(),y))}),s.staggerLines&&(y+=16*(s.staggerLines-1));else for(n in c)c[n].destroy(),delete c[n];v&&v.text&&v.enabled!==!1&&(s.axisTitle||(s.axisTitle=r.text(v.text,0,0,v.useHTML).attr({zIndex:7,rotation:v.rotation||0,align:v.textAlign||{low:"left",middle:"center",high:"right"}[v.align]}).css(v.style).add(s.axisGroup),s.axisTitle.isNew=!0),e&&(g=s.axisTitle.getBBox()[h?"height":"width"],m=f(v.margin,h?5:10),i=v.offset),s.axisTitle[e?"show":"hide"]()),s.offset=w*f(a.offset,x[u]),s.axisTitleMargin=f(i,y+m+(2!==u&&y&&w*a.labels[h?"y":"x"])),x[u]=ye(x[u],s.axisTitleMargin+g+w*s.offset),b[p]=ye(b[p],a.lineWidth)},getLinePath:function(t){var e=this.chart,i=this.opposite,n=this.offset,s=this.horiz,o=this.left+(i?this.width:0)+n,r=e.chartHeight-this.bottom-(i?this.height:0)+n;return this.lineTop=r,i||(t*=-1),e.renderer.crispLine([Je,s?this.left:o,s?r:this.top,Qe,s?e.chartWidth-this.right:o,s?r:e.chartHeight-this.bottom],t)},getTitlePosition:function(){var t=this.horiz,e=this.left,i=this.top,s=this.len,o=this.options.title,r=t?e:i,a=this.opposite,l=this.offset,c=n(o.style.fontSize||12),h={low:r+(t?0:s),middle:r+s/2,high:r+(t?s:0)}[o.align],d=(t?i+this.height:e)+(t?1:-1)*(a?-1:1)*this.axisTitleMargin+(2===this.side?c:0);return{x:t?h:d+(a?this.width:0)+l+(o.x||0),y:t?d-(a?this.height:0)+l:h+(o.y||0)}},render:function(){var t,e,i,n=this,s=n.chart,o=s.renderer,r=n.options,a=n.isLog,l=n.isLinked,h=n.tickPositions,u=n.axisTitle,p=n.stacks,f=n.ticks,g=n.minorTicks,m=n.alternateBands,v=r.stackLabels,_=r.alternateGridColor,y=n.tickmarkOffset,x=r.lineWidth,b=s.hasRendered,w=b&&d(n.oldMin)&&!isNaN(n.oldMin),k=n.hasData,M=n.showAxis;if(yi([f,g,m],function(t){var e;for(e in t)t[e].isActive=!1}),(k||l)&&(n.minorTickInterval&&!n.categories&&yi(n.getMinorTickPositions(),function(t){g[t]||(g[t]=new B(n,t,"minor")),w&&g[t].isNew&&g[t].render(null,!0),g[t].render(null,!1,1)}),h.length&&(yi(h.slice(1).concat([h[0]]),function(t,e){e=e===h.length-1?0:e+1,(!l||t>=n.min&&t<=n.max)&&(f[t]||(f[t]=new B(n,t)),w&&f[t].isNew&&f[t].render(e,!0),f[t].render(e,!1,1))}),y&&0===n.min&&(f[-1]||(f[-1]=new B(n,-1,null,!0)),f[-1].render(-1))),_&&yi(h,function(t,s){s%2===0&&t<n.max&&(m[t]||(m[t]=new F(n)),e=t+y,i=h[s+1]!==V?h[s+1]+y:n.max,m[t].options={from:a?c(e):e,to:a?c(i):i,color:_},m[t].render(),m[t].isActive=!0)}),n._addedPlotLB||(yi((r.plotLines||[]).concat(r.plotBands||[]),function(t){n.addPlotBandOrLine(t)}),n._addedPlotLB=!0)),yi([f,g,m],function(t){var e,i,n=[],o=J?J.duration||500:0,r=function(){for(i=n.length;i--;)t[n[i]]&&!t[n[i]].isActive&&(t[n[i]].destroy(),delete t[n[i]])
};for(e in t)t[e].isActive||(t[e].render(e,!1,0),t[e].isActive=!1,n.push(e));t!==m&&s.hasRendered&&o?o&&setTimeout(r,o):r()}),x&&(t=n.getLinePath(x),n.axisLine?n.axisLine.animate({d:t}):n.axisLine=o.path(t).attr({stroke:r.lineColor,"stroke-width":x,zIndex:7}).add(n.axisGroup),n.axisLine[M?"show":"hide"]()),u&&M&&(u[u.isNew?"attr":"animate"](n.getTitlePosition()),u.isNew=!1),v&&v.enabled){var T,C,S,P=n.stackTotalGroup;P||(n.stackTotalGroup=P=o.g("stack-labels").attr({visibility:Ze,zIndex:6}).add()),P.translate(s.plotLeft,s.plotTop);for(T in p){C=p[T];for(S in C)C[S].render(P)}}n.isDirty=!1},removePlotBandOrLine:function(t){for(var e=this.plotLinesAndBands,i=e.length;i--;)e[i].id===t&&e[i].destroy()},setTitle:function(t,e){this.update({title:t},e)},redraw:function(){var t=this,e=t.chart,i=e.pointer;i.reset&&i.reset(!0),t.render(),yi(t.plotLinesAndBands,function(t){t.render()}),yi(t.series,function(t){t.isDirty=!0})},setCategories:function(t,e){this.update({categories:t},e)},destroy:function(){var t,e=this,i=e.stacks;Mi(e);for(t in i)A(i[t]),i[t]=null;yi([e.ticks,e.minorTicks,e.alternateBands,e.plotLinesAndBands],function(t){A(t)}),yi(["stackTotalGroup","axisLine","axisGroup","gridGroup","labelGroup","axisTitle"],function(t){e[t]&&(e[t]=e[t].destroy())})}},G.prototype={init:function(t,e){var i=e.borderWidth,s=e.style,o=n(s.padding);this.chart=t,this.options=e,this.crosshairs=[],this.now={x:0,y:0},this.isHidden=!0,this.label=t.renderer.label("",0,0,e.shape,null,null,e.useHTML,null,"tooltip").attr({padding:o,fill:e.backgroundColor,"stroke-width":i,r:e.borderRadius,zIndex:8}).css(s).css({padding:0}).hide().add(),Re||this.label.shadow(e.shadow),this.shared=e.shared},destroy:function(){yi(this.crosshairs,function(t){t&&t.destroy()}),this.label&&(this.label=this.label.destroy()),clearTimeout(this.hideTimer),clearTimeout(this.tooltipTimeout)},move:function(e,i,n,s){var o=this,r=o.now,a=o.options.animation!==!1&&!o.isHidden;t(r,{x:a?(2*r.x+e)/3:e,y:a?(r.y+i)/2:i,anchorX:a?(2*r.anchorX+n)/3:n,anchorY:a?(r.anchorY+s)/2:s}),o.label.attr(r),a&&(be(e-r.x)>1||be(i-r.y)>1)&&(clearTimeout(this.tooltipTimeout),this.tooltipTimeout=setTimeout(function(){o&&o.move(e,i,n,s)},32))},hide:function(){var t,e=this;clearTimeout(this.hideTimer),this.isHidden||(t=this.chart.hoverPoints,this.hideTimer=setTimeout(function(){e.label.fadeOut(),e.isHidden=!0},f(this.options.hideDelay,500)),t&&yi(t,function(t){t.setState()}),this.chart.hoverPoints=null)},hideCrosshairs:function(){yi(this.crosshairs,function(t){t&&t.hide()})},getAnchor:function(t,e){var i,n,s=this.chart,o=s.inverted,r=s.plotTop,a=0,l=0;return t=p(t),i=t[0].tooltipPos,this.followPointer&&e&&(e.chartX===V&&(e=s.pointer.normalize(e)),i=[e.chartX-s.plotLeft,e.chartY-r]),i||(yi(t,function(t){n=t.series.yAxis,a+=t.plotX,l+=(t.plotLow?(t.plotLow+t.plotHigh)/2:t.plotY)+(!o&&n?n.top-r:0)}),a/=t.length,l/=t.length,i=[o?s.plotWidth-l:a,this.shared&&!o&&t.length>1&&e?e.chartY-r:o?s.plotHeight-a:l]),wi(i,me)},getPosition:function(t,e,i){var n,s=this.chart,o=s.plotLeft,r=s.plotTop,a=s.plotWidth,l=s.plotHeight,c=f(this.options.distance,12),h=i.plotX,d=i.plotY,u=h+o+(s.inverted?c:-t-c),p=d-e+r+15;return 7>u&&(u=o+ye(h,0)+c),u+t>o+a&&(u-=u+t-(o+a),p=d-e+r-c,n=!0),r+5>p&&(p=r+5,n&&d>=p&&p+e>=d&&(p=d+r+c)),p+e>r+l&&(p=ye(r,r+l-e-c)),{x:u,y:p}},defaultFormatter:function(t){var e,i=this.points||p(this),n=i[0].series;return e=[n.tooltipHeaderFormatter(i[0])],yi(i,function(t){n=t.series,e.push(n.tooltipFormatter&&n.tooltipFormatter(t)||t.point.tooltipFormatter(n.tooltipOptions.pointFormat))}),e.push(t.options.footerFormat||""),e.join("")},refresh:function(t,e){var i,n,s,o,r,a,c,h=this,d=h.chart,u=h.label,g=h.options,m={},v=[],_=g.formatter||h.defaultFormatter,y=d.hoverPoints,x=g.crosshairs,b=h.shared;if(clearTimeout(this.hideTimer),h.followPointer=p(t)[0].series.tooltipOptions.followPointer,o=h.getAnchor(t,e),i=o[0],n=o[1],!b||t.series&&t.series.noSharedTooltip?m=t.getLabelConfig():(d.hoverPoints=t,y&&yi(y,function(t){t.setState()}),yi(t,function(t){t.setState(ii),v.push(t.getLabelConfig())}),m={x:t[0].category,y:t[0].y},m.points=v,t=t[0]),r=_.call(m,h),c=t.series,s=b||!c.isCartesian||c.tooltipOutsidePlot||d.isInsidePlot(i,n),r!==!1&&s?(h.isHidden&&(Pi(u),u.attr("opacity",1).show()),u.attr({text:r}),a=g.borderColor||t.color||c.color||"#606060",u.attr({stroke:a}),h.updatePosition({plotX:i,plotY:n}),this.isHidden=!1):this.hide(),x){x=p(x);for(var w,k,M,T,C=x.length;C--;)M=t.series[C?"yAxis":"xAxis"],x[C]&&M&&(T=C?f(t.stackY,t.y):t.x,M.isLog&&(T=l(T)),w=M.getPlotLinePath(T,1),h.crosshairs[C]?h.crosshairs[C].attr({d:w,visibility:Ze}):(k={"stroke-width":x[C].width||1,stroke:x[C].color||"#C0C0C0",zIndex:x[C].zIndex||2},x[C].dashStyle&&(k.dashstyle=x[C].dashStyle),h.crosshairs[C]=d.renderer.path(w).attr(k).add()))}Ti(d,"tooltipRefresh",{text:r,x:i+d.plotLeft,y:n+d.plotTop,borderColor:a})},updatePosition:function(t){var e=this.chart,i=this.label,n=(this.options.positioner||this.getPosition).call(this,i.width,i.height,t);this.move(me(n.x),me(n.y),t.plotX+e.plotLeft,t.plotY+e.plotTop)}},X.prototype={init:function(t,e){var i,n,s=Re?"":e.chart.zoomType,o=t.inverted;this.options=e,this.chart=t,this.zoomX=i=/x/.test(s),this.zoomY=n=/y/.test(s),this.zoomHor=i&&!o||n&&o,this.zoomVert=n&&!o||i&&o,this.pinchDown=[],this.lastValidTouch={},e.tooltip.enabled&&(t.tooltip=new G(t,e.tooltip)),this.setDOMEvents()},normalize:function(e){var i,n,s,o;return e=e||fe.event,e.target||(e.target=e.srcElement),e=Ci(e),o=e.touches?e.touches.item(0):e,this.chartPosition=i=bi(this.chart.container),o.pageX===V?(n=e.x,s=e.y):(n=o.pageX-i.left,s=o.pageY-i.top),t(e,{chartX:me(n),chartY:me(s)})},getCoordinates:function(t){var e={xAxis:[],yAxis:[]};return yi(this.chart.axes,function(i){e[i.isXAxis?"xAxis":"yAxis"].push({axis:i,value:i.toValue(t[i.horiz?"chartX":"chartY"])})}),e},getIndex:function(t){var e=this.chart;return e.inverted?e.plotHeight+e.plotTop-t.chartY:t.chartX-e.plotLeft},runPointActions:function(t){var e,i,n,s,o,r=this,a=r.chart,l=a.series,c=a.tooltip,h=a.hoverPoint,d=a.hoverSeries,u=a.chartWidth,p=r.getIndex(t);if(c&&r.options.tooltip.shared&&(!d||!d.noSharedTooltip)){for(i=[],n=l.length,s=0;n>s;s++)l[s].visible&&l[s].options.enableMouseTracking!==!1&&!l[s].noSharedTooltip&&l[s].tooltipPoints.length&&(e=l[s].tooltipPoints[p],e.series&&(e._dist=be(p-e.clientX),u=xe(u,e._dist),i.push(e)));for(n=i.length;n--;)i[n]._dist>u&&i.splice(n,1);i.length&&i[0].clientX!==r.hoverX&&(c.refresh(i,t),r.hoverX=i[0].clientX)}d&&d.tracker?(e=d.tooltipPoints[p],e&&e!==h&&e.onMouseOver(t)):c&&c.followPointer&&!c.isHidden&&(o=c.getAnchor([{}],t),c.updatePosition({plotX:o[0],plotY:o[1]}))},reset:function(t){var e=this,i=e.chart,n=i.hoverSeries,s=i.hoverPoint,o=i.tooltip,r=o&&o.shared?i.hoverPoints:s;t=t&&o&&r,t&&p(r)[0].plotX===V&&(t=!1),t?o.refresh(r):(s&&s.onMouseOut(),n&&n.onMouseOut(),o&&(o.hide(),o.hideCrosshairs()),e.hoverX=null)},scaleGroups:function(t,e){var i=this.chart;yi(i.series,function(n){n.xAxis&&n.xAxis.zoomEnabled&&(n.group.attr(t),n.markerGroup&&(n.markerGroup.attr(t),n.markerGroup.clip(e?i.clipRect:null)),n.dataLabelsGroup&&n.dataLabelsGroup.attr(t))}),i.clipRect.attr(e||i.clipBox)},pinchTranslateDirection:function(t,e,i,n,s,o,r){var a,l,c,h,d,u,p=this.chart,f=t?"x":"y",g=t?"X":"Y",m="chart"+g,v=t?"width":"height",_=p["plot"+(t?"Left":"Top")],y=1,x=p.inverted,b=p.bounds[t?"h":"v"],w=1===e.length,k=e[0][m],M=i[0][m],T=!w&&e[1][m],C=!w&&i[1][m],S=function(){!w&&be(k-T)>20&&(y=be(M-C)/be(k-T)),c=(_-M)/y+k,a=p["plot"+(t?"Width":"Height")]/y};S(),l=c,l<b.min?(l=b.min,h=!0):l+a>b.max&&(l=b.max-a,h=!0),h?(M-=.8*(M-r[f][0]),w||(C-=.8*(C-r[f][1])),S()):r[f]=[M,C],x||(o[f]=c-_,o[v]=a),u=x?t?"scaleY":"scaleX":"scale"+g,d=x?1/y:y,s[v]=a,s[f]=l,n[u]=y,n["translate"+g]=d*_+(M-d*k)},pinch:function(e){var i=this,n=i.chart,s=i.pinchDown,o=n.tooltip&&n.tooltip.options.followTouchMove,r=e.touches,a=r.length,l=i.lastValidTouch,c=i.zoomHor||i.pinchHor,h=i.zoomVert||i.pinchVert,d=c||h,u=i.selectionMarker,p={},f={};"touchstart"===e.type&&(o||d)&&e.preventDefault(),wi(r,function(t){return i.normalize(t)}),"touchstart"===e.type?(yi(r,function(t,e){s[e]={chartX:t.chartX,chartY:t.chartY}}),l.x=[s[0].chartX,s[1]&&s[1].chartX],l.y=[s[0].chartY,s[1]&&s[1].chartY],yi(n.axes,function(t){if(t.zoomEnabled){var e=n.bounds[t.horiz?"h":"v"],i=t.minPixelPadding,s=t.toPixels(t.dataMin),o=t.toPixels(t.dataMax),r=xe(s,o),a=ye(s,o);e.min=xe(t.pos,r-i),e.max=ye(t.pos+t.len,a+i)}})):s.length&&(u||(i.selectionMarker=u=t({destroy:Fe},n.plotBox)),c&&i.pinchTranslateDirection(!0,s,r,p,u,f,l),h&&i.pinchTranslateDirection(!1,s,r,p,u,f,l),i.hasPinched=d,i.scaleGroups(p,f),!d&&o&&1===a&&this.runPointActions(i.normalize(e)))},dragStart:function(t){var e=this.chart;e.mouseIsDown=t.type,e.cancelClick=!1,e.mouseDownX=this.mouseDownX=t.chartX,this.mouseDownY=t.chartY},drag:function(t){var e,i,n=this.chart,s=n.options.chart,o=t.chartX,r=t.chartY,a=this.zoomHor,l=this.zoomVert,c=n.plotLeft,h=n.plotTop,d=n.plotWidth,u=n.plotHeight,p=this.mouseDownX,f=this.mouseDownY;c>o?o=c:o>c+d&&(o=c+d),h>r?r=h:r>h+u&&(r=h+u),this.hasDragged=Math.sqrt(Math.pow(p-o,2)+Math.pow(f-r,2)),this.hasDragged>10&&(e=n.isInsidePlot(p-c,f-h),n.hasCartesianSeries&&(this.zoomX||this.zoomY)&&e&&(this.selectionMarker||(this.selectionMarker=n.renderer.rect(c,h,a?1:d,l?1:u,0).attr({fill:s.selectionMarkerFill||"rgba(69,114,167,0.25)",zIndex:7}).add())),this.selectionMarker&&a&&(i=o-p,this.selectionMarker.attr({width:be(i),x:(i>0?0:i)+p})),this.selectionMarker&&l&&(i=r-f,this.selectionMarker.attr({height:be(i),y:(i>0?0:i)+f})),e&&!this.selectionMarker&&s.panning&&n.pan(o))},drop:function(e){var i=this.chart,n=this.hasPinched;if(this.selectionMarker){var s,o={xAxis:[],yAxis:[],originalEvent:e.originalEvent||e},r=this.selectionMarker,a=r.x,l=r.y;(this.hasDragged||n)&&(yi(i.axes,function(t){if(t.zoomEnabled){var e=t.horiz,i=t.toValue(e?a:l),n=t.toValue(e?a+r.width:l+r.height);isNaN(i)||isNaN(n)||(o[t.xOrY+"Axis"].push({axis:t,min:xe(i,n),max:ye(i,n)}),s=!0)}}),s&&Ti(i,"selection",o,function(e){i.zoom(t(e,n?{animation:!1}:null))})),this.selectionMarker=this.selectionMarker.destroy(),n&&this.scaleGroups({translateX:i.plotLeft,translateY:i.plotTop,scaleX:1,scaleY:1})}i&&(g(i.container,{cursor:i._cursor}),i.cancelClick=this.hasDragged>10,i.mouseIsDown=this.hasDragged=this.hasPinched=!1,this.pinchDown=[])},onContainerMouseDown:function(t){t=this.normalize(t),t.preventDefault&&t.preventDefault(),this.dragStart(t)},onDocumentMouseUp:function(t){this.drop(t)},onDocumentMouseMove:function(t){var e=this.chart,i=this.chartPosition,n=e.hoverSeries;t=Ci(t),i&&n&&n.isCartesian&&!e.isInsidePlot(t.pageX-i.left-e.plotLeft,t.pageY-i.top-e.plotTop)&&this.reset()},onContainerMouseLeave:function(){this.reset(),this.chartPosition=null},onContainerMouseMove:function(t){var e=this.chart;t=this.normalize(t),t.returnValue=!1,"mousedown"===e.mouseIsDown&&this.drag(t),e.isInsidePlot(t.chartX-e.plotLeft,t.chartY-e.plotTop)&&!e.openMenu&&this.runPointActions(t)},inClass:function(t,e){for(var i;t;){if(i=u(t,"class")){if(-1!==i.indexOf(e))return!0;if(-1!==i.indexOf(qe+"container"))return!1}t=t.parentNode}},onTrackerMouseOut:function(t){var e=this.chart.hoverSeries;!e||e.options.stickyTracking||this.inClass(t.toElement||t.relatedTarget,qe+"tooltip")||e.onMouseOut()},onContainerClick:function(e){var i,n,s,o=this.chart,r=o.hoverPoint,a=o.plotLeft,l=o.plotTop,c=o.inverted;e=this.normalize(e),e.cancelBubble=!0,o.cancelClick||(r&&this.inClass(e.target,qe+"tracker")?(i=this.chartPosition,n=r.plotX,s=r.plotY,t(r,{pageX:i.left+a+(c?o.plotWidth-s:n),pageY:i.top+l+(c?o.plotHeight-n:s)}),Ti(r.series,"click",t(e,{point:r})),o.hoverPoint&&r.firePointEvent("click",e)):(t(e,this.getCoordinates(e)),o.isInsidePlot(e.chartX-a,e.chartY-l)&&Ti(o,"click",e)))},onContainerTouchStart:function(t){var e=this.chart;1===t.touches.length?(t=this.normalize(t),e.isInsidePlot(t.chartX-e.plotLeft,t.chartY-e.plotTop)&&(this.runPointActions(t),this.pinch(t))):2===t.touches.length&&this.pinch(t)},onContainerTouchMove:function(t){(1===t.touches.length||2===t.touches.length)&&this.pinch(t)},onDocumentTouchEnd:function(t){this.drop(t)},setDOMEvents:function(){var t,e=this,i=e.chart.container;this._events=t=[[i,"onmousedown","onContainerMouseDown"],[i,"onmousemove","onContainerMouseMove"],[i,"onclick","onContainerClick"],[i,"mouseleave","onContainerMouseLeave"],[pe,"mousemove","onDocumentMouseMove"],[pe,"mouseup","onDocumentMouseUp"]],He&&t.push([i,"ontouchstart","onContainerTouchStart"],[i,"ontouchmove","onContainerTouchMove"],[pe,"touchend","onDocumentTouchEnd"]),yi(t,function(t){e["_"+t[2]]=function(i){e[t[2]](i)},0===t[1].indexOf("on")?t[0][t[1]]=e["_"+t[2]]:ki(t[0],t[1],e["_"+t[2]])})},destroy:function(){var t=this;yi(t._events,function(e){0===e[1].indexOf("on")?e[0][e[1]]=null:Mi(e[0],e[1],t["_"+e[2]])}),delete t._events,clearInterval(t.tooltipTimeout)}},j.prototype={init:function(t,i){var s=this,o=i.itemStyle,r=f(i.padding,8),a=i.itemMarginTop||0;this.options=i,i.enabled&&(s.baseline=n(o.fontSize)+3+a,s.itemStyle=o,s.itemHiddenStyle=e(o,i.itemHiddenStyle),s.itemMarginTop=a,s.padding=r,s.initialItemX=r,s.initialItemY=r-5,s.maxItemWidth=0,s.chart=t,s.itemHeight=0,s.lastLineHeight=0,s.render(),ki(s.chart,"endResize",function(){s.positionCheckboxes()}))},colorizeItem:function(t,e){var i,n,s=this,o=s.options,r=t.legendItem,a=t.legendLine,l=t.legendSymbol,c=s.itemHiddenStyle.color,h=e?o.itemStyle.color:c,d=e?t.color:c,u=t.options&&t.options.marker,p={stroke:d,fill:d};if(r&&r.css({fill:h,color:h}),a&&a.attr({stroke:d}),l){if(u){u=t.convertAttribs(u);for(i in u)n=u[i],n!==V&&(p[i]=n)}l.attr(p)}},positionItem:function(t){var e=this,i=e.options,n=i.symbolPadding,s=!i.rtl,o=t._legendItemPos,r=o[0],a=o[1],l=t.checkbox;t.legendGroup&&t.legendGroup.translate(s?r:e.legendWidth-r-2*n-4,a),l&&(l.x=r,l.y=a)},destroyItem:function(t){var e=t.checkbox;yi(["legendItem","legendLine","legendSymbol","legendGroup"],function(e){t[e]&&t[e].destroy()}),e&&L(t.checkbox)},destroy:function(){var t=this,e=t.group,i=t.box;i&&(t.box=i.destroy()),e&&(t.group=e.destroy())},positionCheckboxes:function(t){var e,i=this.group.alignAttr,n=this.clipHeight||this.legendHeight;i&&(e=i.translateY,yi(this.allItems,function(s){var o,r=s.checkbox;r&&(o=e+r.y+(t||0)+3,g(r,{left:i.translateX+s.legendItemWidth+r.x-20+$e,top:o+$e,display:o>e-6&&e+n-6>o?"":Ke}))}))},renderTitle:function(){var t=this.options,e=this.padding,i=t.title,n=0;i.text&&(this.title||(this.title=this.chart.renderer.label(i.text,e-3,e-4,null,null,null,null,null,"legend-title").attr({zIndex:1}).css(i.style).add(this.group)),n=this.title.getBBox().height,this.contentGroup.attr({translateY:n})),this.titleHeight=n},renderItem:function(t){var i,n,s,o=this,r=o.chart,a=r.renderer,l=o.options,c="horizontal"===l.layout,h=l.symbolWidth,d=l.symbolPadding,u=o.itemStyle,p=o.itemHiddenStyle,f=o.padding,g=!l.rtl,v=l.width,_=l.itemMarginBottom||0,y=o.itemMarginTop,x=o.initialItemX,b=t.legendItem,k=t.series||t,M=k.options,T=M.showCheckbox,C=l.useHTML;b||(t.legendGroup=a.g("legend-item").attr({zIndex:1}).add(o.scrollGroup),k.drawLegendSymbol(o,t),t.legendItem=b=a.text(l.labelFormat?w(l.labelFormat,t):l.labelFormatter.call(t),g?h+d:-d,o.baseline,C).css(e(t.visible?u:p)).attr({align:g?"left":"right",zIndex:2}).add(t.legendGroup),(C?b:t.legendGroup).on("mouseover",function(){t.setState(ii),b.css(o.options.itemHoverStyle)}).on("mouseout",function(){b.css(t.visible?u:p),t.setState()}).on("click",function(e){var i="legendItemClick",n=function(){t.setVisible()};e={browserEvent:e},t.firePointEvent?t.firePointEvent(i,e,n):Ti(t,i,e,n)}),o.colorizeItem(t,t.visible),M&&T&&(t.checkbox=m("input",{type:"checkbox",checked:t.selected,defaultChecked:t.selected},l.itemCheckboxStyle,r.container),ki(t.checkbox,"click",function(e){var i=e.target;Ti(t,"checkboxClick",{checked:i.checked},function(){t.select()})}))),n=b.getBBox(),s=t.legendItemWidth=l.itemWidth||h+d+n.width+f+(T?20:0),o.itemHeight=i=n.height,c&&o.itemX-x+s>(v||r.chartWidth-2*f-x)&&(o.itemX=x,o.itemY+=y+o.lastLineHeight+_,o.lastLineHeight=0),o.maxItemWidth=ye(o.maxItemWidth,s),o.lastItemY=y+o.itemY+_,o.lastLineHeight=ye(i,o.lastLineHeight),t._legendItemPos=[o.itemX,o.itemY],c?o.itemX+=s:(o.itemY+=y+i+_,o.lastLineHeight=i),o.offsetWidth=v||ye(c?o.itemX-x:s,o.offsetWidth)},render:function(){var e,i,n,s,o=this,r=o.chart,a=r.renderer,l=o.group,c=o.box,h=o.options,u=o.padding,p=h.borderWidth,f=h.backgroundColor;o.itemX=o.initialItemX,o.itemY=o.initialItemY,o.offsetWidth=0,o.lastItemY=0,l||(o.group=l=a.g("legend").attr({zIndex:7}).add(),o.contentGroup=a.g().attr({zIndex:1}).add(l),o.scrollGroup=a.g().add(o.contentGroup)),o.renderTitle(),e=[],yi(r.series,function(t){var i=t.options;i.showInLegend&&!d(i.linkedTo)&&(e=e.concat(t.legendItems||("point"===i.legendType?t.data:t)))}),S(e,function(t,e){return(t.options&&t.options.legendIndex||0)-(e.options&&e.options.legendIndex||0)}),h.reversed&&e.reverse(),o.allItems=e,o.display=i=!!e.length,yi(e,function(t){o.renderItem(t)}),n=h.width||o.offsetWidth,s=o.lastItemY+o.lastLineHeight+o.titleHeight,s=o.handleOverflow(s),(p||f)&&(n+=u,s+=u,c?n>0&&s>0&&(c[c.isNew?"attr":"animate"](c.crisp(null,null,null,n,s)),c.isNew=!1):(o.box=c=a.rect(0,0,n,s,h.borderRadius,p||0).attr({stroke:h.borderColor,"stroke-width":p||0,fill:f||Ke}).add(l).shadow(h.shadow),c.isNew=!0),c[i?"show":"hide"]()),o.legendWidth=n,o.legendHeight=s,yi(e,function(t){o.positionItem(t)}),i&&l.align(t({width:n,height:s},h),!0,"spacingBox"),r.isResizing||this.positionCheckboxes()},handleOverflow:function(t){var e,i,n=this,s=this.chart,o=s.renderer,r=this.options,a=r.y,l="top"===r.verticalAlign,c=s.spacingBox.height+(l?-a:a)-this.padding,h=r.maxHeight,d=this.clipRect,u=r.navigation,p=f(u.animation,!0),g=u.arrowSize||12,m=this.nav;return"horizontal"===r.layout&&(c/=2),h&&(c=xe(c,h)),t>c&&!r.useHTML?(this.clipHeight=i=c-20-this.titleHeight,this.pageCount=e=_e(t/i),this.currentPage=f(this.currentPage,1),this.fullHeight=t,d||(d=n.clipRect=o.clipRect(0,0,9999,0),n.contentGroup.clip(d)),d.attr({height:i}),m||(this.nav=m=o.g().attr({zIndex:1}).add(this.group),this.up=o.symbol("triangle",0,0,g,g).on("click",function(){n.scroll(-1,p)}).add(m),this.pager=o.text("",15,10).css(u.style).add(m),this.down=o.symbol("triangle-down",0,0,g,g).on("click",function(){n.scroll(1,p)}).add(m)),n.scroll(0),t=c):m&&(d.attr({height:s.chartHeight}),m.hide(),this.scrollGroup.attr({translateY:1}),this.clipHeight=0),t},scroll:function(t,e){var i,n=this.pageCount,s=this.currentPage+t,o=this.clipHeight,r=this.options.navigation,a=r.activeColor,l=r.inactiveColor,c=this.pager,h=this.padding;s>n&&(s=n),s>0&&(e!==V&&z(e,this.chart),this.nav.attr({translateX:h,translateY:o+7+this.titleHeight,visibility:Ze}),this.up.attr({fill:1===s?l:a}).css({cursor:1===s?"default":"pointer"}),c.attr({text:s+"/"+this.pageCount}),this.down.attr({x:18+this.pager.getBBox().width,fill:s===n?l:a}).css({cursor:s===n?"default":"pointer"}),i=-xe(o*(s-1),this.fullHeight-o+h)+1,this.scrollGroup.animate({translateY:i}),c.attr({text:s+"/"+n}),this.currentPage=s,this.positionCheckboxes(i))}},U.prototype={init:function(t,i){var n,s=t.series;t.series=null,n=e($,t),n.series=t.series=s;var r=n.chart,a=r.margin,l=o(a)?a:[a,a,a,a];this.optionsMarginTop=f(r.marginTop,l[0]),this.optionsMarginRight=f(r.marginRight,l[1]),this.optionsMarginBottom=f(r.marginBottom,l[2]),this.optionsMarginLeft=f(r.marginLeft,l[3]);var c=r.events;this.runChartClick=c&&!!c.click,this.bounds={h:{},v:{}},this.callback=i,this.isResizing=0,this.options=n,this.axes=[],this.series=[],this.hasCartesianSeries=r.showAxes;var h,d=this;if(d.index=Ne.length,Ne.push(d),r.reflow!==!1&&ki(d,"load",function(){d.initReflow()}),c)for(h in c)ki(d,h,c[h]);d.xAxis=[],d.yAxis=[],d.animation=Re?!1:f(r.animation,!0),d.pointCount=0,d.counters=new C,d.firstRender()},initSeries:function(t){var e,i=this,n=i.options.chart,s=t.type||n.type||n.defaultSeriesType,o=pi[s];return o||I(17,!0),e=new o,e.init(this,t),e},addSeries:function(t,e,i){var n,s=this;return t&&(e=f(e,!0),Ti(s,"addSeries",{options:t},function(){n=s.initSeries(t),s.isDirtyLegend=!0,e&&s.redraw(i)})),n},addAxis:function(t,i,n,s){var o,r=i?"xAxis":"yAxis",a=this.options;o=new W(this,e(t,{index:this[r].length})),a[r]=p(a[r]||{}),a[r].push(t),f(n,!0)&&this.redraw(s)},isInsidePlot:function(t,e,i){var n=i?e:t,s=i?t:e;return n>=0&&n<=this.plotWidth&&s>=0&&s<=this.plotHeight},adjustTickAmounts:function(){this.options.chart.alignTicks!==!1&&yi(this.axes,function(t){t.adjustTickAmount()}),this.maxTicks=null},redraw:function(t){var e,i,n=this,s=n.axes,o=n.series,r=n.pointer,a=n.legend,l=n.isDirtyLegend,c=n.isDirtyBox,h=o.length,d=h,u=n.renderer,p=u.isHidden(),f=[];for(z(t,n),p&&n.cloneRenderTo();d--;)if(i=o[d],i.isDirty&&i.options.stacking){e=!0;break}if(e)for(d=h;d--;)i=o[d],i.options.stacking&&(i.isDirty=!0);yi(o,function(t){t.isDirty&&"point"===t.options.legendType&&(l=!0)}),l&&a.options.enabled&&(a.render(),n.isDirtyLegend=!1),n.hasCartesianSeries&&(n.isResizing||(n.maxTicks=null,yi(s,function(t){t.setScale()})),n.adjustTickAmounts(),n.getMargins(),yi(s,function(t){t.isDirtyExtremes&&(t.isDirtyExtremes=!1,f.push(function(){Ti(t,"afterSetExtremes",t.getExtremes())})),(t.isDirty||c||e)&&(t.redraw(),c=!0)})),c&&n.drawChartBox(),yi(o,function(t){t.isDirty&&t.visible&&(!t.isCartesian||t.xAxis)&&t.redraw()}),r&&r.reset&&r.reset(!0),u.draw(),Ti(n,"redraw"),p&&n.cloneRenderTo(!0),yi(f,function(t){t.call()})},showLoading:function(e){var i=this,n=i.options,s=i.loadingDiv,o=n.loading;s||(i.loadingDiv=s=m(Xe,{className:qe+"loading"},t(o.style,{zIndex:10,display:Ke}),i.container),i.loadingSpan=m("span",null,o.labelStyle,s)),i.loadingSpan.innerHTML=e||n.lang.loading,i.loadingShown||(g(s,{opacity:0,display:"",left:i.plotLeft+$e,top:i.plotTop+$e,width:i.plotWidth+$e,height:i.plotHeight+$e}),Si(s,{opacity:o.style.opacity},{duration:o.showDuration||0}),i.loadingShown=!0)},hideLoading:function(){var t=this.options,e=this.loadingDiv;e&&Si(e,{opacity:0},{duration:t.loading.hideDuration||100,complete:function(){g(e,{display:Ke})}}),this.loadingShown=!1},get:function(t){var e,i,n,s=this,o=s.axes,r=s.series;for(e=0;e<o.length;e++)if(o[e].options.id===t)return o[e];for(e=0;e<r.length;e++)if(r[e].options.id===t)return r[e];for(e=0;e<r.length;e++)for(n=r[e].points||[],i=0;i<n.length;i++)if(n[i].id===t)return n[i];return null},getAxes:function(){var t,e,i=this,n=this.options,s=n.xAxis=p(n.xAxis||{}),o=n.yAxis=p(n.yAxis||{});yi(s,function(t,e){t.index=e,t.isX=!0}),yi(o,function(t,e){t.index=e}),t=s.concat(o),yi(t,function(t){e=new W(i,t)}),i.adjustTickAmounts()},getSelectedPoints:function(){var t=[];return yi(this.series,function(e){t=t.concat(xi(e.points||[],function(t){return t.selected}))}),t},getSelectedSeries:function(){return xi(this.series,function(t){return t.selected})},showResetZoom:function(){var t=this,e=$.lang,i=t.options.chart.resetZoomButton,n=i.theme,s=n.states,o="chart"===i.relativeTo?null:"plotBox";this.resetZoomButton=t.renderer.button(e.resetZoom,null,null,function(){t.zoomOut()},n,s&&s.hover).attr({align:i.position.align,title:e.resetZoomTitle}).add().align(i.position,!1,o)},zoomOut:function(){var t=this;Ti(t,"selection",{resetSelection:!0},function(){t.zoom()})},zoom:function(t){var e,i,n=this,s=n.pointer,r=!1;!t||t.resetSelection?yi(n.axes,function(t){e=t.zoom()}):yi(t.xAxis.concat(t.yAxis),function(t){var i=t.axis,n=i.isXAxis;(s[n?"zoomX":"zoomY"]||s[n?"pinchX":"pinchY"])&&(e=i.zoom(t.min,t.max),i.displayBtn&&(r=!0))}),i=n.resetZoomButton,r&&!i?n.showResetZoom():!r&&o(i)&&(n.resetZoomButton=i.destroy()),e&&n.redraw(f(n.options.chart.animation,t&&t.animation,n.pointCount<100))},pan:function(t){var e=this,i=e.xAxis[0],n=e.mouseDownX,s=i.pointRange/2,o=i.getExtremes(),r=i.translate(n-t,!0)+s,a=i.translate(n+e.plotWidth-t,!0)-s,l=e.hoverPoints;l&&yi(l,function(t){t.setState()}),i.series.length&&r>xe(o.dataMin,o.min)&&a<ye(o.dataMax,o.max)&&i.setExtremes(r,a,!0,!1,{trigger:"pan"}),e.mouseDownX=t,g(e.container,{cursor:"move"})},setTitle:function(t,i){var n,s,o=this,r=o.options;n=r.title=e(r.title,t),s=r.subtitle=e(r.subtitle,i),yi([["title",t,n],["subtitle",i,s]],function(t){var e=t[0],i=o[e],n=t[1],s=t[2];i&&n&&(o[e]=i=i.destroy()),s&&s.text&&!i&&(o[e]=o.renderer.text(s.text,0,0,s.useHTML).attr({align:s.align,"class":qe+e,zIndex:s.zIndex||4}).css(s.style).add().align(s,!1,"spacingBox"))})},getChartSize:function(){var t=this,e=t.options.chart,i=t.renderToClone||t.renderTo;t.containerWidth=mi(i,"width"),t.containerHeight=mi(i,"height"),t.chartWidth=ye(0,e.width||t.containerWidth||600),t.chartHeight=ye(0,f(e.height,t.containerHeight>19?t.containerHeight:400))},cloneRenderTo:function(t){var e=this.renderToClone,i=this.container;t?e&&(this.renderTo.appendChild(i),L(e),delete this.renderToClone):(i&&this.renderTo.removeChild(i),this.renderToClone=e=this.renderTo.cloneNode(0),g(e,{position:je,top:"-9999px",display:"block"}),pe.body.appendChild(e),i&&e.appendChild(i))},getContainer:function(){var e,i,o,r,a,l,c=this,h=c.options.chart,d="data-highcharts-chart";c.renderTo=r=h.renderTo,l=qe+Be++,s(r)&&(c.renderTo=r=pe.getElementById(r)),r||I(13,!0),a=n(u(r,d)),!isNaN(a)&&Ne[a]&&Ne[a].destroy(),u(r,d,c.index),r.innerHTML="",r.offsetWidth||c.cloneRenderTo(),c.getChartSize(),i=c.chartWidth,o=c.chartHeight,c.container=e=m(Xe,{className:qe+"container"+(h.className?" "+h.className:""),id:l},t({position:Ue,overflow:Ve,width:i+$e,height:o+$e,textAlign:"left",lineHeight:"normal",zIndex:0,"-webkit-tap-highlight-color":"rgba(0,0,0,0)"},h.style),c.renderToClone||r),c._cursor=e.style.cursor,c.renderer=h.forExport?new Oi(e,i,o,!0):new q(e,i,o),Re&&c.renderer.create(c,e,i,o)},getMargins:function(){var t,e,i=this,n=i.options.chart,s=n.spacingTop,o=n.spacingRight,r=n.spacingBottom,a=n.spacingLeft,l=i.legend,c=i.optionsMarginTop,h=i.optionsMarginLeft,u=i.optionsMarginRight,p=i.optionsMarginBottom,g=i.options.title,m=i.options.subtitle,v=i.options.legend,_=f(v.margin,10),y=v.x,x=v.y,b=v.align,w=v.verticalAlign;i.resetMargins(),t=i.axisOffset,!i.title&&!i.subtitle||d(i.optionsMarginTop)||(e=ye(i.title&&!g.floating&&!g.verticalAlign&&g.y||0,i.subtitle&&!m.floating&&!m.verticalAlign&&m.y||0),e&&(i.plotTop=ye(i.plotTop,e+f(g.margin,15)+s))),l.display&&!v.floating&&("right"===b?d(u)||(i.marginRight=ye(i.marginRight,l.legendWidth-y+_+o)):"left"===b?d(h)||(i.plotLeft=ye(i.plotLeft,l.legendWidth+y+_+a)):"top"===w?d(c)||(i.plotTop=ye(i.plotTop,l.legendHeight+x+_+s)):"bottom"===w&&(d(p)||(i.marginBottom=ye(i.marginBottom,l.legendHeight-x+_+r)))),i.extraBottomMargin&&(i.marginBottom+=i.extraBottomMargin),i.extraTopMargin&&(i.plotTop+=i.extraTopMargin),i.hasCartesianSeries&&yi(i.axes,function(t){t.getOffset()}),d(h)||(i.plotLeft+=t[3]),d(c)||(i.plotTop+=t[0]),d(p)||(i.marginBottom+=t[2]),d(u)||(i.marginRight+=t[1]),i.setChartSize()},initReflow:function(){function t(t){var o=n.width||mi(s,"width"),r=n.height||mi(s,"height"),a=t?t.target:fe;i.hasUserSize||!o||!r||a!==fe&&a!==pe||((o!==i.containerWidth||r!==i.containerHeight)&&(clearTimeout(e),i.reflowTimeout=e=setTimeout(function(){i.container&&(i.setSize(o,r,!1),i.hasUserSize=null)},100)),i.containerWidth=o,i.containerHeight=r)}var e,i=this,n=i.options.chart,s=i.renderTo;ki(fe,"resize",t),ki(i,"destroy",function(){Mi(fe,"resize",t)})},setSize:function(t,e,i){var n,s,o,r=this;r.isResizing+=1,o=function(){r&&Ti(r,"endResize",null,function(){r.isResizing-=1})},z(i,r),r.oldChartHeight=r.chartHeight,r.oldChartWidth=r.chartWidth,d(t)&&(r.chartWidth=n=ye(0,me(t)),r.hasUserSize=!!n),d(e)&&(r.chartHeight=s=ye(0,me(e))),g(r.container,{width:n+$e,height:s+$e}),r.setChartSize(!0),r.renderer.setSize(n,s,i),r.maxTicks=null,yi(r.axes,function(t){t.isDirty=!0,t.setScale()}),yi(r.series,function(t){t.isDirty=!0}),r.isDirtyLegend=!0,r.isDirtyBox=!0,r.getMargins(),r.redraw(i),r.oldChartHeight=null,Ti(r,"resize"),J===!1?o():setTimeout(o,J&&J.duration||500)},setChartSize:function(t){var e,i,n,s,o,r,a,l=this,c=l.inverted,h=l.renderer,d=l.chartWidth,u=l.chartHeight,p=l.options.chart,f=p.spacingTop,g=p.spacingRight,m=p.spacingBottom,v=p.spacingLeft,_=l.clipOffset;l.plotLeft=n=me(l.plotLeft),l.plotTop=s=me(l.plotTop),l.plotWidth=o=ye(0,me(d-n-l.marginRight)),l.plotHeight=r=ye(0,me(u-s-l.marginBottom)),l.plotSizeX=c?r:o,l.plotSizeY=c?o:r,l.plotBorderWidth=a=p.plotBorderWidth||0,l.spacingBox=h.spacingBox={x:v,y:f,width:d-v-g,height:u-f-m},l.plotBox=h.plotBox={x:n,y:s,width:o,height:r},e=_e(ye(a,_[3])/2),i=_e(ye(a,_[0])/2),l.clipBox={x:e,y:i,width:ve(l.plotSizeX-ye(a,_[1])/2-e),height:ve(l.plotSizeY-ye(a,_[2])/2-i)},t||yi(l.axes,function(t){t.setAxisSize(),t.setAxisTranslation()})},resetMargins:function(){var t=this,e=t.options.chart,i=e.spacingTop,n=e.spacingRight,s=e.spacingBottom,o=e.spacingLeft;t.plotTop=f(t.optionsMarginTop,i),t.marginRight=f(t.optionsMarginRight,n),t.marginBottom=f(t.optionsMarginBottom,s),t.plotLeft=f(t.optionsMarginLeft,o),t.axisOffset=[0,0,0,0],t.clipOffset=[0,0,0,0]},drawChartBox:function(){var t,e,i=this,n=i.options.chart,s=i.renderer,o=i.chartWidth,r=i.chartHeight,a=i.chartBackground,l=i.plotBackground,c=i.plotBorder,h=i.plotBGImage,d=n.borderWidth||0,u=n.backgroundColor,p=n.plotBackgroundColor,f=n.plotBackgroundImage,g=n.plotBorderWidth||0,m=i.plotLeft,v=i.plotTop,_=i.plotWidth,y=i.plotHeight,x=i.plotBox,b=i.clipRect,w=i.clipBox;t=d+(n.shadow?8:0),(d||u)&&(a?a.animate(a.crisp(null,null,null,o-t,r-t)):(e={fill:u||Ke},d&&(e.stroke=n.borderColor,e["stroke-width"]=d),i.chartBackground=s.rect(t/2,t/2,o-t,r-t,n.borderRadius,d).attr(e).add().shadow(n.shadow))),p&&(l?l.animate(x):i.plotBackground=s.rect(m,v,_,y,0).attr({fill:p}).add().shadow(n.plotShadow)),f&&(h?h.animate(x):i.plotBGImage=s.image(f,m,v,_,y).add()),b?b.animate({width:w.width,height:w.height}):i.clipRect=s.clipRect(w),g&&(c?c.animate(c.crisp(null,m,v,_,y)):i.plotBorder=s.rect(m,v,_,y,0,g).attr({stroke:n.plotBorderColor,"stroke-width":g,zIndex:1}).add()),i.isDirtyBox=!1},propFromSeries:function(){var t,e,i,n=this,s=n.options.chart,o=n.options.series;yi(["inverted","angular","polar"],function(r){for(t=pi[s.type||s.defaultSeriesType],i=n[r]||s[r]||t&&t.prototype[r],e=o&&o.length;!i&&e--;)t=pi[o[e].type],t&&t.prototype[r]&&(i=!0);n[r]=i})},render:function(){var e,i=this,s=i.axes,o=i.renderer,r=i.options,a=r.labels,l=r.credits;i.setTitle(),i.legend=new j(i,r.legend),yi(s,function(t){t.setScale()}),i.getMargins(),i.maxTicks=null,yi(s,function(t){t.setTickPositions(!0),t.setMaxTicks()}),i.adjustTickAmounts(),i.getMargins(),i.drawChartBox(),i.hasCartesianSeries&&yi(s,function(t){t.render()}),i.seriesGroup||(i.seriesGroup=o.g("series-group").attr({zIndex:3}).add()),yi(i.series,function(t){t.translate(),t.setTooltipPoints(),t.render()}),a.items&&yi(a.items,function(e){var s=t(a.style,e.style),r=n(s.left)+i.plotLeft,l=n(s.top)+i.plotTop+12;delete s.left,delete s.top,o.text(e.html,r,l).attr({zIndex:2}).css(s).add()}),l.enabled&&!i.credits&&(e=l.href,i.credits=o.text(l.text,0,0).on("click",function(){e&&(location.href=e)}).attr({align:l.position.align,zIndex:8}).css(l.style).add().align(l.position)),i.hasRendered=!0},destroy:function(){var t,e=this,i=e.axes,n=e.series,s=e.container,o=s&&s.parentNode;for(Ti(e,"destroy"),Ne[e.index]=V,e.renderTo.removeAttribute("data-highcharts-chart"),Mi(e),t=i.length;t--;)i[t]=i[t].destroy();for(t=n.length;t--;)n[t]=n[t].destroy();yi(["title","subtitle","chartBackground","plotBackground","plotBGImage","plotBorder","seriesGroup","clipRect","credits","pointer","scroller","rangeSelector","legend","resetZoomButton","tooltip","renderer"],function(t){var i=e[t];i&&i.destroy&&(e[t]=i.destroy())}),s&&(s.innerHTML="",Mi(s),o&&L(s));for(t in e)delete e[t]},isReadyToRender:function(){var t=this;return!ze&&fe==fe.top&&"complete"!==pe.readyState||Re&&!fe.canvg?(Re?Ei.push(function(){t.firstRender()},t.options.global.canvasToolsURL):pe.attachEvent("onreadystatechange",function(){pe.detachEvent("onreadystatechange",t.firstRender),"complete"===pe.readyState&&t.firstRender()
}),!1):!0},firstRender:function(){var t=this,e=t.options,i=t.callback;t.isReadyToRender()&&(t.getContainer(),Ti(t,"init"),t.resetMargins(),t.setChartSize(),t.propFromSeries(),t.getAxes(),yi(e.series||[],function(e){t.initSeries(e)}),Ti(t,"beforeRender"),t.pointer=new X(t,e),t.render(),t.renderer.draw(),i&&i.apply(t,[t]),yi(t.callbacks,function(e){e.apply(t,[t])}),t.cloneRenderTo(!0),Ti(t,"load"))}},U.prototype.callbacks=[];var Bi=function(){};Bi.prototype={init:function(t,e,i){var n,s=this;return s.series=t,s.applyOptions(e,i),s.pointAttr={},t.options.colorByPoint&&(n=t.options.colors||t.chart.options.colors,s.color=s.color||n[t.colorCounter++],t.colorCounter===n.length&&(t.colorCounter=0)),t.chart.pointCount++,s},applyOptions:function(e,i){var n=this,s=n.series,o=s.pointValKey;return e=Bi.prototype.optionsToObject.call(this,e),t(n,e),n.options=n.options?t(n.options,e):e,o&&(n.y=n[o]),n.x===V&&s&&(n.x=i===V?s.autoIncrement():i),n},optionsToObject:function(t){var e,i,n=this.series,s=n.pointArrayMap||["y"],o=s.length,a=0,l=0;if("number"==typeof t||null===t)e={y:t};else if(r(t))for(e={},t.length>o&&(i=typeof t[0],"string"===i?e.name=t[0]:"number"===i&&(e.x=t[0]),a++);o>l;)e[s[l++]]=t[a++];else"object"==typeof t&&(e=t,t.dataLabels&&(n._hasPointLabels=!0),t.marker&&(n._hasPointMarkers=!0));return e},destroy:function(){var t,e=this,i=e.series,n=i.chart,s=n.hoverPoints;n.pointCount--,s&&(e.setState(),h(s,e),s.length||(n.hoverPoints=null)),e===n.hoverPoint&&e.onMouseOut(),(e.graphic||e.dataLabel)&&(Mi(e),e.destroyElements()),e.legendItem&&n.legend.destroyItem(e);for(t in e)e[t]=null},destroyElements:function(){for(var t,e=this,i=["graphic","dataLabel","dataLabelUpper","group","connector","shadowGroup"],n=6;n--;)t=i[n],e[t]&&(e[t]=e[t].destroy())},getLabelConfig:function(){var t=this;return{x:t.category,y:t.y,key:t.name||t.category,series:t.series,point:t,percentage:t.percentage,total:t.total||t.stackTotal}},select:function(t,e){var i=this,n=i.series,s=n.chart;t=f(t,!i.selected),i.firePointEvent(t?"select":"unselect",{accumulate:e},function(){i.selected=i.options.selected=t,n.options.data[_i(i,n.data)]=i.options,i.setState(t&&ni),e||yi(s.getSelectedPoints(),function(t){t.selected&&t!==i&&(t.selected=t.options.selected=!1,n.options.data[_i(t,n.data)]=t.options,t.setState(ei),t.firePointEvent("unselect"))})})},onMouseOver:function(t){var e=this,i=e.series,n=i.chart,s=n.tooltip,o=n.hoverPoint;o&&o!==e&&o.onMouseOut(),e.firePointEvent("mouseOver"),!s||s.shared&&!i.noSharedTooltip||s.refresh(e,t),e.setState(ii),n.hoverPoint=e},onMouseOut:function(){var t=this.series.chart,e=t.hoverPoints;e&&-1!==_i(this,e)||(this.firePointEvent("mouseOut"),this.setState(),t.hoverPoint=null)},tooltipFormatter:function(t){var e=this.series,i=e.tooltipOptions,n=f(i.valueDecimals,""),s=i.valuePrefix||"",o=i.valueSuffix||"";return yi(e.pointArrayMap||["y"],function(e){e="{point."+e,(s||o)&&(t=t.replace(e+"}",s+e+"}"+o)),t=t.replace(e+"}",e+":,."+n+"f}")}),w(t,{point:this,series:this.series})},update:function(t,e,i){var n,s=this,r=s.series,a=s.graphic,l=r.data,c=r.chart;e=f(e,!0),s.firePointEvent("update",{options:t},function(){s.applyOptions(t),o(t)&&(r.getAttribs(),a&&a.attr(s.pointAttr[r.state])),n=_i(s,l),r.xData[n]=s.x,r.yData[n]=r.toYData?r.toYData(s):s.y,r.zData[n]=s.z,r.options.data[n]=s.options,r.isDirty=!0,r.isDirtyData=!0,e&&c.redraw(i)})},remove:function(t,e){var i,n=this,s=n.series,o=s.chart,r=s.data;z(e,o),t=f(t,!0),n.firePointEvent("remove",null,function(){i=_i(n,r),r.splice(i,1),s.options.data.splice(i,1),s.xData.splice(i,1),s.yData.splice(i,1),s.zData.splice(i,1),n.destroy(),s.isDirty=!0,s.isDirtyData=!0,t&&o.redraw()})},firePointEvent:function(t,e,i){var n=this,s=this.series,o=s.options;(o.point.events[t]||n.options&&n.options.events&&n.options.events[t])&&this.importEvents(),"click"===t&&o.allowPointSelect&&(i=function(t){n.select(null,t.ctrlKey||t.metaKey||t.shiftKey)}),Ti(this,t,e,i)},importEvents:function(){if(!this.hasImportedEvents){var t,i=this,n=e(i.series.options.point,i.options),s=n.events;i.events=s;for(t in s)ki(i,t,s[t]);this.hasImportedEvents=!0}},setState:function(t){var i,n,s=this,o=s.plotX,r=s.plotY,a=s.series,l=a.options.states,c=Ai[a.type].marker&&a.options.marker,h=c&&!c.enabled,d=c&&c.states[t],u=d&&d.enabled===!1,p=a.stateMarkerGraphic,f=s.marker||{},g=a.chart,m=s.pointAttr;t=t||ei,t===s.state||s.selected&&t!==ni||l[t]&&l[t].enabled===!1||t&&(u||h&&!d.enabled)||(s.graphic?(i=c&&s.graphic.symbolName&&m[t].r,s.graphic.attr(e(m[t],i?{x:o-i,y:r-i,width:2*i,height:2*i}:{}))):(t&&d&&(i=d.radius,n=f.symbol||a.symbol,p&&p.currentSymbol!==n&&(p=p.destroy()),p?p.attr({x:o-i,y:r-i}):(a.stateMarkerGraphic=p=g.renderer.symbol(n,o-i,r-i,2*i,2*i).attr(m[t]).add(a.markerGroup),p.currentSymbol=n)),p&&p[t&&g.isInsidePlot(o,r)?"show":"hide"]()),s.state=t)}};var Fi=function(){};Fi.prototype={isCartesian:!0,type:"line",pointClass:Bi,sorted:!0,requireSorting:!0,pointAttrToOptions:{stroke:"lineColor","stroke-width":"lineWidth",fill:"fillColor",r:"radius"},colorCounter:0,init:function(e,i){var n,o,r,a=this,l=e.series;a.chart=e,a.options=i=a.setOptions(i),a.bindAxes(),t(a,{name:i.name,state:ei,pointAttr:{},visible:i.visible!==!1,selected:i.selected===!0}),Re&&(i.animation=!1),o=i.events;for(n in o)ki(a,n,o[n]);(o&&o.click||i.point&&i.point.events&&i.point.events.click||i.allowPointSelect)&&(e.runTrackerClick=!0),a.getColor(),a.getSymbol(),a.setData(i.data,!1),a.isCartesian&&(e.hasCartesianSeries=!0),l.push(a),a._i=l.length-1,S(l,function(t,e){return f(t.options.index,t._i)-f(e.options.index,t._i)}),yi(l,function(t,e){t.index=e,t.name=t.name||"Series "+(e+1)}),r=i.linkedTo,a.linkedSeries=[],s(r)&&(r=":previous"===r?l[a.index-1]:e.get(r),r&&(r.linkedSeries.push(a),a.linkedParent=r))},bindAxes:function(){var t,e=this,i=e.options,n=e.chart;e.isCartesian&&yi(["xAxis","yAxis"],function(s){yi(n[s],function(n){t=n.options,(i[s]===t.index||i[s]!==V&&i[s]===t.id||i[s]===V&&0===t.index)&&(n.series.push(e),e[s]=n,n.isDirty=!0)}),e[s]||I(18,!0)})},autoIncrement:function(){var t=this,e=t.options,i=t.xIncrement;return i=f(i,e.pointStart,0),t.pointInterval=f(t.pointInterval,e.pointInterval,1),t.xIncrement=i+t.pointInterval,i},getSegments:function(){var t,e=this,i=-1,n=[],s=e.points,o=s.length;if(o)if(e.options.connectNulls){for(t=o;t--;)null===s[t].y&&s.splice(t,1);s.length&&(n=[s])}else yi(s,function(t,e){null===t.y?(e>i+1&&n.push(s.slice(i+1,e)),i=e):e===o-1&&n.push(s.slice(i+1,e+1))});e.segments=n},setOptions:function(t){var i,n=this.chart,s=n.options,o=s.plotOptions,r=o[this.type];return this.userOptions=t,i=e(r,o.series,t),this.tooltipOptions=e(s.tooltip,i.tooltip),null===r.marker&&delete i.marker,i},getColor:function(){var t,e,i=this.options,n=this.userOptions,s=this.chart.options.colors,o=this.chart.counters;t=i.color||Ai[this.type].color,t||i.colorByPoint||(d(n._colorIndex)?e=n._colorIndex:(n._colorIndex=o.color,e=o.color++),t=s[e]),this.color=t,o.wrapColor(s.length)},getSymbol:function(){var t,e=this,i=e.userOptions,n=e.options.marker,s=e.chart,o=s.options.symbols,r=s.counters;e.symbol=n.symbol,e.symbol||(d(i._symbolIndex)?t=i._symbolIndex:(i._symbolIndex=r.symbol,t=r.symbol++),e.symbol=o[t]),/^url/.test(e.symbol)&&(n.radius=0),r.wrapSymbol(o.length)},drawLegendSymbol:function(t){var e,i,n,s=this.options,o=s.marker,r=t.options,a=r.symbolWidth,l=this.chart.renderer,c=this.legendGroup,h=t.baseline;s.lineWidth&&(n={"stroke-width":s.lineWidth},s.dashStyle&&(n.dashstyle=s.dashStyle),this.legendLine=l.path([Je,0,h-4,Qe,a,h-4]).attr(n).add(c)),o&&o.enabled&&(e=o.radius,this.legendSymbol=i=l.symbol(this.symbol,a/2-e,h-4-e,2*e,2*e).add(c))},addPoint:function(t,e,i,n){var s,o=this,r=o.options,a=o.data,l=o.graph,c=o.area,h=o.chart,d=o.xData,u=o.yData,p=o.zData,g=o.names,m=l&&l.shift||0,v=r.data;z(n,h),l&&i&&(l.shift=m+1),c&&(i&&(c.shift=m+1),c.isArea=!0),e=f(e,!0),s={series:o},o.pointClass.prototype.applyOptions.apply(s,[t]),d.push(s.x),u.push(o.toYData?o.toYData(s):s.y),p.push(s.z),g&&(g[s.x]=s.name),v.push(t),"point"===r.legendType&&o.generatePoints(),i&&(a[0]&&a[0].remove?a[0].remove(!1):(a.shift(),d.shift(),u.shift(),p.shift(),v.shift())),o.getAttribs(),o.isDirty=!0,o.isDirtyData=!0,e&&h.redraw()},setData:function(t,e){var i,n=this,o=n.points,l=n.options,c=n.chart,h=null,d=n.xAxis,u=d&&d.categories&&!d.categories.length?[]:null;n.xIncrement=null,n.pointRange=d&&d.categories?1:l.pointRange,n.colorCounter=0;var p,g=[],m=[],v=[],_=t?t.length:[],y=l.turboThreshold||1e3,x=n.pointArrayMap,b=x&&x.length,w=!!n.toYData;if(_>y){for(i=0;null===h&&_>i;)h=t[i],i++;if(a(h)){var k=f(l.pointStart,0),M=f(l.pointInterval,1);for(i=0;_>i;i++)g[i]=k,m[i]=t[i],k+=M;n.xIncrement=k}else if(r(h))if(b)for(i=0;_>i;i++)p=t[i],g[i]=p[0],m[i]=p.slice(1,b+1);else for(i=0;_>i;i++)p=t[i],g[i]=p[0],m[i]=p[1]}else for(i=0;_>i;i++)t[i]!==V&&(p={series:n},n.pointClass.prototype.applyOptions.apply(p,[t[i]]),g[i]=p.x,m[i]=w?n.toYData(p):p.y,v[i]=p.z,u&&p.name&&(u[i]=p.name));for(n.requireSorting&&g.length>1&&g[1]<g[0]&&I(15),s(m[0])&&I(14,!0),n.data=[],n.options.data=t,n.xData=g,n.yData=m,n.zData=v,n.names=u,i=o&&o.length||0;i--;)o[i]&&o[i].destroy&&o[i].destroy();d&&(d.minRange=d.userMinRange),n.isDirty=n.isDirtyData=c.isDirtyBox=!0,f(e,!0)&&c.redraw(!1)},remove:function(t,e){var i=this,n=i.chart;t=f(t,!0),i.isRemoving||(i.isRemoving=!0,Ti(i,"remove",null,function(){i.destroy(),n.isDirtyLegend=n.isDirtyBox=!0,t&&n.redraw(e)})),i.isRemoving=!1},processData:function(t){var e,i,n,s,o=this,r=o.xData,a=o.yData,l=r.length,c=0,h=l,d=o.xAxis,u=o.options,p=u.cropThreshold,f=o.isCartesian;if(f&&!o.isDirty&&!d.isDirty&&!o.yAxis.isDirty&&!t)return!1;if(f&&o.sorted&&(!p||l>p||o.forceCrop)){var g=d.getExtremes(),m=g.min,v=g.max;if(r[l-1]<m||r[0]>v)r=[],a=[];else if(r[0]<m||r[l-1]>v){for(s=0;l>s;s++)if(r[s]>=m){c=ye(0,s-1);break}for(;l>s;s++)if(r[s]>v){h=s+1;break}r=r.slice(c,h),a=a.slice(c,h),e=!0}}for(s=r.length-1;s>0;s--)i=r[s]-r[s-1],i>0&&(n===V||n>i)&&(n=i);o.cropped=e,o.cropStart=c,o.processedXData=r,o.processedYData=a,null===u.pointRange&&(o.pointRange=n||1),o.closestPointRange=n},generatePoints:function(){var t,e,i,n,s=this,o=s.options,r=o.data,a=s.data,l=s.processedXData,c=s.processedYData,h=s.pointClass,d=l.length,u=s.cropStart||0,f=s.hasGroupedData,g=[];if(!a&&!f){var m=[];m.length=r.length,a=s.data=m}for(n=0;d>n;n++)e=u+n,f?g[n]=(new h).init(s,[l[n]].concat(p(c[n]))):(a[e]?i=a[e]:r[e]!==V&&(a[e]=i=(new h).init(s,r[e],l[n])),g[n]=i);if(a&&(d!==(t=a.length)||f))for(n=0;t>n;n++)n!==u||f||(n+=d),a[n]&&(a[n].destroyElements(),a[n].plotX=V);s.data=a,s.points=g},translate:function(){this.processedXData||this.processData(),this.generatePoints();var t,e,i,n=this,s=n.options,o=s.stacking,r=n.xAxis,a=r.categories,l=n.yAxis,c=n.points,h=c.length,u=!!n.modifyValue,p="between"===s.pointPlacement,g=s.threshold;for(e=l.series.sort(function(t,e){return t.index-e.index}),i=e.length;i--;)if(e[i].visible){e[i]===n&&(t=!0);break}for(i=0;h>i;i++){var m,v,_=c[i],y=_.x,x=_.y,b=_.low,w=l.stacks[(g>x?"-":"")+n.stackKey];l.isLog&&0>=x&&(_.y=x=null),_.plotX=r.translate(y,0,0,0,1,p),o&&n.visible&&w&&w[y]&&(m=w[y],v=m.total,m.cum=b=m.cum-x,x=b+x,t&&(b=f(g,l.min)),l.isLog&&0>=b&&(b=null),"percent"===o&&(b=v?100*b/v:0,x=v?100*x/v:0),_.percentage=v?100*_.y/v:0,_.total=_.stackTotal=v,_.stackY=x),_.yBottom=d(b)?l.translate(b,0,1,0,1):null,u&&(x=n.modifyValue(x,_)),_.plotY="number"==typeof x&&1/0!==x?me(10*l.translate(x,0,1,0,1))/10:V,_.clientX=p?r.translate(y,0,0,0,1):_.plotX,_.negative=_.y<(g||0),_.category=a&&a[_.x]!==V?a[_.x]:_.x}n.getSegments()},setTooltipPoints:function(t){var e,i,n,s,o,r=this,a=[],l=r.xAxis,c=l?l.tooltipLen||l.len:r.chart.plotSizeX,h=[];if(r.options.enableMouseTracking!==!1){for(t&&(r.tooltipPoints=null),yi(r.segments||r.points,function(t){a=a.concat(t)}),l&&l.reversed&&(a=a.reverse()),e=a.length,o=0;e>o;o++)for(s=a[o],i=a[o-1]?n+1:0,n=a[o+1]?ye(0,ve((s.clientX+(a[o+1]?a[o+1].clientX:c))/2)):c;i>=0&&n>=i;)h[i++]=s;r.tooltipPoints=h}},tooltipHeaderFormatter:function(t){var e,i=this,n=i.tooltipOptions,s=n.xDateFormat,o=n.dateTimeLabelFormats,r=i.xAxis,l=r&&"datetime"===r.options.type,c=n.headerFormat,h=r&&r.closestPointRange;if(l&&!s)if(h){for(e in te)if(te[e]>=h){s=o[e];break}}else s=o.day;return l&&s&&a(t.key)&&(c=c.replace("{point.key}","{point.key:"+s+"}")),w(c,{point:t,series:i})},onMouseOver:function(){var t=this,e=t.chart,i=e.hoverSeries;i&&i!==t&&i.onMouseOut(),t.options.events.mouseOver&&Ti(t,"mouseOver"),t.setState(ii),e.hoverSeries=t},onMouseOut:function(){var t=this,e=t.options,i=t.chart,n=i.tooltip,s=i.hoverPoint;s&&s.onMouseOut(),t&&e.events.mouseOut&&Ti(t,"mouseOut"),!n||e.stickyTracking||n.shared&&!t.noSharedTooltip||n.hide(),t.setState(),i.hoverSeries=null},animate:function(e){var i,n,s,r=this,a=r.chart,l=a.renderer,c=r.options.animation,h=a.clipBox,d=a.inverted;c&&!o(c)&&(c=Ai[r.type].animation),s="_sharedClip"+c.duration+c.easing,e?(i=a[s],n=a[s+"m"],i||(a[s]=i=l.clipRect(t(h,{width:0})),a[s+"m"]=n=l.clipRect(-99,d?-a.plotLeft:-a.plotTop,99,d?a.chartWidth:a.chartHeight)),r.group.clip(i),r.markerGroup.clip(n),r.sharedClipKey=s):(i=a[s],i&&(i.animate({width:a.plotSizeX},c),a[s+"m"].animate({width:a.plotSizeX+99},c)),r.animate=null,r.animationTimeout=setTimeout(function(){r.afterAnimate()},c.duration))},afterAnimate:function(){var t=this.chart,e=this.sharedClipKey,i=this.group;i&&this.options.clip!==!1&&(i.clip(t.clipRect),this.markerGroup.clip()),setTimeout(function(){e&&t[e]&&(t[e]=t[e].destroy(),t[e+"m"]=t[e+"m"].destroy())},100)},drawPoints:function(){var e,i,n,s,o,r,a,l,c,h,d,u,p=this,g=p.points,m=p.chart,v=p.options,_=v.marker,y=p.markerGroup;if(_.enabled||p._hasPointMarkers)for(s=g.length;s--;)o=g[s],i=o.plotX,n=o.plotY,c=o.graphic,h=o.marker||{},d=_.enabled&&h.enabled===V||h.enabled,u=m.isInsidePlot(me(i),n,m.inverted),d&&n!==V&&!isNaN(n)&&null!==o.y?(e=o.pointAttr[o.selected?ni:ei],r=e.r,a=f(h.symbol,p.symbol),l=0===a.indexOf("url"),c?c.attr({visibility:u?ze?"inherit":Ze:Ve}).animate(t({x:i-r,y:n-r},c.symbolName?{width:2*r,height:2*r}:{})):u&&(r>0||l)&&(o.graphic=c=m.renderer.symbol(a,i-r,n-r,2*r,2*r).attr(e).add(y))):c&&(o.graphic=c.destroy())},convertAttribs:function(t,e,i,n){var s,o,r=this.pointAttrToOptions,a={};t=t||{},e=e||{},i=i||{},n=n||{};for(s in r)o=r[s],a[s]=f(t[o],e[s],i[s],n[s]);return a},getAttribs:function(){var e,i,n,s,o,r,a=this,l=a.options,c=Ai[a.type].marker?l.marker:l,h=c.states,u=h[ii],p=a.color,f={stroke:p,fill:p},g=a.points||[],m=[],v=a.pointAttrToOptions,_=l.negativeColor;for(l.marker?(u.radius=u.radius||c.radius+2,u.lineWidth=u.lineWidth||c.lineWidth+1):u.color=u.color||Ii(u.color||p).brighten(u.brightness).get(),m[ei]=a.convertAttribs(c,f),yi([ii,ni],function(t){m[t]=a.convertAttribs(h[t],m[ei])}),a.pointAttr=m,i=g.length;i--;){if(n=g[i],c=n.options&&n.options.marker||n.options,c&&c.enabled===!1&&(c.radius=0),n.negative&&_&&(n.color=n.fillColor=_),o=l.colorByPoint||n.color,n.options)for(r in v)d(c[v[r]])&&(o=!0);o?(c=c||{},s=[],h=c.states||{},e=h[ii]=h[ii]||{},l.marker||(e.color=Ii(e.color||n.color).brighten(e.brightness||u.brightness).get()),s[ei]=a.convertAttribs(t({color:n.color},c),m[ei]),s[ii]=a.convertAttribs(h[ii],m[ii],s[ei]),s[ni]=a.convertAttribs(h[ni],m[ni],s[ei]),n.negative&&l.marker&&_&&(s[ei].fill=s[ii].fill=s[ni].fill=a.convertAttribs({fillColor:_}).fill)):s=m,n.pointAttr=s}},update:function(i,n){var s=this.chart,o=this.userOptions,r=this.type;i=e(o,{animation:!1,index:this.index,pointStart:this.xData[0]},i),this.remove(!1),t(this,pi[i.type||r].prototype),this.init(s,i),f(n,!0)&&s.redraw(!1)},destroy:function(){var t,e,i,n,s,o=this,r=o.chart,a=/AppleWebKit\/533/.test(Ce),l=o.data||[];for(Ti(o,"destroy"),Mi(o),yi(["xAxis","yAxis"],function(t){s=o[t],s&&(h(s.series,o),s.isDirty=s.forceRedraw=!0)}),o.legendItem&&o.chart.legend.destroyItem(o),e=l.length;e--;)i=l[e],i&&i.destroy&&i.destroy();o.points=null,clearTimeout(o.animationTimeout),yi(["area","graph","dataLabelsGroup","group","markerGroup","tracker","graphNeg","areaNeg","posClip","negClip"],function(e){o[e]&&(t=a&&"group"===e?"hide":"destroy",o[e][t]())}),r.hoverSeries===o&&(r.hoverSeries=null),h(r.series,o);for(n in o)delete o[n]},drawDataLabels:function(){var t,i,n,s,o=this,r=o.options,a=r.dataLabels,l=o.points;(a.enabled||o._hasPointLabels)&&(o.dlProcessOptions&&o.dlProcessOptions(a),s=o.plotGroup("dataLabelsGroup","data-labels",o.visible?Ze:Ve,a.zIndex||6),i=a,yi(l,function(r){var l,c,h,u,p,g=r.dataLabel,m=r.connector,v=!0;if(t=r.options&&r.options.dataLabels,l=i.enabled||t&&t.enabled,g&&!l)r.dataLabel=g.destroy();else if(l){if(p=a.rotation,a=e(i,t),c=r.getLabelConfig(),n=a.format?w(a.format,c):a.formatter.call(c,a),a.style.color=f(a.color,a.style.color,o.color,"black"),g)d(n)?(g.attr({text:n}),v=!1):(r.dataLabel=g=g.destroy(),m&&(r.connector=m.destroy()));else if(d(n)){h={fill:a.backgroundColor,stroke:a.borderColor,"stroke-width":a.borderWidth,r:a.borderRadius||0,rotation:p,padding:a.padding,zIndex:1};for(u in h)h[u]===V&&delete h[u];g=r.dataLabel=o.chart.renderer[p?"text":"label"](n,0,-999,null,null,null,a.useHTML).attr(h).css(a.style).add(s).shadow(a.shadow)}g&&o.alignDataLabel(r,g,a,null,v)}}))},alignDataLabel:function(e,i,n,s,o){var r,a=this.chart,l=a.inverted,c=f(e.plotX,-999),h=f(e.plotY,-999),d=i.getBBox();s=t({x:l?a.plotWidth-h:c,y:me(l?a.plotHeight-c:h),width:0,height:0},s),t(n,{width:d.width,height:d.height}),n.rotation?(r={align:n.align,x:s.x+n.x+s.width/2,y:s.y+n.y+s.height/2},i[o?"attr":"animate"](r)):(i.align(n,null,s),r=i.alignAttr),i.attr({visibility:n.crop===!1||a.isInsidePlot(c,h,l)?a.renderer.isSVG?"inherit":Ze:Ve})},getSegmentPath:function(t){var e=this,i=[],n=e.options.step;return yi(t,function(s,o){var r,a=s.plotX,l=s.plotY;e.getPointSpline?i.push.apply(i,e.getPointSpline(t,s,o)):(i.push(o?Qe:Je),n&&o&&(r=t[o-1],"right"===n?i.push(r.plotX,l):"center"===n?i.push((r.plotX+a)/2,r.plotY,(r.plotX+a)/2,l):i.push(a,r.plotY)),i.push(s.plotX,s.plotY))}),i},getGraphPath:function(){var t,e=this,i=[],n=[];return yi(e.segments,function(s){t=e.getSegmentPath(s),s.length>1?i=i.concat(t):n.push(s[0])}),e.singlePoints=n,e.graphPath=i,i},drawGraph:function(){var t=this,e=this.options,i=[["graph",e.lineColor||this.color]],n=e.lineWidth,s=e.dashStyle,o=this.getGraphPath(),r=e.negativeColor;r&&i.push(["graphNeg",r]),yi(i,function(i,r){var a,l=i[0],c=t[l];c?(Pi(c),c.animate({d:o})):n&&o.length&&(a={stroke:i[1],"stroke-width":n,zIndex:1},s&&(a.dashstyle=s),t[l]=t.chart.renderer.path(o).attr(a).add(t.group).shadow(!r&&e.shadow))})},clipNeg:function(){var t,e,i,n,s,o=this.options,r=this.chart,a=r.renderer,l=o.negativeColor,c=this.graph,h=this.area,d=this.posClip,u=this.negClip,p=r.chartWidth,f=r.chartHeight,g=ye(p,f);l&&(c||h)&&(t=_e(this.yAxis.len-this.yAxis.translate(o.threshold||0)),n={x:0,y:0,width:g,height:t},s={x:0,y:t,width:g,height:g-t},r.inverted&&a.isVML&&(n={x:r.plotWidth-t-r.plotLeft,y:0,width:p,height:f},s={x:t+r.plotLeft-p,y:0,width:r.plotLeft+t,height:p}),this.yAxis.reversed?(e=s,i=n):(e=n,i=s),d?(d.animate(e),u.animate(i)):(this.posClip=d=a.clipRect(e),this.negClip=u=a.clipRect(i),c&&(c.clip(d),this.graphNeg.clip(u)),h&&(h.clip(d),this.areaNeg.clip(u))))},invertGroups:function(){function t(){var t={width:e.yAxis.len,height:e.xAxis.len};yi(["group","markerGroup"],function(i){e[i]&&e[i].attr(t).invert()})}var e=this,i=e.chart;e.xAxis&&(ki(i,"resize",t),ki(e,"destroy",function(){Mi(i,"resize",t)}),t(),e.invertGroups=t)},plotGroup:function(t,e,i,n,s){var o=this[t],r=!o,a=this.chart,l=this.xAxis,c=this.yAxis;return r&&(this[t]=o=a.renderer.g(e).attr({visibility:i,zIndex:n||.1}).add(s)),o[r?"attr":"animate"]({translateX:l?l.left:a.plotLeft,translateY:c?c.top:a.plotTop,scaleX:1,scaleY:1}),o},render:function(){var t,e=this,i=e.chart,n=e.options,s=n.animation,o=s&&!!e.animate&&i.renderer.isSVG,r=e.visible?Ze:Ve,a=n.zIndex,l=e.hasRendered,c=i.seriesGroup;t=e.plotGroup("group","series",r,a,c),e.markerGroup=e.plotGroup("markerGroup","markers",r,a,c),o&&e.animate(!0),e.getAttribs(),t.inverted=e.isCartesian?i.inverted:!1,e.drawGraph&&(e.drawGraph(),e.clipNeg()),e.drawDataLabels(),e.drawPoints(),e.options.enableMouseTracking!==!1&&e.drawTracker(),i.inverted&&e.invertGroups(),n.clip===!1||e.sharedClipKey||l||t.clip(i.clipRect),o?e.animate():l||e.afterAnimate(),e.isDirty=e.isDirtyData=!1,e.hasRendered=!0},redraw:function(){var t=this,e=t.chart,i=t.isDirtyData,n=t.group,s=t.xAxis,o=t.yAxis;n&&(e.inverted&&n.attr({width:e.plotWidth,height:e.plotHeight}),n.animate({translateX:f(s&&s.left,e.plotLeft),translateY:f(o&&o.top,e.plotTop)})),t.translate(),t.setTooltipPoints(!0),t.render(),i&&Ti(t,"updatedData")},setState:function(t){var e,i=this,n=i.options,s=i.graph,o=i.graphNeg,r=n.states,a=n.lineWidth;if(t=t||ei,i.state!==t){if(i.state=t,r[t]&&r[t].enabled===!1)return;t&&(a=r[t].lineWidth||a+1),s&&!s.dashstyle&&(e={"stroke-width":a},s.attr(e),o&&o.attr(e))}},setVisible:function(t,e){var i,n=this,s=n.chart,o=n.legendItem,r=s.options.chart.ignoreHiddenSeries,a=n.visible;n.visible=t=n.userOptions.visible=t===V?!a:t,i=t?"show":"hide",yi(["group","dataLabelsGroup","markerGroup","tracker"],function(t){n[t]&&n[t][i]()}),s.hoverSeries===n&&n.onMouseOut(),o&&s.legend.colorizeItem(n,t),n.isDirty=!0,n.options.stacking&&yi(s.series,function(t){t.options.stacking&&t.visible&&(t.isDirty=!0)}),yi(n.linkedSeries,function(e){e.setVisible(t,!1)}),r&&(s.isDirtyBox=!0),e!==!1&&s.redraw(),Ti(n,i)},show:function(){this.setVisible(!0)},hide:function(){this.setVisible(!1)},select:function(t){var e=this;e.selected=t=t===V?!e.selected:t,e.checkbox&&(e.checkbox.checked=t),Ti(e,t?"select":"unselect")},drawTracker:function(){var t,e,i=this,n=i.options,s=n.trackByArea,o=[].concat(s?i.areaPath:i.graphPath),r=o.length,a=i.chart,l=a.pointer,c=a.renderer,h=a.options.tooltip.snap,d=i.tracker,u=n.cursor,p=u&&{cursor:u},f=i.singlePoints,g=function(){a.hoverSeries!==i&&i.onMouseOver()};if(r&&!s)for(e=r+1;e--;)o[e]===Je&&o.splice(e+1,0,o[e+1]-h,o[e+2],Qe),(e&&o[e]===Je||e===r)&&o.splice(e,0,Qe,o[e-2]+h,o[e-1]);for(e=0;e<f.length;e++)t=f[e],o.push(Je,t.plotX-h,t.plotY,Qe,t.plotX+h,t.plotY);d?d.attr({d:o}):(i.tracker=d=c.path(o).attr({"class":qe+"tracker","stroke-linejoin":"round",visibility:i.visible?Ze:Ve,stroke:ti,fill:s?ti:Ke,"stroke-width":n.lineWidth+(s?0:2*h),zIndex:2}).addClass(qe+"tracker").on("mouseover",g).on("mouseout",function(t){l.onTrackerMouseOut(t)}).css(p).add(i.markerGroup),He&&d.on("touchstart",g))}};var Ni=v(Fi);pi.line=Ni,Ai.area=e(Li,{threshold:0});var Wi=v(Fi,{type:"area",getSegments:function(){var t,e,i,n,s=[],o=[],r=[],a=this.xAxis,l=this.yAxis,c=l.stacks[this.stackKey],h={},d=this.points;if(this.options.stacking&&!this.cropped){for(i=0;i<d.length;i++)h[d[i].x]=d[i];for(n in c)r.push(+n);r.sort(function(t,e){return t-e}),yi(r,function(i){h[i]?o.push(h[i]):(t=a.translate(i),e=l.toPixels(c[i].cum,!0),o.push({y:null,plotX:t,clientX:t,plotY:e,yBottom:e,onMouseOver:Fe}))}),o.length&&s.push(o)}else Fi.prototype.getSegments.call(this),s=this.segments;this.segments=s},getSegmentPath:function(t){var e,i=Fi.prototype.getSegmentPath.call(this,t),n=[].concat(i),s=this.options,o=i.length;if(3===o&&n.push(Qe,i[1],i[2]),s.stacking&&!this.closedStacks)for(e=t.length-1;e>=0;e--)e<t.length-1&&s.step&&n.push(t[e+1].plotX,t[e].yBottom),n.push(t[e].plotX,t[e].yBottom);else this.closeSegment(n,t);return this.areaPath=this.areaPath.concat(n),i},closeSegment:function(t,e){var i=this.yAxis.getThreshold(this.options.threshold);t.push(Qe,e[e.length-1].plotX,i,Qe,e[0].plotX,i)},drawGraph:function(){this.areaPath=[],Fi.prototype.drawGraph.apply(this);var t=this,e=this.areaPath,i=this.options,n=i.negativeColor,s=[["area",this.color,i.fillColor]];n&&s.push(["areaNeg",i.negativeColor,i.negativeFillColor]),yi(s,function(n){var s=n[0],o=t[s];o?o.animate({d:e}):t[s]=t.chart.renderer.path(e).attr({fill:f(n[2],Ii(n[1]).setOpacity(i.fillOpacity||.75).get()),zIndex:0}).add(t.group)})},drawLegendSymbol:function(t,e){e.legendSymbol=this.chart.renderer.rect(0,t.baseline-11,t.options.symbolWidth,12,2).attr({zIndex:3}).add(e.legendGroup)}});pi.area=Wi,Ai.spline=e(Li);var Gi=v(Fi,{type:"spline",getPointSpline:function(t,e,i){var n,s,o,r,a,l=1.5,c=l+1,h=e.plotX,d=e.plotY,u=t[i-1],p=t[i+1];if(u&&p){var f,g=u.plotX,m=u.plotY,v=p.plotX,_=p.plotY;n=(l*h+g)/c,s=(l*d+m)/c,o=(l*h+v)/c,r=(l*d+_)/c,f=(r-s)*(o-h)/(o-n)+d-r,s+=f,r+=f,s>m&&s>d?(s=ye(m,d),r=2*d-s):m>s&&d>s&&(s=xe(m,d),r=2*d-s),r>_&&r>d?(r=ye(_,d),s=2*d-r):_>r&&d>r&&(r=xe(_,d),s=2*d-r),e.rightContX=o,e.rightContY=r}return i?(a=["C",u.rightContX||u.plotX,u.rightContY||u.plotY,n||h,s||d,h,d],u.rightContX=u.rightContY=null):a=[Je,h,d],a}});pi.spline=Gi,Ai.areaspline=e(Ai.area);var Xi=Wi.prototype,ji=v(Gi,{type:"areaspline",closedStacks:!0,getSegmentPath:Xi.getSegmentPath,closeSegment:Xi.closeSegment,drawGraph:Xi.drawGraph});pi.areaspline=ji,Ai.column=e(Li,{borderColor:"#FFFFFF",borderWidth:1,borderRadius:0,groupPadding:.2,marker:null,pointPadding:.1,minPointLength:0,cropThreshold:50,pointRange:null,states:{hover:{brightness:.1,shadow:!1},select:{color:"#C0C0C0",borderColor:"#000000",shadow:!1}},dataLabels:{align:null,verticalAlign:null,y:null},stickyTracking:!1,threshold:0});var Ui=v(Fi,{type:"column",tooltipOutsidePlot:!0,requireSorting:!1,pointAttrToOptions:{stroke:"borderColor","stroke-width":"borderWidth",fill:"color",r:"borderRadius"},trackerGroups:["group","dataLabelsGroup"],init:function(){Fi.prototype.init.apply(this,arguments);var t=this,e=t.chart;e.hasRendered&&yi(e.series,function(e){e.type===t.type&&(e.isDirty=!0)})},getColumnMetrics:function(){var t,e,i=this,n=i.chart,s=i.options,o=this.xAxis,r=o.reversed,a={},l=0;s.grouping===!1?l=1:yi(n.series,function(n){var s=n.options;n.type===i.type&&n.visible&&i.options.group===s.group&&(s.stacking?(t=n.stackKey,a[t]===V&&(a[t]=l++),e=a[t]):s.grouping!==!1&&(e=l++),n.columnIndex=e)});var c=xe(be(o.transA)*(o.ordinalSlope||s.pointRange||o.closestPointRange||1),o.len),h=c*s.groupPadding,u=c-2*h,p=u/l,g=s.pointWidth,m=d(g)?(p-g)/2:p*s.pointPadding,v=f(g,p-2*m),_=(r?l-(i.columnIndex||0):i.columnIndex)||0,y=m+(h+_*p-c/2)*(r?-1:1);return i.columnMetrics={width:v,offset:y}},translate:function(){var t=this,e=t.chart,i=t.options,n=i.stacking,s=i.borderWidth,o=t.yAxis,r=i.threshold,a=t.translatedThreshold=o.getThreshold(r),l=f(i.minPointLength,5),c=t.getColumnMetrics(),h=c.width,d=_e(ye(h,1+2*s)),u=c.offset;Fi.prototype.translate.apply(t),yi(t.points,function(i){var r,c=xe(ye(-999,i.plotY),o.len+999),p=f(i.yBottom,a),g=i.plotX+u,m=_e(xe(c,p)),v=_e(ye(c,p)-m),_=o.stacks[(i.y<0?"-":"")+t.stackKey];n&&t.visible&&_&&_[i.x]&&_[i.x].setOffset(u,d),be(v)<l&&l&&(v=l,m=be(m-a)>l?p-l:a-(o.translate(i.y,0,1,0,1)<=a?l:0)),i.barX=g,i.pointWidth=h,i.shapeType="rect",i.shapeArgs=r=e.renderer.Element.prototype.crisp.call(0,s,g,m,d,v),s%2&&(r.y-=1,r.height+=1)})},getSymbol:Fe,drawLegendSymbol:Wi.prototype.drawLegendSymbol,drawGraph:Fe,drawPoints:function(){var t,i=this,n=i.options,s=i.chart.renderer;yi(i.points,function(o){var r=o.plotY,a=o.graphic;r===V||isNaN(r)||null===o.y?a&&(o.graphic=a.destroy()):(t=o.shapeArgs,a?(Pi(a),a.animate(e(t))):o.graphic=a=s[o.shapeType](t).attr(o.pointAttr[o.selected?ni:ei]).add(i.group).shadow(n.shadow,null,n.stacking&&!n.borderRadius))})},drawTracker:function(){var t=this,e=t.chart.pointer,i=t.options.cursor,n=i&&{cursor:i},s=function(e){var i,n=e.target;for(t.onMouseOver();n&&!i;)i=n.point,n=n.parentNode;i!==V&&i.onMouseOver(e)};yi(t.points,function(t){t.graphic&&(t.graphic.element.point=t),t.dataLabel&&(t.dataLabel.element.point=t)}),t._hasTracking?t._hasTracking=!0:yi(t.trackerGroups,function(i){t[i]&&(t[i].addClass(qe+"tracker").on("mouseover",s).on("mouseout",function(t){e.onTrackerMouseOut(t)}).css(n),He&&t[i].on("touchstart",s))})},alignDataLabel:function(t,i,n,s,o){var r=this.chart,a=r.inverted,l=t.dlBox||t.shapeArgs,c=t.below||t.plotY>f(this.translatedThreshold,r.plotSizeY),h=f(n.inside,!!this.options.stacking);l&&(s=e(l),a&&(s={x:r.plotWidth-s.y-s.height,y:r.plotHeight-s.x-s.width,width:s.height,height:s.width}),h||(a?(s.x+=c?0:s.width,s.width=0):(s.y+=c?s.height:0,s.height=0))),n.align=f(n.align,!a||h?"center":c?"right":"left"),n.verticalAlign=f(n.verticalAlign,a||h?"middle":c?"top":"bottom"),Fi.prototype.alignDataLabel.call(this,t,i,n,s,o)},animate:function(t){var e,i=this,n=this.yAxis,s=i.options,o=this.chart.inverted,r={};ze&&(t?(r.scaleY=.001,e=xe(n.pos+n.len,ye(n.pos,n.toPixels(s.threshold))),o?r.translateX=e-n.len:r.translateY=e,i.group.attr(r)):(r.scaleY=1,r[o?"translateX":"translateY"]=n.pos,i.group.animate(r,i.options.animation),i.animate=null))},remove:function(){var t=this,e=t.chart;e.hasRendered&&yi(e.series,function(e){e.type===t.type&&(e.isDirty=!0)}),Fi.prototype.remove.apply(t,arguments)}});pi.column=Ui,Ai.bar=e(Ai.column);var Vi=v(Ui,{type:"bar",inverted:!0});pi.bar=Vi,Ai.scatter=e(Li,{lineWidth:0,tooltip:{headerFormat:'<span style="font-size: 10px; color:{series.color}">{series.name}</span><br/>',pointFormat:"x: <b>{point.x}</b><br/>y: <b>{point.y}</b><br/>",followPointer:!0},stickyTracking:!1});var qi=v(Fi,{type:"scatter",sorted:!1,requireSorting:!1,noSharedTooltip:!0,trackerGroups:["markerGroup"],drawTracker:Ui.prototype.drawTracker,setTooltipPoints:Fe});pi.scatter=qi,Ai.pie=e(Li,{borderColor:"#FFFFFF",borderWidth:1,center:[null,null],clip:!1,colorByPoint:!0,dataLabels:{distance:30,enabled:!0,formatter:function(){return this.point.name}},ignoreHiddenPoint:!0,legendType:"point",marker:null,size:null,showInLegend:!1,slicedOffset:10,states:{hover:{brightness:.1,shadow:!1}},stickyTracking:!1,tooltip:{followPointer:!0}});var Zi=v(Bi,{init:function(){Bi.prototype.init.apply(this,arguments);var e,i=this;return i.y<0&&(i.y=null),t(i,{visible:i.visible!==!1,name:f(i.name,"Slice")}),e=function(){i.slice()},ki(i,"select",e),ki(i,"unselect",e),i},setVisible:function(t){var e,i=this,n=i.series,s=n.chart;i.visible=i.options.visible=t=t===V?!i.visible:t,n.options.data[_i(i,n.data)]=i.options,e=t?"show":"hide",yi(["graphic","dataLabel","connector","shadowGroup"],function(t){i[t]&&i[t][e]()}),i.legendItem&&s.legend.colorizeItem(i,t),!n.isDirty&&n.options.ignoreHiddenPoint&&(n.isDirty=!0,s.redraw())},slice:function(t,e,i){var n,s=this,o=s.series,r=o.chart;z(i,r),e=f(e,!0),s.sliced=s.options.sliced=t=d(t)?t:!s.sliced,o.options.data[_i(s,o.data)]=s.options,n=t?s.slicedTranslation:{translateX:0,translateY:0},s.graphic.animate(n),s.shadowGroup&&s.shadowGroup.animate(n)}}),$i={type:"pie",isCartesian:!1,pointClass:Zi,requireSorting:!1,noSharedTooltip:!0,trackerGroups:["group","dataLabelsGroup"],pointAttrToOptions:{stroke:"borderColor","stroke-width":"borderWidth",fill:"color"},getColor:Fe,animate:function(t){var e=this,i=e.points,n=e.startAngleRad;t||(yi(i,function(t){var i=t.graphic,s=t.shapeArgs;i&&(i.attr({r:e.center[3]/2,start:n,end:n}),i.animate({r:s.r,start:s.start,end:s.end},e.options.animation))}),e.animate=null)},setData:function(t,e){Fi.prototype.setData.call(this,t,!1),this.processData(),this.generatePoints(),f(e,!0)&&this.chart.redraw()},getCenter:function(){var t,e,i=this.options,s=this.chart,o=2*(i.slicedOffset||0),r=s.plotWidth-2*o,a=s.plotHeight-2*o,l=i.center,c=[f(l[0],"50%"),f(l[1],"50%"),i.size||"100%",i.innerSize||0],h=xe(r,a);return wi(c,function(i,s){return e=/%$/.test(i),t=2>s||2===s&&e,(e?[r,a,h,h][s]*n(i)/100:i)+(t?o:0)})},translate:function(t){this.generatePoints();var e,i,n,s,o,r,a,l,c=0,h=this,d=0,u=1e3,p=h.options,f=p.slicedOffset,g=f+p.borderWidth,m=h.startAngleRad=Me/180*((p.startAngle||0)%360-90),v=h.points,_=2*Me,y=p.dataLabels.distance,x=p.ignoreHiddenPoint,b=v.length;for(t||(h.center=t=h.getCenter()),h.getX=function(e,i){return n=ge.asin((e-t[1])/(t[2]/2+y)),t[0]+(i?-1:1)*we(n)*(t[2]/2+y)},a=0;b>a;a++)l=v[a],c+=x&&!l.visible?0:l.y;for(a=0;b>a;a++)l=v[a],s=c?l.y/c:0,e=me((m+d*_)*u)/u,(!x||l.visible)&&(d+=s),i=me((m+d*_)*u)/u,l.shapeType="arc",l.shapeArgs={x:t[0],y:t[1],r:t[2]/2,innerR:t[3]/2,start:e,end:i},n=(i+e)/2,n>.75*_&&(n-=2*Me),l.slicedTranslation={translateX:me(we(n)*f),translateY:me(ke(n)*f)},o=we(n)*t[2]/2,r=ke(n)*t[2]/2,l.tooltipPos=[t[0]+.7*o,t[1]+.7*r],l.half=_/4>n?0:1,l.angle=n,g=xe(g,y/2),l.labelPos=[t[0]+o+we(n)*y,t[1]+r+ke(n)*y,t[0]+o+we(n)*g,t[1]+r+ke(n)*g,t[0]+o,t[1]+r,0>y?"center":l.half?"right":"left",n],l.percentage=100*s,l.total=c;
this.setTooltipPoints()},drawGraph:null,drawPoints:function(){var e,i,n,s,o=this,r=o.chart,a=r.renderer,l=o.options.shadow;l&&!o.shadowGroup&&(o.shadowGroup=a.g("shadow").add(o.group)),yi(o.points,function(r){i=r.graphic,s=r.shapeArgs,n=r.shadowGroup,l&&!n&&(n=r.shadowGroup=a.g("shadow").add(o.shadowGroup)),e=r.sliced?r.slicedTranslation:{translateX:0,translateY:0},n&&n.attr(e),i?i.animate(t(s,e)):r.graphic=i=a.arc(s).setRadialReference(o.center).attr(r.pointAttr[r.selected?ni:ei]).attr({"stroke-linejoin":"round"}).attr(e).add(o.group).shadow(l,n),r.visible===!1&&r.setVisible(!1)})},drawDataLabels:function(){var t,e,i,n,s,o,r,a,l,c,h,d,u,p=this,g=p.data,m=p.chart,v=p.options.dataLabels,_=f(v.connectorPadding,10),y=f(v.connectorWidth,1),x=m.plotWidth,b=m.plotHeight,w=f(v.softConnector,!0),k=v.distance,M=p.center,T=M[2]/2,C=M[1],S=k>0,P=[[],[]],A=[0,0,0,0],L=function(t,e){return e.y-t.y},I=function(t,e){t.sort(function(t,i){return void 0!==t.angle&&(i.angle-t.angle)*e})};if(v.enabled||p._hasPointLabels){for(Fi.prototype.drawDataLabels.apply(p),yi(g,function(t){t.dataLabel&&P[t.half].push(t)}),d=0;!r&&g[d];)r=g[d]&&g[d].dataLabel&&(g[d].dataLabel.getBBox().height||21),d++;for(d=2;d--;){var O,z,Y,R=[],H=[],E=P[d],B=E.length;if(I(E,d-.5),k>0){for(z=C-T-k;C+T+k>=z;z+=r)R.push(z);if(O=R.length,B>O){for(h=[].concat(E),h.sort(L),u=B;u--;)h[u].rank=u;for(u=B;u--;)E[u].rank>=O&&E.splice(u,1);B=E.length}for(u=0;B>u;u++){t=E[u],o=t.labelPos;var F,N,W=9999;for(N=0;O>N;N++)F=be(R[N]-o[1]),W>F&&(W=F,Y=N);if(u>Y&&null!==R[u])Y=u;else if(B-u+Y>O&&null!==R[u])for(Y=O-B+u;null===R[Y];)Y++;else for(;null===R[Y];)Y++;H.push({i:Y,y:R[Y]}),R[Y]=null}H.sort(L)}for(u=0;B>u;u++){var G,X;t=E[u],o=t.labelPos,n=t.dataLabel,c=t.visible===!1?Ve:Ze,X=o[1],k>0?(G=H.pop(),Y=G.i,l=G.y,(X>l&&null!==R[Y+1]||l>X&&null!==R[Y-1])&&(l=X)):l=X,a=v.justify?M[0]+(d?-1:1)*(T+k):p.getX(0===Y||Y===R.length-1?X:l,d),n._attr={visibility:c,align:o[6]},n._pos={x:a+v.x+({left:_,right:-_}[o[6]]||0),y:l+v.y-10},n.connX=a,n.connY=l,null===this.options.size&&(s=n.width,_>a-s?A[3]=ye(me(s-a+_),A[3]):a+s>x-_&&(A[1]=ye(me(a+s-x+_),A[1])),0>l-r/2?A[0]=ye(me(-l+r/2),A[0]):l+r/2>b&&(A[2]=ye(me(l+r/2-b),A[2])))}}(0===D(A)||this.verifyDataLabelOverflow(A))&&(this.placeDataLabels(),S&&y&&yi(this.points,function(t){e=t.connector,o=t.labelPos,n=t.dataLabel,n&&n._pos?(c=n._attr.visibility,a=n.connX,l=n.connY,i=w?[Je,a+("left"===o[6]?5:-5),l,"C",a,l,2*o[2]-o[4],2*o[3]-o[5],o[2],o[3],Qe,o[4],o[5]]:[Je,a+("left"===o[6]?5:-5),l,Qe,o[2],o[3],Qe,o[4],o[5]],e?(e.animate({d:i}),e.attr("visibility",c)):t.connector=e=p.chart.renderer.path(i).attr({"stroke-width":y,stroke:v.connectorColor||t.color||"#606060",visibility:c}).add(p.group)):e&&(t.connector=e.destroy())}))}},verifyDataLabelOverflow:function(t){var e,i=this.center,n=this.options,s=n.center,o=n.minSize||80,r=o;return null!==s[0]?r=ye(i[2]-ye(t[1],t[3]),o):(r=ye(i[2]-t[1]-t[3],o),i[0]+=(t[3]-t[1])/2),null!==s[1]?r=ye(xe(r,i[2]-ye(t[0],t[2])),o):(r=ye(xe(r,i[2]-t[0]-t[2]),o),i[1]+=(t[0]-t[2])/2),r<i[2]?(i[2]=r,this.translate(i),yi(this.points,function(t){t.dataLabel&&(t.dataLabel._pos=null)}),this.drawDataLabels()):e=!0,e},placeDataLabels:function(){yi(this.points,function(t){var e,i=t.dataLabel;i&&(e=i._pos,e?(i.attr(i._attr),i[i.moved?"animate":"attr"](e),i.moved=!0):i&&i.attr({y:-999}))})},alignDataLabel:Fe,drawTracker:Ui.prototype.drawTracker,drawLegendSymbol:Wi.prototype.drawLegendSymbol,getSymbol:Fe};$i=v(Fi,$i),pi.pie=$i,t(Highcharts,{Axis:W,Chart:U,Color:Ii,Legend:j,Pointer:X,Point:Bi,Tick:B,Tooltip:G,Renderer:q,Series:Fi,SVGElement:E,SVGRenderer:Oi,arrayMin:P,arrayMax:D,charts:Ne,dateFormat:K,format:w,pathAnim:Q,getOptions:H,hasBidiBug:Ye,isTouchDevice:Ie,numberFormat:_,seriesTypes:pi,setOptions:R,addEvent:ki,removeEvent:Mi,createElement:m,discardElement:L,css:g,each:yi,extend:t,map:wi,merge:e,pick:f,splat:p,extendClass:v,pInt:n,wrap:x,svg:ze,canvas:Re,vml:!ze&&!Re,product:We,version:Ge})}(),mmf_modules.define("highcharts",["jquery"],function(t){return function(){var e;return e||t.Highcharts}}(this)),mmf_modules.define("utils/api",["context_vars/utils/api","utils/utils","jquery"],function(t,e,i){"use strict";var n=e.extend(!0,{},t);return n.addApiCreds=function(e){return i.extend(!0,e,{consumer_key:t.key,signed_token:t.signed_token}),e},n}),function(t){function e(t,e){return function(i){return l(t.call(this,i),e)}}function i(t){return function(e){return this.lang().ordinal(t.call(this,e))}}function n(){}function s(t){r(this,t)}function o(t){var e=this._data={},i=t.years||t.year||t.y||0,n=t.months||t.month||t.M||0,s=t.weeks||t.week||t.w||0,o=t.days||t.day||t.d||0,r=t.hours||t.hour||t.h||0,l=t.minutes||t.minute||t.m||0,c=t.seconds||t.second||t.s||0,h=t.milliseconds||t.millisecond||t.ms||0;this._milliseconds=h+1e3*c+6e4*l+36e5*r,this._days=o+7*s,this._months=n+12*i,e.milliseconds=h%1e3,c+=a(h/1e3),e.seconds=c%60,l+=a(c/60),e.minutes=l%60,r+=a(l/60),e.hours=r%24,o+=a(r/24),o+=7*s,e.days=o%30,n+=a(o/30),e.months=n%12,i+=a(n/12),e.years=i}function r(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}function a(t){return 0>t?Math.ceil(t):Math.floor(t)}function l(t,e){for(var i=t+"";i.length<e;)i="0"+i;return i}function c(t,e,i){var n,s=e._milliseconds,o=e._days,r=e._months;s&&t._d.setTime(+t+s*i),o&&t.date(t.date()+o*i),r&&(n=t.date(),t.date(1).month(t.month()+r*i).date(Math.min(n,t.daysInMonth())))}function h(t){return"[object Array]"===Object.prototype.toString.call(t)}function d(t,e){var i,n=Math.min(t.length,e.length),s=Math.abs(t.length-e.length),o=0;for(i=0;n>i;i++)~~t[i]!==~~e[i]&&o++;return o+s}function u(t,e){return e.abbr=t,Y[t]||(Y[t]=new n),Y[t].set(e),Y[t]}function p(t){return t?(!Y[t]&&R&&require("./lang/"+t),Y[t]):L.fn._lang}function f(t){return t.match(/\[.*\]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function g(t){var e,i,n=t.match(E);for(e=0,i=n.length;i>e;e++)n[e]=se[n[e]]?se[n[e]]:f(n[e]);return function(s){var o="";for(e=0;i>e;e++)o+="function"==typeof n[e].call?n[e].call(s,t):n[e];return o}}function m(t,e){function i(e){return t.lang().longDateFormat(e)||e}for(var n=5;n--&&B.test(e);)e=e.replace(B,i);return ee[e]||(ee[e]=g(e)),ee[e](t)}function v(t){switch(t){case"DDDD":return W;case"YYYY":return G;case"YYYYY":return X;case"S":case"SS":case"SSS":case"DDD":return N;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":case"a":case"A":return j;case"X":return q;case"Z":case"ZZ":return U;case"T":return V;case"MM":case"DD":case"YY":case"HH":case"hh":case"mm":case"ss":case"M":case"D":case"d":case"H":case"h":case"m":case"s":return F;default:return new RegExp(t.replace("\\",""))}}function _(t,e,i){var n,s=i._a;switch(t){case"M":case"MM":s[1]=null==e?0:~~e-1;break;case"MMM":case"MMMM":n=p(i._l).monthsParse(e),null!=n?s[1]=n:i._isValid=!1;break;case"D":case"DD":case"DDD":case"DDDD":null!=e&&(s[2]=~~e);break;case"YY":s[0]=~~e+(~~e>68?1900:2e3);break;case"YYYY":case"YYYYY":s[0]=~~e;break;case"a":case"A":i._isPm="pm"===(e+"").toLowerCase();break;case"H":case"HH":case"h":case"hh":s[3]=~~e;break;case"m":case"mm":s[4]=~~e;break;case"s":case"ss":s[5]=~~e;break;case"S":case"SS":case"SSS":s[6]=~~(1e3*("0."+e));break;case"X":i._d=new Date(1e3*parseFloat(e));break;case"Z":case"ZZ":i._useUTC=!0,n=(e+"").match(J),n&&n[1]&&(i._tzh=~~n[1]),n&&n[2]&&(i._tzm=~~n[2]),n&&"+"===n[0]&&(i._tzh=-i._tzh,i._tzm=-i._tzm)}null==e&&(i._isValid=!1)}function y(t){var e,i,n=[];if(!t._d){for(e=0;7>e;e++)t._a[e]=n[e]=null==t._a[e]?2===e?1:0:t._a[e];n[3]+=t._tzh||0,n[4]+=t._tzm||0,i=new Date(0),t._useUTC?(i.setUTCFullYear(n[0],n[1],n[2]),i.setUTCHours(n[3],n[4],n[5],n[6])):(i.setFullYear(n[0],n[1],n[2]),i.setHours(n[3],n[4],n[5],n[6])),t._d=i}}function x(t){var e,i,n=t._f.match(E),s=t._i;for(t._a=[],e=0;e<n.length;e++)i=(v(n[e]).exec(s)||[])[0],i&&(s=s.slice(s.indexOf(i)+i.length)),se[n[e]]&&_(n[e],i,t);t._isPm&&t._a[3]<12&&(t._a[3]+=12),t._isPm===!1&&12===t._a[3]&&(t._a[3]=0),y(t)}function b(t){for(var e,i,n,o,a=99;t._f.length;){if(e=r({},t),e._f=t._f.pop(),x(e),i=new s(e),i.isValid()){n=i;break}o=d(e._a,i.toArray()),a>o&&(a=o,n=i)}r(t,n)}function w(t){var e,i=t._i;if(Z.exec(i)){for(t._f="YYYY-MM-DDT",e=0;4>e;e++)if(K[e][1].exec(i)){t._f+=K[e][0];break}U.exec(i)&&(t._f+=" Z"),x(t)}else t._d=new Date(i)}function k(e){var i=e._i,n=H.exec(i);i===t?e._d=new Date:n?e._d=new Date(+n[1]):"string"==typeof i?w(e):h(i)?(e._a=i.slice(0),y(e)):e._d=new Date(i instanceof Date?+i:i)}function M(t,e,i,n,s){return s.relativeTime(e||1,!!i,t,n)}function T(t,e,i){var n=z(Math.abs(t)/1e3),s=z(n/60),o=z(s/60),r=z(o/24),a=z(r/365),l=45>n&&["s",n]||1===s&&["m"]||45>s&&["mm",s]||1===o&&["h"]||22>o&&["hh",o]||1===r&&["d"]||25>=r&&["dd",r]||45>=r&&["M"]||345>r&&["MM",z(r/30)]||1===a&&["y"]||["yy",a];return l[2]=e,l[3]=t>0,l[4]=i,M.apply({},l)}function C(t,e,i){var n=i-e,s=i-t.day();return s>n&&(s-=7),n-7>s&&(s+=7),Math.ceil(L(t).add("d",s).dayOfYear()/7)}function S(t){var e=t._i,i=t._f;return null===e||""===e?null:("string"==typeof e&&(t._i=e=p().preparse(e)),L.isMoment(e)?(t=r({},e),t._d=new Date(+e._d)):i?h(i)?b(t):x(t):k(t),new s(t))}function P(t,e){L.fn[t]=L.fn[t+"s"]=function(t){var i=this._isUTC?"UTC":"";return null!=t?(this._d["set"+i+e](t),this):this._d["get"+i+e]()}}function D(t){L.duration.fn[t]=function(){return this._data[t]}}function A(t,e){L.duration.fn["as"+t]=function(){return+this/e}}for(var L,I,O="2.0.0",z=Math.round,Y={},R="undefined"!=typeof module&&module.exports,H=/^\/?Date\((\-?\d+)/i,E=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYY|YYYY|YY|a|A|hh?|HH?|mm?|ss?|SS?S?|X|zz?|ZZ?|.)/g,B=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,F=/\d\d?/,N=/\d{1,3}/,W=/\d{3}/,G=/\d{1,4}/,X=/[+\-]?\d{1,6}/,j=/[0-9]*[a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF]+\s*?[\u0600-\u06FF]+/i,U=/Z|[\+\-]\d\d:?\d\d/i,V=/T/i,q=/[\+\-]?\d+(\.\d{1,3})?/,Z=/^\s*\d{4}-\d\d-\d\d((T| )(\d\d(:\d\d(:\d\d(\.\d\d?\d?)?)?)?)?([\+\-]\d\d:?\d\d)?)?/,$="YYYY-MM-DDTHH:mm:ssZ",K=[["HH:mm:ss.S",/(T| )\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],J=/([\+\-]|\d\d)/gi,Q="Month|Date|Hours|Minutes|Seconds|Milliseconds".split("|"),te={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},ee={},ie="DDD w W M D d".split(" "),ne="M D H h m s w W".split(" "),se={M:function(){return this.month()+1},MMM:function(t){return this.lang().monthsShort(this,t)},MMMM:function(t){return this.lang().months(this,t)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(t){return this.lang().weekdaysMin(this,t)},ddd:function(t){return this.lang().weekdaysShort(this,t)},dddd:function(t){return this.lang().weekdays(this,t)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return l(this.year()%100,2)},YYYY:function(){return l(this.year(),4)},YYYYY:function(){return l(this.year(),5)},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return~~(this.milliseconds()/100)},SS:function(){return l(~~(this.milliseconds()/10),2)},SSS:function(){return l(this.milliseconds(),3)},Z:function(){var t=-this.zone(),e="+";return 0>t&&(t=-t,e="-"),e+l(~~(t/60),2)+":"+l(~~t%60,2)},ZZ:function(){var t=-this.zone(),e="+";return 0>t&&(t=-t,e="-"),e+l(~~(10*t/6),4)},X:function(){return this.unix()}};ie.length;)I=ie.pop(),se[I+"o"]=i(se[I]);for(;ne.length;)I=ne.pop(),se[I+I]=e(se[I],2);for(se.DDDD=e(se.DDD,3),n.prototype={set:function(t){var e,i;for(i in t)e=t[i],"function"==typeof e?this[i]=e:this["_"+i]=e},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(t){return this._months[t.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(t){return this._monthsShort[t.month()]},monthsParse:function(t){var e,i,n;for(this._monthsParse||(this._monthsParse=[]),e=0;12>e;e++)if(this._monthsParse[e]||(i=L([2e3,e]),n="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[e]=new RegExp(n.replace(".",""),"i")),this._monthsParse[e].test(t))return e},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(t){return this._weekdays[t.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(t){return this._weekdaysShort[t.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(t){return this._weekdaysMin[t.day()]},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(t){var e=this._longDateFormat[t];return!e&&this._longDateFormat[t.toUpperCase()]&&(e=this._longDateFormat[t.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(t){return t.slice(1)}),this._longDateFormat[t]=e),e},meridiem:function(t,e,i){return t>11?i?"pm":"PM":i?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[last] dddd [at] LT",sameElse:"L"},calendar:function(t,e){var i=this._calendar[t];return"function"==typeof i?i.apply(e):i},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(t,e,i,n){var s=this._relativeTime[i];return"function"==typeof s?s(t,e,i,n):s.replace(/%d/i,t)},pastFuture:function(t,e){var i=this._relativeTime[t>0?"future":"past"];return"function"==typeof i?i(e):i.replace(/%s/i,e)},ordinal:function(t){return this._ordinal.replace("%d",t)},_ordinal:"%d",preparse:function(t){return t},postformat:function(t){return t},week:function(t){return C(t,this._week.dow,this._week.doy)},_week:{dow:0,doy:6}},L=function(t,e,i){return S({_i:t,_f:e,_l:i,_isUTC:!1})},L.utc=function(t,e,i){return S({_useUTC:!0,_isUTC:!0,_l:i,_i:t,_f:e})},L.unix=function(t){return L(1e3*t)},L.duration=function(t,e){var i,n=L.isDuration(t),s="number"==typeof t,r=n?t._data:s?{}:t;return s&&(e?r[e]=t:r.milliseconds=t),i=new o(r),n&&t.hasOwnProperty("_lang")&&(i._lang=t._lang),i},L.version=O,L.defaultFormat=$,L.lang=function(t,e){return t?(e?u(t,e):Y[t]||p(t),void(L.duration.fn._lang=L.fn._lang=p(t))):L.fn._lang._abbr},L.langData=function(t){return t&&t._lang&&t._lang._abbr&&(t=t._lang._abbr),p(t)},L.isMoment=function(t){return t instanceof s},L.isDuration=function(t){return t instanceof o},L.fn=s.prototype={clone:function(){return L(this)},valueOf:function(){return+this._d},unix:function(){return Math.floor(+this._d/1e3)},toString:function(){return this.format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._d},toJSON:function(){return L.utc(this).format("YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var t=this;return[t.year(),t.month(),t.date(),t.hours(),t.minutes(),t.seconds(),t.milliseconds()]},isValid:function(){return null==this._isValid&&(this._isValid=this._a?!d(this._a,(this._isUTC?L.utc(this._a):L(this._a)).toArray()):!isNaN(this._d.getTime())),!!this._isValid},utc:function(){return this._isUTC=!0,this},local:function(){return this._isUTC=!1,this},format:function(t){var e=m(this,t||L.defaultFormat);return this.lang().postformat(e)},add:function(t,e){var i;return i="string"==typeof t?L.duration(+e,t):L.duration(t,e),c(this,i,1),this},subtract:function(t,e){var i;return i="string"==typeof t?L.duration(+e,t):L.duration(t,e),c(this,i,-1),this},diff:function(t,e,i){var n,s,o=this._isUTC?L(t).utc():L(t).local(),r=6e4*(this.zone()-o.zone());return e&&(e=e.replace(/s$/,"")),"year"===e||"month"===e?(n=432e5*(this.daysInMonth()+o.daysInMonth()),s=12*(this.year()-o.year())+(this.month()-o.month()),s+=(this-L(this).startOf("month")-(o-L(o).startOf("month")))/n,"year"===e&&(s/=12)):(n=this-o-r,s="second"===e?n/1e3:"minute"===e?n/6e4:"hour"===e?n/36e5:"day"===e?n/864e5:"week"===e?n/6048e5:n),i?s:a(s)},from:function(t,e){return L.duration(this.diff(t)).lang(this.lang()._abbr).humanize(!e)},fromNow:function(t){return this.from(L(),t)},calendar:function(){var t=this.diff(L().startOf("day"),"days",!0),e=-6>t?"sameElse":-1>t?"lastWeek":0>t?"lastDay":1>t?"sameDay":2>t?"nextDay":7>t?"nextWeek":"sameElse";return this.format(this.lang().calendar(e,this))},isLeapYear:function(){var t=this.year();return t%4===0&&t%100!==0||t%400===0},isDST:function(){return this.zone()<L([this.year()]).zone()||this.zone()<L([this.year(),5]).zone()},day:function(t){var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null==t?e:this.add({d:t-e})},startOf:function(t){switch(t=t.replace(/s$/,"")){case"year":this.month(0);case"month":this.date(1);case"week":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===t&&this.day(0),this},endOf:function(t){return this.startOf(t).add(t.replace(/s?$/,"s"),1).subtract("ms",1)},isAfter:function(t,e){return e="undefined"!=typeof e?e:"millisecond",+this.clone().startOf(e)>+L(t).startOf(e)},isBefore:function(t,e){return e="undefined"!=typeof e?e:"millisecond",+this.clone().startOf(e)<+L(t).startOf(e)},isSame:function(t,e){return e="undefined"!=typeof e?e:"millisecond",+this.clone().startOf(e)===+L(t).startOf(e)},zone:function(){return this._isUTC?0:this._d.getTimezoneOffset()},daysInMonth:function(){return L.utc([this.year(),this.month()+1,0]).date()},dayOfYear:function(t){var e=z((L(this).startOf("day")-L(this).startOf("year"))/864e5)+1;return null==t?e:this.add("d",t-e)},isoWeek:function(t){var e=C(this,1,4);return null==t?e:this.add("d",7*(t-e))},week:function(t){var e=this.lang().week(this);return null==t?e:this.add("d",7*(t-e))},lang:function(e){return e===t?this._lang:(this._lang=p(e),this)}},I=0;I<Q.length;I++)P(Q[I].toLowerCase().replace(/s$/,""),Q[I]);P("year","FullYear"),L.fn.days=L.fn.day,L.fn.weeks=L.fn.week,L.fn.isoWeeks=L.fn.isoWeek,L.duration.fn=o.prototype={weeks:function(){return a(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+2592e6*this._months},humanize:function(t){var e=+this,i=T(e,!t,this.lang());return t&&(i=this.lang().pastFuture(e,i)),this.lang().postformat(i)},lang:L.fn.lang};for(I in te)te.hasOwnProperty(I)&&(A(I,te[I]),D(I.toLowerCase()));A("Weeks",6048e5),L.lang("en",{ordinal:function(t){var e=t%10,i=1===~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th";return t+i}}),R&&(module.exports=L),"undefined"==typeof ender&&(this.moment=L),"function"==typeof mmf_modules.define&&mmf_modules.define.amd&&mmf_modules.define("moment",[],function(){return L})}.call(this),mmf_modules.define("utils/conversions",["underscore","moment","utils/settings"],function(t,e,i){"use strict";var n={};return n.Helpers={},n.UnitPreferences={distance:"mi",elevation:"ft",energy:"kCal",pace:"min/mi",speed:"mph",weight:"lb"},n.DisplayPreferences={Dates:{"short":"MM/DD/YYYY"}},n.Multipliers={units_in_kilograms:{kg:1,lb:.453592909},units_in_meters:{m:1,cm:.01,mi:1609.344,km:1e3,ft:.3048,dm:10,"in":.0254},units_in_seconds:{s:1,min:60,h:3600},units_in_joules:{kCal:4184,kJ:1e3,J:1}},n.ConvertColor={hexToRGBA:function(t,e){var i,n,s,o=t;if("rgb"===o.substring(0,3))return o=o.replace("rgb","rgba"),o=o.replace(")",", "+e/100+")");if(!o.match(/^#?([0-9A-Fa-f]){3}\s*$|^#?([0-9A-Fa-f]){6}\s*$/))return"Bad Color Provided";isNaN(e)&&(e="100%");var r=o.replace(" ","");return r="#"===r.charAt(0)?r.substr(1):r,6===r.length?(i=parseInt(r.substring(0,2),16),n=parseInt(r.substring(2,4),16),s=parseInt(r.substring(4,6),16)):3===r.length&&(i=parseInt(r.substring(0,1)+r.substring(0,1),16),n=parseInt(r.substring(1,2)+r.substring(1,2),16),s=parseInt(r.substring(2,3)+r.substring(2,3),16)),"rgba("+i+", "+n+", "+s+", "+e/100+")"}},n.setUnitPreferences=function(e){t.extend(n.UnitPreferences,e)},n.setDateDisplayPreferences=function(e){t.extend(n.DisplayPreferences.Dates,e)},n.userPreferredDate=function(t,i){return i=i||"short",e(t).format(n.DisplayPreferences.Dates[i])},n.userPreferredDistance=function(t,e){return n.convertDistanceTo(t,e,n.UnitPreferences.distance)},n.userPreferredPace=function(t,e){return n.convertPaceTo(t,e,n.UnitPreferences.pace)},n.userPreferredSpeed=function(t,e){return n.convertSpeedTo(t,e,n.UnitPreferences.speed)},n.userPreferredElevation=function(t,e){return n.convertElevationTo(t,e,n.UnitPreferences.elevation)},n.userPreferredEnergy=function(t,e){return n.convertEnergyTo(t,e,n.UnitPreferences.energy)},n.userPreferredWeight=function(t,e){return n.convertMassTo(t,e,n.UnitPreferences.weight)},n.Helpers.formatAsHHMM=function(t){var e=Math.floor(t),i=Math.floor(60*(t-e));return 10>i&&(i="0"+i),e+":"+i},n.convertDistanceTo=function(t,e,i){return null===t||void 0===t?null:(e=e||"m",i=i||n.UnitPreferences.distance,t*n.Multipliers.units_in_meters[e]/n.Multipliers.units_in_meters[i])},n.convertElevationTo=function(t,e,i){return null===t||void 0===t?null:(e=e||"m",i=i||n.UnitPreferences.elevation,t*n.Multipliers.units_in_meters[e]/n.Multipliers.units_in_meters[i])},n.convertMassTo=function(t,e,i){return null===t||void 0===t?null:(e=e||"kg",i=i||n.UnitPreferences.weight,t*n.Multipliers.units_in_kilograms[e]/n.Multipliers.units_in_kilograms[i])},n.convertDurationTo=function(t,e,i){return null===t||void 0===t?null:(e=e||"s",i=i||"s",t*n.Multipliers.units_in_seconds[e]/n.Multipliers.units_in_seconds[i])},n.convertSpeedTo=function(t,e,i){if(null===t||void 0===t)return null;e=e||"m/s",i=i||n.UnitPreferences.speed;var s=n.getDistanceUnitFromSpeedUnit(e)||"m",o=n.getDurationUnitFromSpeedUnit(e)||"s",r=n.getDistanceUnitFromSpeedUnit(i)||n.UnitPreferences.distance,a=n.getDurationUnitFromSpeedUnit(i)||"h";return n.convertDistanceTo(t,s,r)/n.convertDurationTo(1,o,a)},n.convertPaceTo=function(t,e,i){if(null===t||void 0===t)return null;e=e||"s/m",i=i||n.UnitPreferences.pace;var s=n.getDurationUnitFromPaceUnit(e)||"s",o=n.getDistanceUnitFromPaceUnit(e)||"m",r=n.getDurationUnitFromPaceUnit(i)||"min",a=n.getDistanceUnitFromPaceUnit(i)||n.UnitPreferences.distance;return n.convertDurationTo(t,s,r)/n.convertDistanceTo(1,o,a)},n.convertEnergyTo=function(t,e,i){return null===t||void 0===t?null:(e=e||"J",i=i||"J",t*n.Multipliers.units_in_joules[e]/n.Multipliers.units_in_joules[i])},n.getDurationUnitFromPaceUnit=function(t){return-1!==t.indexOf("/")?t.split("/")[0]:null},n.getDistanceUnitFromPaceUnit=function(t){return-1!==t.indexOf("/")?t.split("/")[1]:null},n.getDurationUnitFromSpeedUnit=function(t){return"mph"===t?"h":-1!==t.indexOf("/")?t.split("/")[1]:null},n.getDistanceUnitFromSpeedUnit=function(t){return"mph"===t?"mi":-1!==t.indexOf("/")?t.split("/")[0]:null},n.secondsToHrMin=function(t){var e,i,n;e=Math.floor(parseInt(t,10)),n=Math.floor(e/3600),e-=3600*n,i=Math.floor(e/60),e-=60*i;var s="hr",o="min";return[n,s,i,o].join(" ")},n.secondsToHMS=function(t,e){var i,n,s,o,r;return i=Math.floor(parseInt(t,10)),s=Math.floor(i/3600),i-=3600*s,n=Math.floor(i/60),i-=60*n,10>s&&(s="0"+s),10>n&&(n="0"+n),10>i&&(i="0"+i),o=s+":"+n+":"+i,e===!0&&(r=o.search(/[^0|:]/),o=o.substr(r>-1&&r<o.length-2?r:o.length-4)),o},n.toOrdinal=function(t){var e,i=t%100,n=["th","st","nd","rd","th"];return e=21>i?4>i?n[i]:n[0]:i%10>4?n[0]:n[i%10]},n.formatNumber=function(t){for(;/(\d+)(\d{3})/.test(t.toString());)t=t.toString().replace(/(\d+)(\d{3})/,"$1,$2");return t.toString()},n.DurationBuilder=function(t,e,i){return parseInt(3600*(t||0),10)+parseInt(60*(e||0),10)+parseInt(i||0,10)},function(){n.setUnitPreferences(i.units)}(),n}),mmf_modules.define("utils/maps",["context_vars/utils/maps","jquery","utils/utils","utils/api","utils/settings","utils/site","utils/storage","utils/ux"],function(t,e,i,n,s,o,r,a){"use strict";var l,c=i.extend(!0,{Api:{}},t),h={route:"/vxproxy/v7.0/route/"};c.geolocate=function(t,e){function i(){a.Messaging.View("Your current location could not be determined.",!0),e instanceof Function&&e()}window.navigator&&window.navigator.geolocation&&window.navigator.geolocation.getCurrentPosition(t,i,{enableHighAccuracy:!0,maximumAge:0,timeout:1e4})},c.getRouteThumbnailUrl=function(t,e,i){var n="/routes/thumbnail/"+t+"?size="+e+"x"+i;return""===s.cloudfront_images_domain||null===s.cloudfront_images_domain?n:"//"+s.cloudfront_images_domain+n},c.getRouteKMLUrl=function(t,i,n){var s="https://"+window.location.hostname;return""!==window.location.port&&(s+=":"+window.location.port),s+=n?"/vxproxy/v7.0/route/":"/routes/kml/",i.timestamp=(new Date).getTime(),s+=t+"/?"+e.param(i)},c.loadMappingApi=function(t){var r=t.namespace||"MMF.Maps.Api";l=i.resolveObjectReferenceFromString(window,r);var h=function(){return c.mapping_api_version&&l.version&&c.mapping_api_version===l.version},d=function(){var t=e("<p>").css({"font-size":"14px",width:"400px"}).html('Your browser is loading an outdated version of our mapping tool. Please clear your browser cache and reload this page. <a href="http://www.wikihow.com/Clear-Your-Browser\'s-Cache" target="_blank" rel="noopener noreferrer">How to clear your browser cache.</a>'),i=e("<div>").get(0);a.QTipModal(i,null,t,{ok:!1,close:!1})},u=window[t.callback]||function(){},p=function(){h()?u():d()},f=e.extend(!0,{consumer_key:n.key,site:o.name},t,{callback:"mmf_mapping_api_callback_wrapper",debug:s.debug?!0:!1,namespace:r}),g=document.createElement("script"),m=document.getElementsByTagName("head")[0];window.mmf_mapping_api_callback_wrapper=p,g.src="/panama-api/maps/js?"+e.param(f),m.appendChild(g)},c.getRouteData=function(t,n){t="object"!=typeof t&&i.assert(t);var s=h.route+t+"?"+e.param({field_set:"detailed_internal",last_updated:n&&n.last_updated}),o=e.Deferred();return e.getJSON(s,function(t){o.resolve(t)}).error(function(){o.reject()}),o.promise()};var d=function(t){var e,i,n,s=[];for(i=0,n=t.length;n>i;i++)e=t[i],s.push({lng:e.geometry.coordinates[0],lat:e.geometry.coordinates[1],order:0,notes:e.properties.notes.text,_links:{marker_icon:[{id:e.properties.iconId+2e3}]}});return s},u=function(t){var e,i,n,s,o,r,a,c,h,d,u,p,f,g=[],m=!1,v=0,_={};for(_[l.TravelModes.DIRECT]=0,_[l.TravelModes.WALKING]=1,_[l.TravelModes.BICYCLING]=2,_[l.TravelModes.DRIVING]=3,e=0,s=t.length;s>e;e++)for(c=t[e],i=0,o=c.geometry.coordinates.length;o>i;i++){if(m=i===o-1,h=c.geometry.coordinates[i],a={lng:h[0],lat:h[1],order:m?++v:0},m&&(a.travel_mode=_[c.properties.travelMode],d=c.properties.notes,d&&d.length>0)){for(p=[],n=0,r=d.length;r>n;n++)u=[],f=d[n],u.push(f.text,f.geometry.coordinates[1],f.geometry.coordinates[0],f.distance),p.push(u.join(":"));a.notes=p.join("~")}g.push(a)}return g};c.mappingApiRouteDataToPoints=function(t){var e=[];return e=[].concat(d(t.markers)),e=e.concat(u(t.segments))};var p=function(){return"ride"===o.short_name?l.TravelModes.BICYCLING:l.TravelModes.WALKING};return c.pointsToMappingApiRouteData=function(){var t,i=function(t){return{geometry:{type:"Point",coordinates:[parseFloat(t.lng,10),parseFloat(t.lat,10)]},properties:{notes:{text:t.notes},iconId:parseInt(n(t),10)-2e3}}},n=function(t){return t._links&&t._links.marker_icon?t._links.marker_icon[0].id:void 0},s=function(t){switch(t){case 0:return l.TravelModes.DIRECT;case 1:return l.TravelModes.WALKING;case 2:return l.TravelModes.BICYCLING;case 3:return l.TravelModes.DRIVING;default:return l.TravelModes.DIRECT}},o=!1,r=function(e,i){var n={lng:parseInt(e[0],10),lat:parseInt(e[1],10)},s={lng:parseInt(i[0],10),lat:parseInt(i[1],10)};n.lng===s.lng&&n.lat===s.lat?t=!1:n.lng===s.lat&&n.lat===s.lng?t=!0:Math.abs(n.lng-s.lng)<=1&&Math.abs(n.lat-s.lat)<=1?t=!1:Math.abs(n.lat-s.lng)<=1&&Math.abs(n.lng-s.lat)<=1&&(t=!0),o=!0},a=function(a){var l,c,h,d,u,f,g,m,v,_,y,x,b,w={areas:[],markers:[],segments:[]},k=e("<p>");for(l=0,c=a.length;c>l;l++)if(u=a[l],f=parseInt(u.order||0,10),g=parseInt(n(u)||0,10),g>=2e3)w.markers.push(i(u,g));else if(x){if(x&&(b.geometry.coordinates.push([parseFloat(u.lng,10),parseFloat(u.lat,10)]),f>0&&u.travel_mode||l===a.length-1)){if(b.properties.travelMode=s(parseInt(u.travel_mode||p(),10)),u.notes)for(m=u.notes.split("~"),h=0,d=m.length;d>h;h++)v=k.html(m[h].replace("><","> <")).text().split(":"),_=v.slice(0,-3).join(""),y=[parseFloat(v.slice(-2,-1)[0],10),parseFloat(v.slice(-3,-2)[0],10)],o||r(y,b.geometry.coordinates[0]),y=t?y.reverse():y,b.properties.notes.push({text:_,geometry:{type:"Point",coordinates:y},distance:parseInt(v.slice(-1)[0],10)});x=!1,w.segments.push(b),b=null}}else x=!0,b={geometry:{type:"LineString",coordinates:[[parseFloat(u.lng,10),parseFloat(u.lat,10)]]},properties:{iconIds:[g,null],notes:[]}};return w};return function(t){return a(t)}}(),c.getSetting=function(t,e){return r.Get("MMF.Maps."+t,e)},c.setSetting=function(t,e){return r.Set("MMF.Maps."+t,e)},c.routeDataFromJSON=function(t){var e,i,n,s,o,r,a,l=[];for(e=0,s=t.markers.length;s>e;e++)a=t.markers[e],l.push([a.geometry.coordinates[0],a.geometry.coordinates[1],a.properties.iconId+2e3,0,a.properties.notes.text].join(","));var c,h,d,u,p,f,g,m=[],v=0,_=!1;for(e=0,s=t.segments.length;s>e;e++)for(c=t.segments[e],i=0,o=c.geometry.coordinates.length;o>i;i++){_=i===o-1,h=c.geometry.coordinates[i];var y;if(y=_?"direct"===c.properties.travelMode.toLowerCase()?1e3:1001:0,d=[h[0],h[1],y,_?++v:0],u=c.properties.notes,_&&u&&u.length>0){for(f=[],n=0,r=u.length;r>n;n++)g=[],p=u[n],g.push(p.text,p.geometry.coordinates[1],p.geometry.coordinates[0],p.distance),f.push(g.join(":"));d.push(f.join("~"))}m.push(d.join(","))}return l.concat(m).join("|")},c}),function(){var t,e,i,n,s,o={}.hasOwnProperty,r=function(t,e){function i(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};n=function(){function t(){this.options_index=0,this.parsed=[]}return t.prototype.add_node=function(t){return"OPTGROUP"===t.nodeName.toUpperCase()?this.add_group(t):this.add_option(t)},t.prototype.add_group=function(t){var e,i,n,s,o,r;for(e=this.parsed.length,this.parsed.push({array_index:e,group:!0,label:this.escapeExpression(t.label),children:0,disabled:t.disabled}),o=t.childNodes,r=[],n=0,s=o.length;s>n;n++)i=o[n],r.push(this.add_option(i,e,t.disabled));return r},t.prototype.add_option=function(t,e,i){return"OPTION"===t.nodeName.toUpperCase()?(""!==t.text?(null!=e&&(this.parsed[e].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:t.value,text:t.text,html:t.innerHTML,selected:t.selected,disabled:i===!0?i:t.disabled,group_array_index:e,classes:t.className,style:t.style.cssText})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0}),this.options_index+=1):void 0},t.prototype.escapeExpression=function(t){var e,i;return null==t||t===!1?"":/[\&\<\>\"\'\`]/.test(t)?(e={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},i=/&(?!\w+;)|[\<\>\"\'\`]/g,t.replace(i,function(t){return e[t]||"&amp;"})):t},t}(),n.select_to_array=function(t){var e,i,s,o,r;for(i=new n,r=t.childNodes,s=0,o=r.length;o>s;s++)e=r[s],i.add_node(e);return i.parsed},e=function(){function t(e,i){this.form_field=e,this.options=null!=i?i:{},t.browser_is_supported()&&(this.is_multiple=this.form_field.multiple,this.set_default_text(),this.set_default_values(),this.setup(),this.set_up_html(),this.register_observers())}return t.prototype.set_default_values=function(){var t=this;return this.click_test_action=function(e){return t.test_active_click(e)},this.activate_action=function(e){return t.activate_field(e)},this.active_field=!1,this.mouse_on_container=!1,this.results_showing=!1,this.result_highlighted=null,this.allow_single_deselect=null!=this.options.allow_single_deselect&&null!=this.form_field.options[0]&&""===this.form_field.options[0].text?this.options.allow_single_deselect:!1,this.disable_search_threshold=this.options.disable_search_threshold||0,this.disable_search=this.options.disable_search||!1,this.enable_split_word_search=null!=this.options.enable_split_word_search?this.options.enable_split_word_search:!0,this.group_search=null!=this.options.group_search?this.options.group_search:!0,this.search_contains=this.options.search_contains||!1,this.single_backstroke_delete=null!=this.options.single_backstroke_delete?this.options.single_backstroke_delete:!0,this.max_selected_options=this.options.max_selected_options||1/0,this.inherit_select_classes=this.options.inherit_select_classes||!1,this.display_selected_options=null!=this.options.display_selected_options?this.options.display_selected_options:!0,this.display_disabled_options=null!=this.options.display_disabled_options?this.options.display_disabled_options:!0
},t.prototype.set_default_text=function(){return this.default_text=this.form_field.getAttribute("data-placeholder")?this.form_field.getAttribute("data-placeholder"):this.is_multiple?this.options.placeholder_text_multiple||this.options.placeholder_text||t.default_multiple_text:this.options.placeholder_text_single||this.options.placeholder_text||t.default_single_text,this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||t.default_no_result_text},t.prototype.mouse_enter=function(){return this.mouse_on_container=!0},t.prototype.mouse_leave=function(){return this.mouse_on_container=!1},t.prototype.input_focus=function(){var t=this;if(this.is_multiple){if(!this.active_field)return setTimeout(function(){return t.container_mousedown()},50)}else if(!this.active_field)return this.activate_field()},t.prototype.input_blur=function(){var t=this;return this.mouse_on_container?void 0:(this.active_field=!1,setTimeout(function(){return t.blur_test()},100))},t.prototype.results_option_build=function(t){var e,i,n,s,o;for(e="",o=this.results_data,n=0,s=o.length;s>n;n++)i=o[n],e+=i.group?this.result_add_group(i):this.result_add_option(i),(null!=t?t.first:void 0)&&(i.selected&&this.is_multiple?this.choice_build(i):i.selected&&!this.is_multiple&&this.single_set_selected_text(i.text));return e},t.prototype.result_add_option=function(t){var e,i;return t.search_match&&this.include_option_in_results(t)?(e=[],t.disabled||t.selected&&this.is_multiple||e.push("active-result"),!t.disabled||t.selected&&this.is_multiple||e.push("disabled-result"),t.selected&&e.push("result-selected"),null!=t.group_array_index&&e.push("group-option"),""!==t.classes&&e.push(t.classes),i=document.createElement("li"),i.className=e.join(" "),i.style.cssText=t.style,i.setAttribute("data-option-array-index",t.array_index),i.innerHTML=t.search_text,this.outerHTML(i)):""},t.prototype.result_add_group=function(t){var e;return(t.search_match||t.group_match)&&t.active_options>0?(e=document.createElement("li"),e.className="group-result",e.innerHTML=t.search_text,this.outerHTML(e)):""},t.prototype.results_update_field=function(){return this.set_default_text(),this.is_multiple||this.results_reset_cleanup(),this.result_clear_highlight(),this.results_build(),this.results_showing?this.winnow_results():void 0},t.prototype.reset_single_select_options=function(){var t,e,i,n,s;for(n=this.results_data,s=[],e=0,i=n.length;i>e;e++)t=n[e],s.push(t.selected?t.selected=!1:void 0);return s},t.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show()},t.prototype.results_search=function(){return this.results_showing?this.winnow_results():this.results_show()},t.prototype.winnow_results=function(){var t,e,i,n,s,o,r,a,l,c,h,d,u;for(this.no_results_clear(),s=0,r=this.get_search_text(),t=r.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),n=this.search_contains?"":"^",i=new RegExp(n+t,"i"),c=new RegExp(t,"i"),u=this.results_data,h=0,d=u.length;d>h;h++)e=u[h],e.search_match=!1,o=null,this.include_option_in_results(e)&&(e.group&&(e.group_match=!1,e.active_options=0),null!=e.group_array_index&&this.results_data[e.group_array_index]&&(o=this.results_data[e.group_array_index],0===o.active_options&&o.search_match&&(s+=1),o.active_options+=1),(!e.group||this.group_search)&&(e.search_text=e.group?e.label:e.html,e.search_match=this.search_string_match(e.search_text,i),e.search_match&&!e.group&&(s+=1),e.search_match?(r.length&&(a=e.search_text.search(c),l=e.search_text.substr(0,a+r.length)+"</em>"+e.search_text.substr(a+r.length),e.search_text=l.substr(0,a)+"<em>"+l.substr(a)),null!=o&&(o.group_match=!0)):null!=e.group_array_index&&this.results_data[e.group_array_index].search_match&&(e.search_match=!0)));return this.result_clear_highlight(),1>s&&r.length?(this.update_results_content(""),this.no_results(r)):(this.update_results_content(this.results_option_build()),this.winnow_results_set_highlight())},t.prototype.search_string_match=function(t,e){var i,n,s,o;if(e.test(t))return!0;if(this.enable_split_word_search&&(t.indexOf(" ")>=0||0===t.indexOf("["))&&(n=t.replace(/\[|\]/g,"").split(" "),n.length))for(s=0,o=n.length;o>s;s++)if(i=n[s],e.test(i))return!0},t.prototype.choices_count=function(){var t,e,i,n;if(null!=this.selected_option_count)return this.selected_option_count;for(this.selected_option_count=0,n=this.form_field.options,e=0,i=n.length;i>e;e++)t=n[e],t.selected&&(this.selected_option_count+=1);return this.selected_option_count},t.prototype.choices_click=function(t){return t.preventDefault(),this.results_showing||this.is_disabled?void 0:this.results_show()},t.prototype.keyup_checker=function(t){var e,i;switch(e=null!=(i=t.which)?i:t.keyCode,this.search_field_scale(),e){case 8:if(this.is_multiple&&this.backstroke_length<1&&this.choices_count()>0)return this.keydown_backstroke();if(!this.pending_backstroke)return this.result_clear_highlight(),this.results_search();break;case 13:if(t.preventDefault(),this.results_showing)return this.result_select(t);break;case 27:return this.results_showing&&this.results_hide(),!0;case 9:case 38:case 40:case 16:case 91:case 17:break;default:return this.results_search()}},t.prototype.clipboard_event_checker=function(){var t=this;return setTimeout(function(){return t.results_search()},50)},t.prototype.container_width=function(){return null!=this.options.width?this.options.width:""+this.form_field.offsetWidth+"px"},t.prototype.include_option_in_results=function(t){return this.is_multiple&&!this.display_selected_options&&t.selected?!1:!this.display_disabled_options&&t.disabled?!1:t.empty?!1:!0},t.prototype.search_results_touchstart=function(t){return this.touch_started=!0,this.search_results_mouseover(t)},t.prototype.search_results_touchmove=function(t){return this.touch_started=!1,this.search_results_mouseout(t)},t.prototype.search_results_touchend=function(t){return this.touch_started?this.search_results_mouseup(t):void 0},t.prototype.outerHTML=function(t){var e;return t.outerHTML?t.outerHTML:(e=document.createElement("div"),e.appendChild(t),e.innerHTML)},t.browser_is_supported=function(){return"Microsoft Internet Explorer"===window.navigator.appName?document.documentMode>=8:/iP(od|hone)/i.test(window.navigator.userAgent)?!1:/Android/i.test(window.navigator.userAgent)&&/Mobile/i.test(window.navigator.userAgent)?!1:!0},t.default_multiple_text="Select Some Options",t.default_single_text="Select an Option",t.default_no_result_text="No results match",t}(),t=jQuery,t.fn.extend({chosen:function(n){return e.browser_is_supported()?this.each(function(){var e,s;e=t(this),s=e.data("chosen"),"destroy"===n&&s?s.destroy():s||e.data("chosen",new i(this,n))}):this}}),i=function(e){function i(){return s=i.__super__.constructor.apply(this,arguments)}return r(i,e),i.prototype.setup=function(){return this.form_field_jq=t(this.form_field),this.current_selectedIndex=this.form_field.selectedIndex,this.is_rtl=this.form_field_jq.hasClass("chosen-rtl")},i.prototype.set_up_html=function(){var e,i;return e=["chosen-container"],e.push("chosen-container-"+(this.is_multiple?"multi":"single")),this.inherit_select_classes&&this.form_field.className&&e.push(this.form_field.className),this.is_rtl&&e.push("chosen-rtl"),i={"class":e.join(" "),style:"width: "+this.container_width()+";",title:this.form_field.title},this.form_field.id.length&&(i.id=this.form_field.id.replace(/[^\w]/g,"_")+"_chosen"),this.container=t("<div />",i),this.container.html(this.is_multiple?'<ul class="chosen-choices"><li class="search-field"><input type="text" value="'+this.default_text+'" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chosen-drop"><ul class="chosen-results"></ul></div>':'<a class="chosen-single chosen-default" tabindex="-1"><span>'+this.default_text+'</span><div><b></b></div></a><div class="chosen-drop"><div class="chosen-search"><input type="text" autocomplete="off" /></div><ul class="chosen-results"></ul></div>'),this.form_field_jq.hide().after(this.container),this.dropdown=this.container.find("div.chosen-drop").first(),this.search_field=this.container.find("input").first(),this.search_results=this.container.find("ul.chosen-results").first(),this.search_field_scale(),this.search_no_results=this.container.find("li.no-results").first(),this.is_multiple?(this.search_choices=this.container.find("ul.chosen-choices").first(),this.search_container=this.container.find("li.search-field").first()):(this.search_container=this.container.find("div.chosen-search").first(),this.selected_item=this.container.find(".chosen-single").first()),this.results_build(),this.set_tab_index(),this.set_label_behavior(),this.form_field_jq.trigger("chosen:ready",{chosen:this})},i.prototype.register_observers=function(){var t=this;return this.container.bind("mousedown.chosen",function(e){t.container_mousedown(e)}),this.container.bind("mouseup.chosen",function(e){t.container_mouseup(e)}),this.container.bind("mouseenter.chosen",function(e){t.mouse_enter(e)}),this.container.bind("mouseleave.chosen",function(e){t.mouse_leave(e)}),this.search_results.bind("mouseup.chosen",function(e){t.search_results_mouseup(e)}),this.search_results.bind("mouseover.chosen",function(e){t.search_results_mouseover(e)}),this.search_results.bind("mouseout.chosen",function(e){t.search_results_mouseout(e)}),this.search_results.bind("mousewheel.chosen DOMMouseScroll.chosen",function(e){t.search_results_mousewheel(e)}),this.search_results.bind("touchstart.chosen",function(e){t.search_results_touchstart(e)}),this.search_results.bind("touchmove.chosen",function(e){t.search_results_touchmove(e)}),this.search_results.bind("touchend.chosen",function(e){t.search_results_touchend(e)}),this.form_field_jq.bind("chosen:updated.chosen",function(e){t.results_update_field(e)}),this.form_field_jq.bind("chosen:activate.chosen",function(e){t.activate_field(e)}),this.form_field_jq.bind("chosen:open.chosen",function(e){t.container_mousedown(e)}),this.form_field_jq.bind("chosen:close.chosen",function(e){t.input_blur(e)}),this.search_field.bind("blur.chosen",function(e){t.input_blur(e)}),this.search_field.bind("keyup.chosen",function(e){t.keyup_checker(e)}),this.search_field.bind("keydown.chosen",function(e){t.keydown_checker(e)}),this.search_field.bind("focus.chosen",function(e){t.input_focus(e)}),this.search_field.bind("cut.chosen",function(e){t.clipboard_event_checker(e)}),this.search_field.bind("paste.chosen",function(e){t.clipboard_event_checker(e)}),this.is_multiple?this.search_choices.bind("click.chosen",function(e){t.choices_click(e)}):this.container.bind("click.chosen",function(t){t.preventDefault()})},i.prototype.destroy=function(){return t(this.container[0].ownerDocument).unbind("click.chosen",this.click_test_action),this.search_field[0].tabIndex&&(this.form_field_jq[0].tabIndex=this.search_field[0].tabIndex),this.container.remove(),this.form_field_jq.removeData("chosen"),this.form_field_jq.show()},i.prototype.search_field_disabled=function(){return this.is_disabled=this.form_field_jq[0].disabled,this.is_disabled?(this.container.addClass("chosen-disabled"),this.search_field[0].disabled=!0,this.is_multiple||this.selected_item.unbind("focus.chosen",this.activate_action),this.close_field()):(this.container.removeClass("chosen-disabled"),this.search_field[0].disabled=!1,this.is_multiple?void 0:this.selected_item.bind("focus.chosen",this.activate_action))},i.prototype.container_mousedown=function(e){return this.is_disabled||(e&&"mousedown"===e.type&&!this.results_showing&&e.preventDefault(),null!=e&&t(e.target).hasClass("search-choice-close"))?void 0:(this.active_field?this.is_multiple||!e||t(e.target)[0]!==this.selected_item[0]&&!t(e.target).parents("a.chosen-single").length||(e.preventDefault(),this.results_toggle()):(this.is_multiple&&this.search_field.val(""),t(this.container[0].ownerDocument).bind("click.chosen",this.click_test_action),this.results_show()),this.activate_field())},i.prototype.container_mouseup=function(t){return"ABBR"!==t.target.nodeName||this.is_disabled?void 0:this.results_reset(t)},i.prototype.search_results_mousewheel=function(t){var e;return t.originalEvent&&(e=-t.originalEvent.wheelDelta||t.originalEvent.detail),null!=e?(t.preventDefault(),"DOMMouseScroll"===t.type&&(e=40*e),this.search_results.scrollTop(e+this.search_results.scrollTop())):void 0},i.prototype.blur_test=function(){return!this.active_field&&this.container.hasClass("chosen-container-active")?this.close_field():void 0},i.prototype.close_field=function(){return t(this.container[0].ownerDocument).unbind("click.chosen",this.click_test_action),this.active_field=!1,this.results_hide(),this.container.removeClass("chosen-container-active"),this.clear_backstroke(),this.show_search_field_default(),this.search_field_scale()},i.prototype.activate_field=function(){return this.container.addClass("chosen-container-active"),this.active_field=!0,this.search_field.val(this.search_field.val()),this.search_field.focus()},i.prototype.test_active_click=function(e){var i;return i=t(e.target).closest(".chosen-container"),i.length&&this.container[0]===i[0]?this.active_field=!0:this.close_field()},i.prototype.results_build=function(){return this.parsing=!0,this.selected_option_count=null,this.results_data=n.select_to_array(this.form_field),this.is_multiple?this.search_choices.find("li.search-choice").remove():this.is_multiple||(this.single_set_selected_text(),this.disable_search||this.form_field.options.length<=this.disable_search_threshold?(this.search_field[0].readOnly=!0,this.container.addClass("chosen-container-single-nosearch")):(this.search_field[0].readOnly=!1,this.container.removeClass("chosen-container-single-nosearch"))),this.update_results_content(this.results_option_build({first:!0})),this.search_field_disabled(),this.show_search_field_default(),this.search_field_scale(),this.parsing=!1},i.prototype.result_do_highlight=function(t){var e,i,n,s,o;if(t.length){if(this.result_clear_highlight(),this.result_highlight=t,this.result_highlight.addClass("highlighted"),n=parseInt(this.search_results.css("maxHeight"),10),o=this.search_results.scrollTop(),s=n+o,i=this.result_highlight.position().top+this.search_results.scrollTop(),e=i+this.result_highlight.outerHeight(),e>=s)return this.search_results.scrollTop(e-n>0?e-n:0);if(o>i)return this.search_results.scrollTop(i)}},i.prototype.result_clear_highlight=function(){return this.result_highlight&&this.result_highlight.removeClass("highlighted"),this.result_highlight=null},i.prototype.results_show=function(){return this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.container.addClass("chosen-with-drop"),this.results_showing=!0,this.search_field.focus(),this.search_field.val(this.search_field.val()),this.winnow_results(),this.form_field_jq.trigger("chosen:showing_dropdown",{chosen:this}))},i.prototype.update_results_content=function(t){return this.search_results.html(t)},i.prototype.results_hide=function(){return this.results_showing&&(this.result_clear_highlight(),this.container.removeClass("chosen-with-drop"),this.form_field_jq.trigger("chosen:hiding_dropdown",{chosen:this})),this.results_showing=!1},i.prototype.set_tab_index=function(){var t;return this.form_field.tabIndex?(t=this.form_field.tabIndex,this.form_field.tabIndex=-1,this.search_field[0].tabIndex=t):void 0},i.prototype.set_label_behavior=function(){var e=this;return this.form_field_label=this.form_field_jq.parents("label"),!this.form_field_label.length&&this.form_field.id.length&&(this.form_field_label=t("label[for='"+this.form_field.id+"']")),this.form_field_label.length>0?this.form_field_label.bind("click.chosen",function(t){return e.is_multiple?e.container_mousedown(t):e.activate_field()}):void 0},i.prototype.show_search_field_default=function(){return this.is_multiple&&this.choices_count()<1&&!this.active_field?(this.search_field.val(this.default_text),this.search_field.addClass("default")):(this.search_field.val(""),this.search_field.removeClass("default"))},i.prototype.search_results_mouseup=function(e){var i;return i=t(e.target).hasClass("active-result")?t(e.target):t(e.target).parents(".active-result").first(),i.length?(this.result_highlight=i,this.result_select(e),this.search_field.focus()):void 0},i.prototype.search_results_mouseover=function(e){var i;return i=t(e.target).hasClass("active-result")?t(e.target):t(e.target).parents(".active-result").first(),i?this.result_do_highlight(i):void 0},i.prototype.search_results_mouseout=function(e){return t(e.target).hasClass("active-result")?this.result_clear_highlight():void 0},i.prototype.choice_build=function(e){var i,n,s=this;return i=t("<li />",{"class":"search-choice"}).html("<span>"+e.html+"</span>"),e.disabled?i.addClass("search-choice-disabled"):(n=t("<a />",{"class":"search-choice-close","data-option-array-index":e.array_index}),n.bind("click.chosen",function(t){return s.choice_destroy_link_click(t)}),i.append(n)),this.search_container.before(i)},i.prototype.choice_destroy_link_click=function(e){return e.preventDefault(),e.stopPropagation(),this.is_disabled?void 0:this.choice_destroy(t(e.target))},i.prototype.choice_destroy=function(t){return this.result_deselect(t[0].getAttribute("data-option-array-index"))?(this.show_search_field_default(),this.is_multiple&&this.choices_count()>0&&this.search_field.val().length<1&&this.results_hide(),t.parents("li").first().remove(),this.search_field_scale()):void 0},i.prototype.results_reset=function(){return this.reset_single_select_options(),this.form_field.options[0].selected=!0,this.single_set_selected_text(),this.show_search_field_default(),this.results_reset_cleanup(),this.form_field_jq.trigger("change"),this.active_field?this.results_hide():void 0},i.prototype.results_reset_cleanup=function(){return this.current_selectedIndex=this.form_field.selectedIndex,this.selected_item.find("abbr").remove()},i.prototype.result_select=function(t){var e,i;return this.result_highlight?(e=this.result_highlight,this.result_clear_highlight(),this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.is_multiple?e.removeClass("active-result"):this.reset_single_select_options(),i=this.results_data[e[0].getAttribute("data-option-array-index")],i.selected=!0,this.form_field.options[i.options_index].selected=!0,this.selected_option_count=null,this.is_multiple?this.choice_build(i):this.single_set_selected_text(i.text),(t.metaKey||t.ctrlKey)&&this.is_multiple||this.results_hide(),this.search_field.val(""),(this.is_multiple||this.form_field.selectedIndex!==this.current_selectedIndex)&&this.form_field_jq.trigger("change",{selected:this.form_field.options[i.options_index].value}),this.current_selectedIndex=this.form_field.selectedIndex,this.search_field_scale())):void 0},i.prototype.single_set_selected_text=function(t){return null==t&&(t=this.default_text),t===this.default_text?this.selected_item.addClass("chosen-default"):(this.single_deselect_control_build(),this.selected_item.removeClass("chosen-default")),this.selected_item.find("span").text(t)},i.prototype.result_deselect=function(t){var e;return e=this.results_data[t],this.form_field.options[e.options_index].disabled?!1:(e.selected=!1,this.form_field.options[e.options_index].selected=!1,this.selected_option_count=null,this.result_clear_highlight(),this.results_showing&&this.winnow_results(),this.form_field_jq.trigger("change",{deselected:this.form_field.options[e.options_index].value}),this.search_field_scale(),!0)},i.prototype.single_deselect_control_build=function(){return this.allow_single_deselect?(this.selected_item.find("abbr").length||this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>'),this.selected_item.addClass("chosen-single-with-deselect")):void 0},i.prototype.get_search_text=function(){return this.search_field.val()===this.default_text?"":t("<div/>").text(t.trim(this.search_field.val())).html()},i.prototype.winnow_results_set_highlight=function(){var t,e;return e=this.is_multiple?[]:this.search_results.find(".result-selected.active-result"),t=e.length?e.first():this.search_results.find(".active-result").first(),null!=t?this.result_do_highlight(t):void 0},i.prototype.no_results=function(e){var i;return i=t('<li class="no-results">'+this.results_none_found+' "<span></span>"</li>'),i.find("span").first().html(e),this.search_results.append(i),this.form_field_jq.trigger("chosen:no_results",{chosen:this})},i.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()},i.prototype.keydown_arrow=function(){var t;return this.results_showing&&this.result_highlight?(t=this.result_highlight.nextAll("li.active-result").first())?this.result_do_highlight(t):void 0:this.results_show()},i.prototype.keyup_arrow=function(){var t;return this.results_showing||this.is_multiple?this.result_highlight?(t=this.result_highlight.prevAll("li.active-result"),t.length?this.result_do_highlight(t.first()):(this.choices_count()>0&&this.results_hide(),this.result_clear_highlight())):void 0:this.results_show()},i.prototype.keydown_backstroke=function(){var t;return this.pending_backstroke?(this.choice_destroy(this.pending_backstroke.find("a").first()),this.clear_backstroke()):(t=this.search_container.siblings("li.search-choice").last(),t.length&&!t.hasClass("search-choice-disabled")?(this.pending_backstroke=t,this.single_backstroke_delete?this.keydown_backstroke():this.pending_backstroke.addClass("search-choice-focus")):void 0)},i.prototype.clear_backstroke=function(){return this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus"),this.pending_backstroke=null},i.prototype.keydown_checker=function(t){var e,i;switch(e=null!=(i=t.which)?i:t.keyCode,this.search_field_scale(),8!==e&&this.pending_backstroke&&this.clear_backstroke(),e){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:this.results_showing&&!this.is_multiple&&this.result_select(t),this.mouse_on_container=!1;break;case 13:t.preventDefault();break;case 38:t.preventDefault(),this.keyup_arrow();break;case 40:t.preventDefault(),this.keydown_arrow()}},i.prototype.search_field_scale=function(){var e,i,n,s,o,r,a,l,c;if(this.is_multiple){for(n=0,a=0,o="position:absolute; left: -1000px; top: -1000px; display:none;",r=["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"],l=0,c=r.length;c>l;l++)s=r[l],o+=s+":"+this.search_field.css(s)+";";return e=t("<div />",{style:o}),e.text(this.search_field.val()),t("body").append(e),a=e.width()+25,e.remove(),i=this.container.outerWidth(),a>i-10&&(a=i-10),this.search_field.css({width:a+"px"})}},i}(e)}.call(this),mmf_modules.define("plugins/chosen",["jquery"],function(){}),Array.indexOf||(Array.prototype.indexOf=function(t,e){for(var i=e||0;i<this.length;i++)if(this[i]===t)return i;return-1});var Parser=function(t){function e(t){function e(){}return e.prototype=t,new e}function i(t,e,i,n){this.type_=t,this.index_=e||0,this.prio_=i||0,this.number_=void 0!==n&&null!==n?n:0,this.toString=function(){switch(this.type_){case v:return this.number_;case _:case y:case x:return this.index_;case b:return"CALL";default:return"Invalid Token"}}}function n(t,e,i,n){this.tokens=t,this.ops1=e,this.ops2=i,this.functions=n}function s(t){return"string"==typeof t?(w.lastIndex=0,w.test(t)?"'"+t.replace(w,function(t){var e=k[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+"'":"'"+t+"'"):t}function o(t,e){return Number(t)+Number(e)}function r(t,e){return t-e}function a(t,e){return t*e}function l(t,e){return t/e}function c(t,e){return t%e}function h(t,e){return""+t+e}function d(t){return-t}function u(t){return Math.random()*(t||1)}function p(t){t=Math.floor(t);for(var e=t;t>1;)e*=--t;return e}function f(t,e){return Math.sqrt(t*t+e*e)}function g(t,e){return"[object Array]"!=Object.prototype.toString.call(t)?[t,e]:(t=t.slice(),t.push(e),t)}function m(){this.success=!1,this.errormsg="",this.expression="",this.pos=0,this.tokennumber=0,this.tokenprio=0,this.tokenindex=0,this.tmpprio=0,this.ops1={sin:Math.sin,cos:Math.cos,tan:Math.tan,asin:Math.asin,acos:Math.acos,atan:Math.atan,sqrt:Math.sqrt,log:Math.log,abs:Math.abs,ceil:Math.ceil,floor:Math.floor,round:Math.round,"-":d,exp:Math.exp},this.ops2={"+":o,"-":r,"*":a,"/":l,"%":c,"^":Math.pow,",":g,"||":h},this.functions={random:u,fac:p,min:Math.min,max:Math.max,pyt:f,pow:Math.pow,atan2:Math.atan2},this.consts={E:Math.E,PI:Math.PI}}var v=0,_=1,y=2,x=3,b=4,w=/[\\\'\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,k={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","'":"\\'","\\":"\\\\"};n.prototype={simplify:function(t){t=t||{};var s,o,r,a,l=[],c=[],h=this.tokens.length,d=0;for(d=0;h>d;d++){a=this.tokens[d];var u=a.type_;if(u===v)l.push(a);else if(u===x&&a.index_ in t)a=new i(v,0,0,t[a.index_]),l.push(a);else if(u===y&&l.length>1)o=l.pop(),s=l.pop(),r=this.ops2[a.index_],a=new i(v,0,0,r(s.number_,o.number_)),l.push(a);else if(u===_&&l.length>0)s=l.pop(),r=this.ops1[a.index_],a=new i(v,0,0,r(s.number_)),l.push(a);else{for(;l.length>0;)c.push(l.shift());c.push(a)}}for(;l.length>0;)c.push(l.shift());return new n(c,e(this.ops1),e(this.ops2),e(this.functions))},substitute:function(t,s){s instanceof n||(s=(new m).parse(String(s)));var o,r=[],a=this.tokens.length,l=0;for(l=0;a>l;l++){o=this.tokens[l];var c=o.type_;if(c===x&&o.index_===t)for(var h=0;h<s.tokens.length;h++){var d=s.tokens[h],u=new i(d.type_,d.index_,d.prio_,d.number_);r.push(u)}else r.push(o)}var p=new n(r,e(this.ops1),e(this.ops2),e(this.functions));return p},evaluate:function(t){t=t||{};var e,i,n,s,o=[],r=this.tokens.length,a=0;for(a=0;r>a;a++){s=this.tokens[a];var l=s.type_;if(l===v)o.push(s.number_);else if(l===y)i=o.pop(),e=o.pop(),n=this.ops2[s.index_],o.push(n(e,i));else if(l===x)if(s.index_ in t)o.push(t[s.index_]);else{if(!(s.index_ in this.functions))throw new Error("undefined variable: "+s.index_);o.push(this.functions[s.index_])}else if(l===_)e=o.pop(),n=this.ops1[s.index_],o.push(n(e));else{if(l!==b)throw new Error("invalid Expression");if(e=o.pop(),n=o.pop(),!n.apply||!n.call)throw new Error(n+" is not a function");o.push("[object Array]"==Object.prototype.toString.call(e)?n.apply(void 0,e):n.call(void 0,e))}}if(o.length>1)throw new Error("invalid Expression (parity)");return o[0]},toString:function(t){var e,i,n,o,r=[],a=this.tokens.length,l=0;for(l=0;a>l;l++){o=this.tokens[l];var c=o.type_;if(c===v)r.push(s(o.number_));else if(c===y)i=r.pop(),e=r.pop(),n=o.index_,r.push(t&&"^"==n?"Math.pow("+e+","+i+")":"("+e+n+i+")");else if(c===x)r.push(o.index_);else if(c===_)e=r.pop(),n=o.index_,r.push("-"===n?"("+n+e+")":n+"("+e+")");else{if(c!==b)throw new Error("invalid Expression");e=r.pop(),n=r.pop(),r.push(n+"("+e+")")}}if(r.length>1)throw new Error("invalid Expression (parity)");return r[0]},variables:function(){for(var t=this.tokens.length,e=[],i=0;t>i;i++){var n=this.tokens[i];n.type_===x&&-1==e.indexOf(n.index_)&&e.push(n.index_)}return e},toJSFunction:function(t,e){var i=new Function(t,"with(Parser.values) { return "+this.simplify(e).toString(!0)+"; }");return i}},m.parse=function(t){return(new m).parse(t)},m.evaluate=function(t,e){return m.parse(t).evaluate(e)},m.Expression=n,m.values={sin:Math.sin,cos:Math.cos,tan:Math.tan,asin:Math.asin,acos:Math.acos,atan:Math.atan,sqrt:Math.sqrt,log:Math.log,abs:Math.abs,ceil:Math.ceil,floor:Math.floor,round:Math.round,random:u,fac:p,exp:Math.exp,min:Math.min,max:Math.max,pyt:f,pow:Math.pow,atan2:Math.atan2,E:Math.E,PI:Math.PI};var M=1,T=2,C=4,S=8,P=16,D=32,A=64,L=128,I=256;return m.prototype={parse:function(t){this.errormsg="",this.success=!0;var s=[],o=[];this.tmpprio=0;var r=M|S|C|A,a=0;for(this.expression=t,this.pos=0;this.pos<this.expression.length;)if(this.isOperator())this.isSign()&&r&A?(this.isNegativeSign()&&(this.tokenprio=2,this.tokenindex="-",a++,this.addfunc(o,s,_)),r=M|S|C|A):this.isComment()||(0===(r&T)&&this.error_parsing(this.pos,"unexpected operator"),a+=2,this.addfunc(o,s,y),r=M|S|C|A);else if(this.isNumber()){0===(r&M)&&this.error_parsing(this.pos,"unexpected number");var l=new i(v,0,0,this.tokennumber);o.push(l),r=T|P|D}else if(this.isString()){0===(r&M)&&this.error_parsing(this.pos,"unexpected string");var l=new i(v,0,0,this.tokennumber);o.push(l),r=T|P|D}else if(this.isLeftParenth())0===(r&S)&&this.error_parsing(this.pos,'unexpected "("'),r&L&&(a+=2,this.tokenprio=-2,this.tokenindex=-1,this.addfunc(o,s,b)),r=M|S|C|A|I;else if(this.isRightParenth()){if(r&I){var l=new i(v,0,0,[]);o.push(l)}else 0===(r&P)&&this.error_parsing(this.pos,'unexpected ")"');r=T|P|D|S|L}else if(this.isComma())0===(r&D)&&this.error_parsing(this.pos,'unexpected ","'),this.addfunc(o,s,y),a+=2,r=M|S|C|A;else if(this.isConst()){0===(r&M)&&this.error_parsing(this.pos,"unexpected constant");var c=new i(v,0,0,this.tokennumber);o.push(c),r=T|P|D}else if(this.isOp2())0===(r&C)&&this.error_parsing(this.pos,"unexpected function"),this.addfunc(o,s,y),a+=2,r=S;else if(this.isOp1())0===(r&C)&&this.error_parsing(this.pos,"unexpected function"),this.addfunc(o,s,_),a++,r=S;else if(this.isVar()){0===(r&M)&&this.error_parsing(this.pos,"unexpected variable");var h=new i(x,this.tokenindex,0,0);o.push(h),r=T|P|D|S|L}else this.isWhite()||(""===this.errormsg?this.error_parsing(this.pos,"unknown character"):this.error_parsing(this.pos,this.errormsg));for((this.tmpprio<0||this.tmpprio>=10)&&this.error_parsing(this.pos,'unmatched "()"');s.length>0;){var d=s.pop();o.push(d)}return a+1!==o.length&&this.error_parsing(this.pos,"parity"),new n(o,e(this.ops1),e(this.ops2),e(this.functions))},evaluate:function(t,e){return this.parse(t).evaluate(e)},error_parsing:function(t,e){throw this.success=!1,this.errormsg="parse error [column "+t+"]: "+e,new Error(this.errormsg)},addfunc:function(t,e,n){for(var s=new i(n,this.tokenindex,this.tokenprio+this.tmpprio,0);e.length>0&&s.prio_<=e[e.length-1].prio_;)t.push(e.pop());e.push(s)},isNumber:function(){for(var t=!1,e="";this.pos<this.expression.length;){var i=this.expression.charCodeAt(this.pos);if(!(i>=48&&57>=i||46===i))break;e+=this.expression.charAt(this.pos),this.pos++,this.tokennumber=parseFloat(e),t=!0}return t},unescape:function(t,e){for(var i=[],n=!1,s=0;s<t.length;s++){var o=t.charAt(s);if(n){switch(o){case"'":i.push("'");break;case"\\":i.push("\\");break;case"/":i.push("/");break;case"b":i.push("\b");break;case"f":i.push("\f");break;case"n":i.push("\n");break;case"r":i.push("\r");break;case"t":i.push("	");break;case"u":var r=parseInt(t.substring(s+1,s+5),16);i.push(String.fromCharCode(r)),s+=4;break;default:throw this.error_parsing(e+s,"Illegal escape sequence: '\\"+o+"'")}n=!1}else"\\"==o?n=!0:i.push(o)}return i.join("")},isString:function(){var t=!1,e="",i=this.pos;if(this.pos<this.expression.length&&"'"==this.expression.charAt(this.pos))for(this.pos++;this.pos<this.expression.length;){var n=this.expression.charAt(this.pos);if("'"==n&&"\\"!=e.slice(-1)){this.pos++,this.tokennumber=this.unescape(e,i),t=!0;break}e+=this.expression.charAt(this.pos),this.pos++}return t},isConst:function(){var t;for(var e in this.consts){var i=e.length;if(t=this.expression.substr(this.pos,i),e===t)return this.tokennumber=this.consts[e],this.pos+=i,!0}return!1},isOperator:function(){var t=this.expression.charCodeAt(this.pos);if(43===t)this.tokenprio=0,this.tokenindex="+";else if(45===t)this.tokenprio=0,this.tokenindex="-";else if(124===t){if(124!==this.expression.charCodeAt(this.pos+1))return!1;this.pos++,this.tokenprio=0,this.tokenindex="||"}else if(42===t)this.tokenprio=1,this.tokenindex="*";else if(47===t)this.tokenprio=2,this.tokenindex="/";else if(37===t)this.tokenprio=2,this.tokenindex="%";else{if(94!==t)return!1;this.tokenprio=3,this.tokenindex="^"}return this.pos++,!0},isSign:function(){var t=this.expression.charCodeAt(this.pos-1);
return 45===t||43===t?!0:!1},isPositiveSign:function(){var t=this.expression.charCodeAt(this.pos-1);return 43===t?!0:!1},isNegativeSign:function(){var t=this.expression.charCodeAt(this.pos-1);return 45===t?!0:!1},isLeftParenth:function(){var t=this.expression.charCodeAt(this.pos);return 40===t?(this.pos++,this.tmpprio+=10,!0):!1},isRightParenth:function(){var t=this.expression.charCodeAt(this.pos);return 41===t?(this.pos++,this.tmpprio-=10,!0):!1},isComma:function(){var t=this.expression.charCodeAt(this.pos);return 44===t?(this.pos++,this.tokenprio=-1,this.tokenindex=",",!0):!1},isWhite:function(){var t=this.expression.charCodeAt(this.pos);return 32===t||9===t||10===t||13===t?(this.pos++,!0):!1},isOp1:function(){for(var t="",e=this.pos;e<this.expression.length;e++){var i=this.expression.charAt(e);if(i.toUpperCase()===i.toLowerCase()&&(e===this.pos||"_"!=i&&("0">i||i>"9")))break;t+=i}return t.length>0&&t in this.ops1?(this.tokenindex=t,this.tokenprio=5,this.pos+=t.length,!0):!1},isOp2:function(){for(var t="",e=this.pos;e<this.expression.length;e++){var i=this.expression.charAt(e);if(i.toUpperCase()===i.toLowerCase()&&(e===this.pos||"_"!=i&&("0">i||i>"9")))break;t+=i}return t.length>0&&t in this.ops2?(this.tokenindex=t,this.tokenprio=5,this.pos+=t.length,!0):!1},isVar:function(){for(var t="",e=this.pos;e<this.expression.length;e++){var i=this.expression.charAt(e);if(i.toUpperCase()===i.toLowerCase()&&(e===this.pos||"_"!=i&&("0">i||i>"9")))break;t+=i}return t.length>0?(this.tokenindex=t,this.tokenprio=4,this.pos+=t.length,!0):!1},isComment:function(){var t=this.expression.charCodeAt(this.pos-1);return 47===t&&42===this.expression.charCodeAt(this.pos)?(this.pos=this.expression.indexOf("*/",this.pos)+2,1===this.pos&&(this.pos=this.expression.length),!0):!1}},t.Parser=m,m}("undefined"==typeof exports?{}:exports);mmf_modules.define("parser",function(t){return function(){var e;return e||t.Parser}}(this)),mmf_modules.define("app/route/dynamic_route_sponsorship",["parser","jquery","console"],function(t,e,i){"use strict";var n,s={};s.init=function(t){n=t||{}};var o=function(i,s){var o=n.info;if(o){var r="_1";o.trigger_distance&&(r=i.converted<o.trigger_distance?"_1":"_2");for(var a=o.click_url,l=o["message"+r],c=o["font_color"+r],h=o["font_size"+r],d=o["font_weight"+r],u=o["bg_image"+r],p=o["bg_color"+r],f=(o["impression_code"+r],{distance:i.converted,unit:i.unit.abbreviated}),g="",m=l.match(/%.*?%/g),v=0;v<m.length;v++)if("%%"===m[v])l=l.replace("%%","%");else{var _="";"string"==typeof m[v]&&(g=m[v].replace(/\%/g,""),_=Math.round(10*t.evaluate(g,f))/10),l=l.replace("%"+g+"%",_)}var y=e("#dynamic-route-ad-message");y.text(l),y.css("color",c),h>0?y.css("fontSize",h+"px"):y.css("fontSize",""),d===!0?y.css("fontWeight","bold"):y.css("fontWeight","normal");var x=e("#dynamic-route-ad");x.css("background-color",p),x.css("background-image").indexOf(u)&&s||x.css("background-image","url('"+u+"')"),x.click(function(){document.location.href=a})}};return s.distanceChanged=function(t){if(!n)return void i.log("DRS: Init must be called prior to distanceChanged. Skipping updates.");if(o(t,!0),n.interactive_ad){var s=t.converted,r=s,a=e(".interactive_distance").length>0?e(".interactive_distance"):e(".banner_ad iframe:eq(0)").contents().find(".interactive_distance");if(e(".sponsored_route_interactive").show(),n.secondary_ad.secondary_image.length>0){if(Math.floor(s)>=n.secondary_ad.secondary_image_dist_trigger){var l=e("#sponsored_route_ad").length>0?e("#sponsored_route_ad"):e(".banner_ad iframe:eq(0)").contents().find("#sponsored_route_ad");l.find("img").attr("src",n.secondary_ad.secondary_image),a.html(n.secondary_ad.secondary_distance_copy).addClass("secondary")}n.secondary_ad.dist_minus_trigger===!0&&(r=Math.abs(n.secondary_ad.secondary_image_dist_trigger-s))}r=r.toFixed(r>10||.1>r?0:1),a.find("span").html(r).show(),e(".interactive_overlay").hide(),n.interactive_ad_icon&&(!n.interactive_ad_icon.only_one_marker||n.interactive_ad_icon.only_one_marker&&!n.interactive_ad_icon.icon_placed)&&s>n.interactive_ad_icon.last_displayed_distance+n.interactive_ad_icon.distance&&(n.my_marker=map.addMarker({options:{draggable:!0},uri:n.interactive_ad_icon.icon,point:map.getLastPoint(),click:function(){window.open(n.interactive_ad_icon.link,"_blank")}}),map.addMarker({uri:n.interactive_ad_icon.tracker,point:map.getLastPoint()}),n.interactive_ad_icon.last_displayed_distance=s,n.interactive_ad_icon.icon_placed=!0,setTimeout(function(){n.my_marker.remove()},5e3))}},s}),mmf_modules.define("app/workout/activity_type/models",["backbone_mmf","underscore","utils/utils"],function(t,e,i){"use strict";var n={};return n.ActivityTypeModel=t.Model.extend({urlRoot:"/vxproxy/v7.0/activity_type/",parse:function(t){var i;if(!(t._links&&t._links.self&&t._links.self[0]&&t._links.self[0].id))throw"Bad response from activity_type api endpoint.";return i={id:t._links.self[0].id,icon_url:t._links.icon_url&&t._links.icon_url[0]&&t._links.icon_url[0].href},e.extend(i,t)}}),n.ActivityTypeCollection=t.Collection.extend({model:n.ActivityTypeModel,embedded_list_key:"activity_types",parse:function(t){return t&&t._embedded&&t._embedded[this.embedded_list_key]||[]},url:"/vxproxy/v7.0/activity_type/"}),n.ActivityTypeSelectCollection=n.ActivityTypeCollection.extend({fetch_limit:800,max:1e3,preSync:function(n,s,o){if("read"===n){var r=e.clone(o),a=[],l=[],c=-1,h=0,d=e.bind(function(o){if(0>c&&(i.assert(o.total_count),c=o.total_count>this.max?this.max:o.total_count),h++,l=this.parse(o),a=a.concat(l),l.length&&a.length<c){var u=e.extend({},r,{data:{limit:this.fetch_limit,offset:h*this.fetch_limit},success:e.bind(d,this)});t.sync.apply(this,[n,s,u])}else o._embedded[this.embedded_list_key]=a,r.success.apply(this,[o])},this);e.extend(o,{data:{limit:this.fetch_limit,offset:0},success:d})}}}),n}),mmf_modules.define("app/workout/activity_type/views",["jquery","plugins/chosen","backbone","underscore","utils/utils"],function(t,e,i,n,s){"use strict";var o={};return o.ActivityTypeSelectView=i.View.extend({tagName:"select",className:"mmf_activity_type_select",placeholder_text:"Choose an Activity",width:250,events:{change:"onSelectionMade"},initialize:function(t){s.assert(t),this.width="undefined"==typeof t.width?this.width:t.width,this.el_attr={id:t.id,name:t.name,placeholder_text:t.placeholder_text||this.placeholder_text,placeholder_value:t.placeholder_value||"","class":t.classes&&t.classes.join(" ")},this.activity_types=t.activity_types,this.listenTo(this.activity_types,"sync",this.onSyncActivityTypes),this.model=new i.Model,this.listenTo(this.model,"change:selected_id",this.onChangeSelected),"undefined"!=typeof t.selected_id&&this.model.set("selected_id",t.selected_id),this.render()},onSelectionMade:function(e){var i=t(e.target).val();this.model.set({selected_id:i})},onChangeSelected:function(t,e){this.trigger("change:selected",e)},onSyncActivityTypes:function(){this.render(),this.trigger("ready")},render:function(){var e,i,s,o,r,a=!1,l={};return this.activity_types.length?(a=!0,s=t("<select>").data("placeholder",this.el_attr.placeholder_text).attr(this.el_attr).append(t("<option>").html(this.el_attr.placeholder_text).val(this.el_attr.placeholder_value)),e=n.filter(this.activity_types.pluck("category"),function(t){return"undefined"!=typeof t}),e.length&&(l=n.reduce(n.uniq(e),function(e,i){return e[i]=t('<optgroup label="'+i+'"></optgroup>'),e},l)),r=parseInt(this.model.get("selected_id"),10),this.activity_types.each(function(n){var a=parseInt(n.get("id"),10);o=t("<option>").text(n.get("name")).val(a).prop("selected",a===r),i=e&&l[n.get("category")],i?i.append(o):s.append(o)},this),n.each(l,function(t){s.append(t)})):s=t("<div>").addClass("loading tiny"),this.$el.html(s),a&&s.chosen({width:this.width+"px",disable_search_threshold:10}),this}}),o}),mmf_modules.define("app/workout/activity_type/main",["jquery","underscore","app/workout/activity_type/models","app/workout/activity_type/views","utils/utils"],function(t,e,i,n,s){"use strict";var o={},r=function(t){return e.chain(t).keys().sortBy(function(t){return t}).reduce(function(e,i){return e=e.concat([i,t[i]])},[]).value().join("")},a={createSelectView:function(t){t=s.assert(t),s.assert(t.el);var a,l=[],c=!1,h="no_filter";t.filters&&(h=r(t.filters)),o[h]?(c=!0,a=o[h]):("undefined"!=typeof t.activity_types&&(l=t.activity_types),a=o[h]=new i.ActivityTypeSelectCollection);var d=new n.ActivityTypeSelectView(e.extend(t,{activity_types:a}));return l.length?(a.set(l,{remove:!1,merge:!1}),a.trigger("sync",a,null)):c||a.fetch(),d}};return a}),mmf_modules.require(["console","jquery","underscore","highcharts","utils/utils","utils/api","utils/conversions","utils/maps","utils/settings","utils/site","utils/user","utils/ux","plugins/chosen","plugins/qtip","plugins/ui","app/route/dynamic_route_sponsorship","app/workout/activity_type/main","context_vars/routes/standalone/main"],function(t,e,i,n,s,o,r,a,l,c,h,d,u,p,f,g,m,v){"use strict";function _(t){var i=!1;X.cue_notes=t;var n=e("#cue-notes-table"),s=n.find("tbody"),o=e("#no-cue-notes-yet");if(t.length>0){s.html("");var r,a,l,c,h,d=t.length,u=e("<div>");for(l=0;d>l;l++)if(t[l]){r=t[l],i=r.actions&&r.actions.update instanceof Function,h=u.html(r.text.replace("><","> <")).text().replace(/\s{2,}/," "),c="view"!==v.action?["<td>",i?['<a data-index="',l,'" href="#edit" class="modify">edit</a>'].join(""):"","</td>"].join(""):"";var p=e("<tr>").attr({id:"cue-notes-row-"+l}).data("index",l),f=e("<td>"),g=f.clone().attr({nowrap:"nowrap"}).addClass("cue_distance").text(r.distance),m=f.clone().addClass("cue_icon").html(r.icon),_=f.clone().addClass("cue_text").append(e("<a>").addClass("zoom").attr("href","#").text(h)),x=f.clone().addClass("cue_actions").html(c);a=p.append(g,m,_,x),s.append(a)}o.hide(),s.find("tr").on("mouseover","td",function(){ye(e(this).parent().data("index"))}).on("click","a.modify",function(t){t.preventDefault(),y(e(t.target).data("index"))}).find("td.cue_text").on("click","a",function(t){t.preventDefault(),xe(e(this).parents("tr:first").data("index"))}),n.show()}else o.show(),n.hide()}function y(t){var i,n,s,o,r,a=X.cue_notes;a&&a.length&&a[t]&&(i=a[t],n=e('<textarea rows="2">'+e("#cue-notes-row-"+t).find(".zoom").text()+"</textarea>").keyup(function(t){13===t.keyCode&&s.trigger("click")}),s=e('<a href="#save" class="button cta">Save</a>').click(function(s){s.preventDefault(),i.actions.update(n.val()),e("#cue-notes-row-"+t).find(".zoom").text(n.val()),e(r).qtip().destroy()}),o=e('<a href="#cancel" class="button">Cancel</a>').click(function(t){t.preventDefault(),e(r).qtip().destroy()}),r=e(window).qtip({content:function(){return e('<div class="cue-edit"></div>').append(n,s,o)}(),position:{my:"left center",at:"right center",target:e("#cue-notes-row-"+t).find(".zoom")},show:{event:!1,ready:!0},hide:"unfocus",events:{visible:function(){n.focus(),n.select()}},style:{classes:"qtip-light ui-tooltip-light ui-tooltip-rounded ui-tooltip-shadow",tip:{width:20,height:15}}}))}var x,b,w,k,M,T,C,S,P,D,A,L,I,O,z,Y,R,H=null,E="rgb(220, 220, 220)",B={"-20":"rgb(0, 51, 255)","-19":"rgb(2, 57, 244)","-18":"rgb(3, 65, 230)","-17":"rgb(5, 75, 212)","-16":"rgb(6, 87, 192)","-15":"rgb(8, 99, 170)","-14":"rgb(10, 111, 148)","-13":"rgb(13, 124, 124)","-12":"rgb(16, 137, 101)","-11":"rgb(19, 151, 79)","-10":"rgb(24, 163, 59)","-9":"rgb(29, 175, 39)","-8":"rgb(35, 186, 23)","-7":"rgb(42, 196, 9)","-6":"rgb(51, 204, 0)","-5":"rgb(88, 226, 0)","-4":"rgb(138, 248, 5)","-3":"rgb(180, 255, 21)","-2":"rgb(211, 255, 35)","-1":"rgb(239, 255, 47)",0:"rgb(255, 255, 51)",1:"rgb(255, 234, 47)",2:"rgb(255, 199, 36)",3:"rgb(249, 157, 21)",4:"rgb(235, 106, 5)",5:"rgb(216, 44, 0)",6:"rgb(204, 0, 0)",7:"rgb(204, 0, 130)",8:"rgb(204, 0, 193)",9:"rgb(204, 0, 234)",10:"rgb(204, 0, 255)",11:"rgb(182, 0, 242)",12:"rgb(148, 0, 199)",13:"rgb(122, 0, 160)",14:"rgb(108, 0, 140)",15:"rgb(97, 0, 122)",16:"rgb(85, 0, 103)",17:"rgb(75, 0, 87)",18:"rgb(65, 0, 72)",19:"rgb(57, 0, 60)",20:"rgb(51, 0, 5)"};window.MMF={Maps:{}};var F="MMF.Maps",N=!1,W=h.getUserType(),G={type:"interactive"},X={cue_notes:null,elevation:null},j=a.getSetting,U=a.setSetting,V=function(){P.hide()},q=i.once(function(){W===h.USER_CLASSES.MVP?V():(W===h.USER_CLASSES.FREE||"view"===v.action)&&setTimeout(function(){V()},4e3)}),Z=function(){{var t=6500;e("#route_loading_box")}setTimeout(function(){x||q()},t)},$=function(t){var e=t.is("section.main")?t:t.parents("section.main");e.hasClass("open")||e.find("header").click()},K=function(){"view"!==v.action&&(N||($(w),e(".left-ad").css("margin-top","10px"),e("#save_secondary").show(),N=!0))},J=function(){return W===h.USER_CLASSES.ANONYMOUS?(e("#route_loading_box").hide(),e("#registration_modal").show(),!1):!0},Q=function(t,e,i,n){$(t),(n||t)[0].scrollIntoView(),t.qtip({content:{text:e},position:{my:"left center",at:"right center"},show:{event:!1,ready:!0},events:{show:function(t,e){setTimeout(function(){e.destroy()},i||1e4)}},style:"notification"})},te=function(t){var i=e(".save"),n="Saving...",s=i.eq(0).data("idleText");"enabled"===t?i.removeAttr("disabled").removeClass("disabled").text(s):"disabled"===t&&i.attr("disabled",!0).addClass("disabled").text(n)},ee=function(){e("#modal-tags a.tag").each(function(t,i){e(i).removeClass("selected")})},ie=function(t,i){var n=e(t);return i&&i.preventDefault(),K(),n.is(":disabled")||n.hasClass("disabled")?void 0:(te("disabled"),h.id?void de():(d.QTipModal(window,"Attention","You must be logged in to save a route."),void te("enabled")))},ne=function(t){var i="Route distance may not be greater than ";return t.segments.length<=0?(d.ModalMessager.warning("You must have at least two points on the map to save a route."),te("enabled"),!1):t.meta.distance>1609344?(i="metric"===R.UnitsOfMeasure.METRIC?i+r.convertDistanceTo(1609344,"m","km")+"km":i+r.convertDistanceTo(1609344,"m","mi")+"mi",d.QTipModal(window,"Attention",i),te("enabled"),!1):e("#activity").val()?e("#name").val()?!0:(Q(e("#name"),"A route name is required.",4e3,e("#save_secondary")),te("enabled"),!1):(Q(e("#activity-control"),"An activity is required",4e3,e("#save_secondary")),te("enabled"),!1)},se=function(t){var e=new Date(t);return!isNaN(e.getTime())},oe=function(){if(me()){var t,i=e("#duration-hours"),n=parseInt(i.val(),10),s=e("#duration-minutes"),o=parseInt(s.val(),10),a=e("#duration-seconds"),l=parseInt(a.val(),10),c=e("#workout-description"),h=c.val(),d=h&&h!==c.attr("placeholder");if(d||Boolean(n)||Boolean(o)||Boolean(l)){if(t=A.val(),!se(t))return Q(A,"A valid date is required",4e3),te("enabled"),!1;if("have-done"===e("#have-done-will-do").val()){if(n+o+l===0)return Q(a,"A valid duration is required",4e3),te("enabled"),!1;if(r.DurationBuilder(n,o,l)>86399)return Q(a,"A workout cannot exceed 24 hours",4e3),te("enabled"),!1}}}return!0},re=function(t,i){var n={_links:{activity_type:[{href:"/v7.0/activity_type/%s/".replace("%s",e("#activity").val()),id:e("#activity").val()}],privacy:[{href:"/v7.0/privacy_option/%s/".replace("%s",e("#privacy").val()),id:e("#privacy").val()}],route:[{href:"/v7.0/route/%s/".replace("%s",t),id:t}]},name:e("#workout-description").val().length>0&&e("#workout-description").val(),source:c.short_name+":RE",user:h.id,start_datetime:new Date(A.val()).toUTCString(),start_locale_timezone:v.timezone,aggregates:{distance_total:i.meta.distance,elapsed_time_total:r.DurationBuilder(e("#duration-hours").val(),e("#duration-minutes").val(),e("#duration-seconds").val())}};return n.aggregates.active_time_total=n.aggregates.elapsed_time_total,JSON.stringify(n)},ae=function(i,n){var s="There was a problem saving your workout. Please wait a moment and try again.",o={type:"POST",dataType:"json",url:"/vxproxy/v7.0/workout/",data:re(i,n),error:function(){O.reject(s)},success:function(e){t.log("--saveWorkout success:",e);var i=Pe(e);i?O.resolve(i):(t.log("saveRoute - FAIL: no id returned"),O.reject(s))}};t.log("--saveWorkout:",o),e.ajax(o)},le=function(t){var i={url:"/routes/view/send_to_phone/"+t+"/",dataType:"json",error:function(){z.reject("There was a problem sending to phone. Redirecting to route details.")},success:function(){z.resolve()}};e.ajax(i)},ce=function(t){var e="/workout/"+t,i="/pin_user_to_writer_db/";window.location.href=i+"?next="+e},he=function(t){var e="/routes/view/"+t,i="/pin_user_to_writer_db/";window.location.href=i+"?next="+e},de=function(){var t,i,n=x.getRouteData();return ne(n)&&oe()?(I=e.Deferred(),O=e.Deferred(),z=e.Deferred(),ue(),t=n,ge(n),I.done(function(e){i=e,me()?ae(e,t):O.resolve(),ve()?le(e):z.resolve()}),void O.done(function(t){z.always(function(){t?ce(t):he(i)})})):!1},ue=function(){var t=function(t){t&&d.Messaging.View(t,!0),te("enabled")};I.fail(function(e){t(e)}),O.fail(function(e){t(e)}),z.fail(function(){})},pe=function(){return{copy:"POST",create:"POST",edit:"PUT"}[v.action]},fe=function(t){var i={_links:{activity_types:[{href:"/v7.0/activity_type/%s/".replace("%s",e("#activity").val()),id:e("#activity").val()}],privacy:[{href:"/v7.0/privacy_option/%s/".replace("%s",e("#privacy").val()),id:e("#privacy").val()}]},data_source:c.short_name+":RE",distance:t.meta.distance,description:function(){return"Describe this map"===e("#description").val()?"":e("#description").val()}(),name:e("#name").val().length>0&&"Name this map"!==e("#name").val()&&e("#name").val(),points:a.mappingApiRouteDataToPoints(t),starting_location:{coordinates:t.segments[0].geometry.coordinates[0],type:"Point"},start_point_type:e("#starts-from").val()};return JSON.stringify(i)},ge=function(i){var n='There was a problem saving your route. Please see possible solutions <a href="https://support.mapmyfitness.com/hc/en-us/articles/200118384-How-to-manually-create-a-Route">HERE</a>.',s=pe(),o="/vxproxy/v7.0/route/%s/?field_set=detailed_internal",r={contentType:"application/json",data:fe(i),dataType:"json",type:s,url:o.replace("%s/","PUT"===s&&v.route&&v.route.id+"/"||""),error:function(e,i,s){t.log("saveRoute - FAIL",[e,i,s]),I.reject(n)},success:function(e){t.log("---saveRoute success:",e);var i=Pe(e);i?I.resolve(i):(t.log("saveRoute - FAIL: no id returned"),I.reject(n))}};e.ajax(r)},me=function(){return(e("#workout-description").val()||e("#duration-hours").val()||e("#duration-minutes").val()||e("#duration-seconds").val())&&"Describe your workout"!==e("#workout-description").val()},ve=function(){return e("#send-to-phone").attr("checked")},_e=function(t,i){var n=e("#"+t),s=e("#change_chart_type");"on"===i?(n.addClass("open"),s.show()):"off"===i&&(n.removeClass("open"),s.hide())},ye=function(t){var e=X.cue_notes;e&&e.length&&e[t]&&e[t].actions.center()},xe=function(t){var e,i=X.cue_notes;i&&i.length&&i[t]&&(e=i[t],e.actions.zoom&&e.actions.zoom())},be=function(t){if(t.data.length<1)return e("#elevation_content").html(""),void(e("#elevation_content_wrapper").is(":visible")&&e("#elevation_expand").trigger("click"));var s,o,r,a,c,h,d,u,p,f,g,m,v,_,y,x,b,w,k,M,T,C,S=[],P=[],D=[],A={},L=1,I=4;if(G.last_elevation=t,G.points=[],G.showPoint=t.actions.showPoint,G.hidePoint=t.actions.hidePoint,t&&t.data&&t.data.length>0){for(e("#show_elevation").is(":checked")&&_e("elevation","on"),f=t.data.length,p=t.meta.distance,T=0;f>T;T++){var O=t.data[T].elevation;0===T&&(c=O,h=O),P.push(O),c>O&&(c=O),O>h&&(h=O),a=h-c,d=c-.1*a,u=h+.1*a,p=t.meta.distance,D.push(parseFloat((T/f*p).toFixed(2))),G.points.push(t.data[T].location)}if(G.chart&&G.chart.destroy&&G.chart.destroy(),"grades"===G.chart_type){for("km"===t.meta.unit.distance.abbreviated?L=1e3:"mi"===t.meta.unit.distance.abbreviated&&(L=5280),_=Math.ceil(D[D.length-1]*I),10>_&&(_=10),g=Math.floor(f/_)||1,m=0,v=1===g?1:g-1,C=f-1,T=0;C>T&&(0===T||(m=v,v=m+g,g>C-v&&(v=C),m!==v));T+=g)y=P.slice(m,v+1),x=(D[v]-D[m])*L,b=Math.round((y[y.length-1]-y[0])/x*100),k=B[b.toString()]||E,w=b.toString(),i.has(A,w)?M=A[w].data:(M=i.map(i.range(f),function(){return null}),A[w]={data:null,fillColor:k,color:k,name:w+"%",index:b}),Array.prototype.splice.apply(M,[m,y.length].concat(y)),A[w].data=M;S=i.values(A),r={enabled:!0,floating:!0,align:"center",x:50,y:"-100%",borderWidth:0}}else S=[{data:P,color:l.Charts.Elevation.color,fillColor:l.Charts.Elevation.fillColor}];o={chart:{renderTo:"elevation_content",type:"area"},xAxis:{categories:D,tickInterval:parseInt(D.length/5,10)},yAxis:{min:d,max:u,title:{text:"Elevation ("+t.meta.unit.elevation.full+")",style:{color:"#86caf7"}}},tooltip:{formatter:function(){return G.showPoint(G.points[this.point.x]),this.y+" "+t.meta.unit.elevation.abbreviated+" at "+this.x+" "+t.meta.unit.distance.abbreviated}},series:S},r&&(o.legend=r,o.plotOptions={series:{events:{legendItemClick:function(){return!1}}}}),s=e.extend(!0,{},l.Highcharts,o),G.chart=new n.Chart(s)}Ae()},we=function(){R=s.resolveObjectReferenceFromString(window,F);var t={api_mode:function(){var t;return t="copy"===v.action||"edit"===v.action?R.ApiModes.EDIT:"create"===v.action?R.ApiModes.CREATE:"view"===v.action?R.ApiModes.VIEW:R.ApiModes.CREATE}(),error:{callback:function(t){d.Messaging.View(t,!0)}},user_interface:{display:{directions:{callback:_},elevation:{callback:be,hide:function(){_e("elevation","off"),Ae()},open_by_default:j("show_elevation",c.name.match(/ride/i)),show:function(){_e("elevation","on"),Ae()}},distance:{callback:function(t){K(),g.distanceChanged(t)}}}},map:{settingChange:U,behavior:{scroll_wheel_zoom:j("scroll_wheel_zoom",!0),center_on_click:j("center_on_click",!1),follow_roads:j("follow_roads",!0)},events:{click:K},init:{map_type:j("map_type",c.name.match(/hike/i)?R.MapTypes.TERRAIN:R.MapTypes.ROAD).toUpperCase(),position:function(){var t=v.route_user&&v.route_user.formatted_address;return"create"===v.action?"United States"===t||t.match(/^usa?$/i)?{latitude:null,longitude:null}:{address:t}:{latitude:!isNaN(v.route.start_latitude)&&v.route.start_latitude,longitude:!isNaN(v.route.start_longitude)&&v.route.start_longitude}}(),overview_map_control_options:{opened:!0},pan_control:!0,map_type_control_options:{position:google.maps.ControlPosition.RIGHT_TOP},zoom_control_options:{position:google.maps.ControlPosition.LEFT_TOP},street_view_control_options:{position:google.maps.ControlPosition.LEFT_TOP}},display:{ads:W!==h.USER_CLASSES.MVP,bicycle_paths:j("show_bicycle_paths",c.name.match(/ride/i)),traffic:j("show_traffic",!1),weather:j("show_weather",!1),start_drawing_message:window.location.href.indexOf("create")>-1,distance_markers:j("distance_markers",!0)},paths:{snap_to_roads:{travel_mode:j("travel_mode",c.name.match(/ride/i)?R.TravelModes.BICYCLING:R.TravelModes.WALKING).toUpperCase(),avoid_highways:j("avoid_highways",!0)}}},map_ready:q,unit:function(){return h.id&&"metric"===v.route_user.distance_unit?R.UnitsOfMeasure.METRIC:R.UnitsOfMeasure.IMPERIAL}()};x=R.createMap(b.get(0),t,Te),l.debug&&(window.map=x)},ke=function(){};ke.prototype.error=function(t){window.console&&window.console.error&&window.console.error(t)},ke.prototype.warn=function(t){window.console&&window.console.warn&&window.console.warn(t)},ke.prototype._suppress_event=function(t){t&&(t.preventDefault(),t.stopPropagation())};var Me=function(){var t=function(t){var n=t.element_id||"above_map_tout_banner",s=t.show_callback||function(){},o=t.hide_callback||function(){},r=this;this.slide_speed=1e3,this.key="suppress_above_map_tout",this._init=function(){var t=e("#"+n);this.$e=t,t.on("click",".close",function(t){r._suppress_event(t),r.hide(!0)})},this.show=function(){r.$e.length&&r.canShow()&&r.$e.slideDown(r.slide_speed,function(){s()})},this.hide=function(t){r.$e.length&&r.$e.slideUp(r.slide_speed,i.bind(function(){t&&U(this.key,!0),o()},this))},this.canShow=function(){return!j(this.key)},this._init()};return t.prototype=new ke,t}(),Te=function(){var t;L=new Me({hide_callback:Ae,show_callback:Ae}),v.route&&v.route.id&&Ce(),W!==h.USER_CLASSES.MVP&&e("#mmf_map_controls_markers_tab").on("click",function(){setTimeout(function(){e("#tab_markers").html(e("#marker-mvp-tout").html()),e("#marker-mvp-tout-go").on("click",function(e){t=d.Messager.confirm('If you want to add markers to the current map. Click "Cancel", then save your map before upgrading to MVP.\n\nOtherwise, to go MVP now, click "OK".',{title:"MVP feature: Map Markers"}),t.always(function(){e.preventDefault()})})},100)}),Ae()},Ce=function(){if(v.route&&v.route.id){var t=a.getRouteData(v.route.id,{last_updated:v.route.last_updated});t.done(function(t){var i=a.pointsToMappingApiRouteData(t.points),n=t._links.activity_types?e.map(t._links.activity_types,function(t){return t.id}):void 0;n&&n.length&&Se(n[0]),x.load({route:i})}),t.fail(function(){d.Messaging.View("Unable to load route at this time. Please try again in a few moments.")})}},Se=function(t){e("#activity").val(t).trigger("liszt:updated")},Pe=function(t){var e=t&&t._links;return e&&e.self.length&&e.self[0].id},De=function(){G.chart&&G.chart.setSize(b.width(),T.height())},Ae=function(){var t=e(window).height(),i=function(){var i=0;return b.siblings().filter(".vertical-flow-tangible:visible").each(function(t,n){i+=e(n).outerHeight()}),t-i}();C.height(t),b.height(i),e("#route_loading_modal").height(t),e("#left").height(t),e("#left-content").height(t-e("#left_pervasive").outerHeight()),x&&x.resizeMap(),De()},Le=function(){Ie(),window.MMF.Maps.createMap?we():window.mapi_loaded_callback=we,ze(),Oe()},Ie=function(){C=e("#mapping"),b=e("#map_container"),w=e("#map-details"),M=e("#elevation"),T=e("#elevation_content"),k=e("#cue-notes"),S=e("#collapse"),D=e("#left-inner").find("section.main"),P=e("#route_loading_modal"),A=e("#workout-date")},Oe=function(){var t=(e("#mode").find("a"),e("#location_search_container")),i=e("#location-search"),n=e("#search"),s=e("#location-search-text"),o=e("#directions"),r=e("#get_directions_container"),l=e("#get_directions"),c=e("#directions-b-text"),h=e("#shared_mode_controls"),d=e("#mode_close_wrapper"),u=function(){r.hide(),h.hide(),d.hide(),i.show()},p=e("#travel_mode_switcher").find("a"),f=e("#travel_mode_select"),g=f.find("option");p.on("click",function(){p.removeClass("active"),e(this).addClass("active");var t=p.index(this);g.eq(t).attr("selected",!0),x.setTravelMode(f.val())}),n.add(d).on("click",function(){u()}),o.on("click",function(){u(),d.show(),r.show(),h.show(),i.hide()}),t.find(".geolocate").on("click",function(t){t.preventDefault(),a.geolocate(function(t){t&&t.coords&&t.coords.latitude&&t.coords.longitude&&(s.val(t.coords.latitude+", "+t.coords.longitude),i.trigger("click"))})}),i.on("click",function(t){t.preventDefault();var e=s.val();e.length>0&&x.goToAddress(e)}),s.on("keyup",function(t){13===t.keyCode&&i.trigger("click")});var m=s,v=c,_=function(){var t={origin:m.val(),destination:v.val(),travel_mode:f.val()};return 0===t.destination.length?void Q(c,"A destination location is required",4e3):($(w),void(t.origin.length>0?x.getDirectionsModeRoute(t):a.geolocate(function(e){e&&e.coords&&e.coords.latitude&&e.coords.longitude&&(t.origin=e.coords.latitude+", "+e.coords.longitude,s.val(t.origin)),x.getDirectionsModeRoute(t)},function(){Q(s,"A start location is required",4e3)})))};r.find(".geolocate").on("click",function(t){t.preventDefault(),a.geolocate(function(t){t&&t.coords&&t.coords.latitude&&t.coords.longitude&&c.val(t.coords.latitude+", "+t.coords.longitude)})}),l.on("click",_).add(v).on("keypress",function(t){13===t.keyCode&&_()})},ze=function(){e(window).on("resize",Ae),"view"!==v.action&&(e("#cancel").on("click",function(t){t.preventDefault(),window.history.go(-1)}),e(".save").filter(".primary").on("click",function(t){t.preventDefault(),"closed"===S.data("status")&&S.click(),ie(this)}),e(".save").not(".primary").on("click",function(t){t.preventDefault(),ie(this)}));var t=e("#tags").qtip({content:{text:e("#modal-tags"),title:{text:"Popular Tags",button:!0}},position:{my:"left center",at:"right center"},show:{event:"click",solo:!0},hide:{event:"unfocus"},style:"ui-tooltip-light ui-tooltip-rounded",events:{hide:ee,show:function(){if(t.val().length){var i=t.val().split(",");e("#modal-tags a.tag").each(function(t,n){for(var s in i)i[s].trim()===e(n).text()&&e(n).addClass("selected")})}}}});e("#workout-date").datepicker({maxDate:0}).val(e.datepicker.formatDate("mm/dd/yy",new Date)),v.activity_types&&v.activity_types.length>0&&Se(v.activity_types[0]),e("#more_meta_btn").on("click",function(t){t.preventDefault();var i=e("#more_meta"),n=e(this);i.hasClass("open")?(i.hide(),i.removeClass("open"),n.text("More")):(i.show(),i.addClass("open"),n.text("Less"))}),"edit"===v.action&&($(w),w.css("border-top","0 none"),e("#workout-container").show(),e(".left-ad").css("margin-top","10px"),e("#save_secondary").show(),e("#more_meta_btn").hide(),e("#more_meta").show()),e("#have-done-will-do").on("change",function(){var t="have-done"===e(this).val();e("#duration-control")[t?"show":"hide"](),e("#send-to-phone-control")[t?"hide":"show"](),e("label.have-done-will-do-with").text(t?"Did with":"Will do with"),t?e("#workout-date").datepicker("option","minDate",null).datepicker("option","maxDate",0):e("#workout-date").datepicker("option","minDate",0).datepicker("option","maxDate",null)}),e(document).on("keyup",function(t){t.ctrlKey&&90===t.keyCode&&x.toggleScrollWheelZoom(!0)}),e("#a-workout-date").on("click",function(t){t.preventDefault(),e("#workout-date").datepicker("show")}),e("#log-as-workout-content").find(":input").on("focus",function(){e("#log-as-workout-content").find(":input").off("focus")}),S.on("click",function(t){var i=e(this);t.preventDefault();var n=i.attr("data-status");"open"===n?(e("#buttons_minimized").show(),L&&(window.clearTimeout(H),L.hide())):e("#buttons_minimized").hide(),e("#left_pervasive")["open"===n?"hide":"show"](),e("#left")["open"===n?"hide":"show"](),e("#right").css("margin-left","open"===n?0:340),i.attr("data-status","open"===n?"closed":"open"),"open"===n?i.addClass("closed"):i.removeClass("closed"),i.children(".mapping-api-sprite").toggleClass("sprite-left sprite-right"),setTimeout(function(){Ae()},200)}),e("#tags-apply").on("click",function(t){t.preventDefault();var i=[];e("#modal-tags a.tag").each(function(t,n){e(n).hasClass("selected")&&i.push(e(n).text())}),e("#tags").val(i.join(", ")).qtip("hide")}),e("#tags-cancel").on("click",function(t){t.preventDefault(),e("#tags").qtip("hide")}),e("#tags-reset").on("click",function(t){t.preventDefault(),ee()}),e("div.accordion h2").on("click",function(){e(this).parent().toggleClass("expanded")}),e(".toggle-content").on("click",function(t){var i=e(this).text()===e(this).attr("data-hide-text")?!1:!0;t.preventDefault(),e(this).text(e(this).attr(i?"data-hide-text":"data-show-text")).parent().parent().children(".content-togglable")[i?"show":"hide"]()}),e(".tag").on("click",function(t){t.preventDefault(),e(this).toggleClass("selected")}),e("#elevation_expand").on("click",function(){e("#show_elevation").click()}),Y=m.createSelectView({el:e("#activity_type_select_container"),id:"activity",activity_types:v.activity_types,hash:"outdoor",selected_id:v.activity_types_selected&&v.activity_types_selected.length?parseInt(v.activity_types_selected[0],10):null}),e("#activity").chosen(),e("#activity").on("change",function(){var t=/bike ride/gi,i=e(this).find("option:selected").text();t.test(i)&&(e("#travel-mode-select-bicycling").attr("disabled")||x.setTravelMode("bicycling"))}),T.on("mouseout",function(){G.hidePoint&&G.hidePoint()}),e(".import-route-data").on("click",function(t){t.preventDefault(),V();{var i=e(this).attr("href");e("<div id='mmf_import_workouts'><iframe src='"+i+"' id='upload_file_frame' name='upload_file_frame' width='100%' height='440px' frameborder='0' framemargin='0'></iframe></div>").dialog({title:"Import Route Data from Device",modal:!0,width:450,height:500,zIndex:3e3,close:function(){e(this).remove()}})}}),e("#fullscreen").on("click",function(t){t.preventDefault();var i=e(this),n=e(this).data("is_fullscreen");n||window.scrollTo(0,document.body.scrollHeight),S.click(),i.data("is_fullscreen",!n)}),e("a.cancel").on("click",function(t){t.preventDefault(),window.history.go(-1)}),e("#change_chart_type").on("click",function(t){t.preventDefault();
var i=e(this).data("chart_type");"elevation"===i?(e(this).data("chart_type","grades").text("Show elevation chart"),G.chart_type="grades",G.last_elevation&&be(G.last_elevation)):"grades"===i&&(e(this).data("chart_type","elevation").text("Show elevation with grades"),G.chart_type="elevation",G.last_elevation&&be(G.last_elevation))}),e("#login-cancel").on("click",function(t){t.preventDefault(),window.history.go(-1)}),D.find("header").on("click",function(){var t=e(this),i=t.parent("section").hasClass("open");D.removeClass("open").find("article").slideUp(),i||t.parent("section").addClass("open").find("article").slideDown()})};e(function(){Z(),("view"===v.action||J())&&(Le(),a.loadMappingApi({callback:"mapi_loaded_callback",consumer_key:o.key,site:c.name,namespace:F}))})}),mmf_modules.define("mmf/routes/standalone/main",function(){}),mmf_modules.require(["mmf/routes/standalone/main"]);
//# sourceMappingURL=main.js
//# sourceMappingURL=main.js.map